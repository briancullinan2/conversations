if (self.CavalryLogger) { CavalryLogger.start_js(["gUcqk"]); }

__d('EventActionContextHelper',['FBJSON'],(function a(b,c,d,e,f,g){var h={getActionHistoryJSON:function i(j){var k=c('FBJSON').parse(j);if(!k)return '';var l=k.action_history;if(!l)return '';var m=[];l=c('FBJSON').parse(l);if(!l)return '';l.forEach(function(n){var o=n;if(o.extra_data){o.extra_data=c('FBJSON').stringify(o.extra_data)}else o.extra_data='{}';m.push(o)});return c('FBJSON').stringify(m)}};f.exports=h}),null);
__d('EventDescription.react',['cx','fbt','BoostedComponentErrorBoundary.react','BoostedComponentRef','BoostedPostFamilyDialogButtonWrapper.react','DateBlock.react','EventActionContextHelper','EventsActionsLogger','EventWatchStatus','ExpandableText.react','FBJSON','ImageBlock.react','Keys','Link.react','LogicalGridCell.react','LogicalGridCellFocusStrategy','Middot.react','PublicEventWatchStatusSelector.react','React','XEventsPermalinkController','XUIText.react','Event'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Event').getKeyCode,m=225;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o,p){k.constructor.call(this,o,p);this.state={viewerWatchStatus:o.eventInfo.viewer_watch_status?o.eventInfo.viewer_watch_status:c('EventWatchStatus').UNWATCHED}}n.prototype.render=function(){var event={id:this.props.eventInfo.id,viewer_watch_status:this.state.viewerWatchStatus},o=c('EventActionContextHelper').getActionHistoryJSON(this.props.actionContext),p=null;if(this.props.eventInfo.isEligibleForBoost&&this.props.eventInfo.buttonData){p=this.$EventDescription2()}else p=c('React').createElement(c('PublicEventWatchStatusSelector.react'),{className:"_3j4t",event:event,actionHistory:o,actionCallback:this.$EventDescription3.bind(this),pageID:this.props.pageID});var q=this.props.tourFormat?this.props.eventInfo.location:this.props.eventInfo.title,r=c('React').createElement(c('XUIText.react'),{className:"_3j4r",display:'block'},this.props.eventInfo.dateAndTime,c('React').createElement(c('Middot.react'),null),this.props.eventInfo.location);if(this.props.tourFormat)r=c('React').createElement(c('XUIText.react'),{className:"_3j4r",display:'block'},this.props.eventInfo.dateAndTime);return c('React').createElement('div',null,c('React').createElement(c('ImageBlock.react'),{className:"_3j4o"},c('React').createElement('div',{className:"_3j4p"},c('React').createElement(c('DateBlock.react'),{day:this.props.eventInfo.day,month:this.props.eventInfo.month})),c('React').createElement('div',{className:"_3j4q"},c('React').createElement(c('LogicalGridCell.react'),{columnIndex:0,component:c('React').createElement('div',null)},c('React').createElement(c('Link.react'),{className:"_7ty",href:this.$EventDescription4()},q)),c('React').createElement(c('LogicalGridCell.react'),{columnIndex:1,component:c('React').createElement('div',null),focusStrategy:c('LogicalGridCellFocusStrategy')},r,c('React').createElement(c('XUIText.react'),{className:"_7u2",display:'block'},this.props.eventInfo.socialContext))),c('React').createElement(c('LogicalGridCell.react'),{className:"_3j4s",columnIndex:2,component:c('React').createElement('div',null)},p)),this.$EventDescription5())};n.prototype.$EventDescription2=function(){var o=this.props.eventInfo.buttonData;return c('React').createElement(c('LogicalGridCell.react'),{columnIndex:2,component:c('React').createElement('div',null)},c('React').createElement(c('BoostedComponentErrorBoundary.react'),null,c('React').createElement(c('BoostedPostFamilyDialogButtonWrapper.react'),{data:o,placement:c('BoostedComponentRef').WWW_PAGES_TIMELINE_UPCOMING_EVENTS_SECTION})))};n.prototype.$EventDescription4=function(){return c('XEventsPermalinkController').getURIBuilder().setInt('event_id',this.props.eventInfo.id).setString('acontext',this.props.actionContext).getURI()};n.prototype.$EventDescription3=function(o,p){if(o||!p)return;var q=p.event_update_extended_viewer_watch_status;if(!q||!q.event||!q.event.viewer_watch_status)return;c('EventsActionsLogger').log(''+this.props.eventInfo.id,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.INTERESTED_EVENT_BUTTON,acontext:c('FBJSON').parse(this.props.actionContext)},{suggestion_tracking_info:this.props.trackingData});this.setState({viewerWatchStatus:q.event.viewer_watch_status})};n.prototype.$EventDescription6=function(event){var o=l(event);if(o===c('Keys').RETURN&&this.$EventDescription1)this.$EventDescription1.toggleMore();};n.prototype.$EventDescription5=function(){var o=this.props.eventInfo.description;if(!o)return null;var p=c('React').createElement('div',{className:"_7tw",onKeyDown:this.$EventDescription6.bind(this),role:'button'});return c('React').createElement(c('LogicalGridCell.react'),{columnIndex:3,component:p,focusStrategy:c('LogicalGridCellFocusStrategy')},c('React').createElement(c('ExpandableText.react'),{cutoff:m,text:o,grow:1000,penalizeNewLine:true,ref:function(q){return this.$EventDescription1=q}.bind(this),seeMoreText:i._("See More"),seeLessText:i._("See Less")}))};f.exports=n}),null);
__d('EventDiscoverDefaultMoreButton.react',['cx','fbt','ix','Image.react','React','ShimButton.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=i._("More"),n=i._("Less");k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(p,q){l.constructor.call(this,p,q);this.state={showAll:false}}o.prototype.render=function(){var p=this.state.showAll?n:m;return c('React').createElement('li',null,c('React').createElement(c('ShimButton.react'),{form:'link',onClick:this.$EventDiscoverDefaultMoreButton1.bind(this)},c('React').createElement('div',{className:"_47ni"},c('React').createElement(c('Image.react'),{src:j("27133")}),c('React').createElement('span',null,p))))};o.prototype.$EventDiscoverDefaultMoreButton1=function(){this.setState({showAll:!this.state.showAll});this.props.toggleShowAll()};f.exports=o}),null);
__d('EventDiscoverFilter.react',['cx','fbt','EventDiscoverDefaultMoreButton.react','List.react','PlacesSearchFilterOption.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=8;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n,o){k.constructor.call(this,n,o);this.state={showAll:false}}m.prototype.render=function(){var n=this.$EventDiscoverFilter1().slice(0,this.state.showAll||this.props.selectedOptions.length>l?this.props.filterSettings.options.length:l).map(function(p,q){var r=this.props.selectedOptions.indexOf(p.value)!==-1,s=this.$EventDiscoverFilter2(p.value);return c('React').createElement('li',{className:!s?"_465-":'',key:q},c('React').createElement(c('PlacesSearchFilterOption.react'),{className:"_465_",optionName:p.name,optionValue:p.value,optionHref:null,isSelected:r,isDisabled:s,onOptionToggle:function(t,u){return this.props.onOptionClick(t,p)}.bind(this),showTooptip:false,isRadioButton:this.props.isRadioButton,sessionID:this.props.sessionID}))}.bind(this));if(this.props.isRadioButton&&!this.props.hideAllOption)n.unshift(c('React').createElement('li',{className:"_465-",key:'allOption'},c('React').createElement(c('PlacesSearchFilterOption.react'),{className:"_465_",optionName:i._("All"),optionValue:null,optionHref:null,isSelected:this.props.selectedOptions.length===0,isDisabled:false,onOptionToggle:function(p,q){return this.props.onAllClick()}.bind(this),showTooptip:false,isRadioButton:true})));var o=!this.props.moreOptionButton&&this.props.filterSettings.options.length>l&&this.props.selectedOptions.length<=l?this.$EventDiscoverFilter3():this.props.moreOptionButton;return c('React').createElement('div',null,c('React').createElement('div',{className:"_4660"},this.props.filterSettings.title),c('React').createElement(c('List.react'),{border:'none',spacing:'none',className:"_4661"},n,o))};m.prototype.$EventDiscoverFilter3=function(){return c('React').createElement(c('EventDiscoverDefaultMoreButton.react'),{toggleShowAll:this.toggleShowAll.bind(this)})};m.prototype.toggleShowAll=function(){this.setState({showAll:!this.state.showAll})};m.prototype.$EventDiscoverFilter4=function(){var n=this.props.filterSettings.options;return n.filter(function(o){return o.hidden!==true})};m.prototype.$EventDiscoverFilter1=function(){if(!this.props.filterSettings.showSelectedOnTop)return this.$EventDiscoverFilter4();var n=[],o=0;this.$EventDiscoverFilter4().forEach(function(p){if(this.props.selectedOptions.indexOf(p.value)===-1){n.push(p)}else{n.splice(o,0,p);o++}}.bind(this));return n};m.prototype.$EventDiscoverFilter2=function(n){return !this.props.isRadioButton&&this.props.filterSettings.maxSelected>0&&this.props.selectedOptions.length>=this.props.filterSettings.maxSelected&&this.props.selectedOptions.indexOf(n)===-1};f.exports=m}),null);
__d('EventDiscoverFilterMixin',['EventDiscoverFilterType'],(function a(b,c,d,e,f,g){var h={getInitState:function i(){var j=this.props.appliedFilterValues&&this.props.appliedFilterValues[this.props.filterID]?this.props.appliedFilterValues[this.props.filterID]:[];if(j&&!(j instanceof Array))j=[j];return {filterOptions:this.props.filterSettings.options,selectedOptions:j,initNumOptions:this.props.filterSettings.options.length}},componentWillReceiveProps:function i(j){if(this.props.filterSettings!==j.filterSettings){var k=j.appliedFilterValues&&j.appliedFilterValues[j.filterID]?j.appliedFilterValues[j.filterID]:[];if(k&&!(k instanceof Array))k=[k];this.setState({filterOptions:j.filterSettings.options,selectedOptions:k})}},onNewOptionSelected:function i(j,k){var l=this.state.filterOptions,m=false;for(var n=0;n<l.length;n++)if(l[n].value===j.value){m=true;break}if(!m){if(l.length>this.state.initNumOptions)if(this.props.showSelectedOnTop){l.shift()}else l.pop();if(this.props.showSelectedOnTop){l.unshift(j)}else l.push(j);this.setState({filterOptions:l})}var o=k?k:null;this.onOptionClick(true,j.value,o)},onOptionClick:function i(j,k,l){var m=this.state.selectedOptions;if(this.props.isRadioButton){m=[k]}else if(j){m.push(k)}else{var n=m.indexOf(k);if(n>-1)m.splice(n,1);}this.setState({selectedOptions:m});var o=this.props.appliedFilterValues;if(this.props.filterID==c('EventDiscoverFilterType').EVENT_CATEGORIES){o[this.props.filterID]=m}else o[this.props.filterID]=m[0];this.props.onOptionChange(o,l)},onAllClick:function i(){this.setState({selectedOptions:[]});var j=this.props.appliedFilterValues;j[this.props.filterID]=null;this.props.onOptionChange(j,null,'')}};f.exports=h}),null);
__d('EventDiscoverCategoriesFilter.react',['classWithMixins','EventDiscoverFilter.react','EventDiscoverFilterMixin','React','mixin'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('classWithMixins')(c('React').Component,c('mixin')(c('EventDiscoverFilterMixin'))));i=h&&h.prototype;function j(k,l){i.constructor.call(this,k,l);this.state=this.getInitState()}j.prototype.render=function(){return c('React').createElement(c('EventDiscoverFilter.react'),babelHelpers['extends']({onOptionClick:function(k,l){this.onOptionClick(k,l.value,null)}.bind(this),onAllClick:this.onAllClick.bind(this),moreOptionButton:null,selectedOptions:this.state.selectedOptions},this.props))};f.exports=j}),null);
__d('EventDiscoverErrorCard.react',['cx','React','XUIText.react','Image.react','ImageBlock.react','InlineBlock.react','XUICard.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement(c('XUICard.react'),{className:"_52ju _2pia _2pi3 _3-95"},c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},c('React').createElement(c('Image.react'),{width:100,height:100,className:"_43zr",src:'/images/browse/no-results-general.png'}),c('React').createElement(c('InlineBlock.react'),{alignv:'middle',height:100,className:"_52ju _58lj _2pi8"},c('React').createElement(c('XUIText.react'),{size:'medium',weight:'normal',display:'block'},this.props.title),c('React').createElement(c('XUIText.react'),{size:'small',weight:'normal',display:'block',className:"_43zq"},this.props.subtitle)))))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d('EventDiscoverEventEntityCard.react',['cx','fbt','BackgroundImage.react','EventDescription.react','LeftRight.react','Link.react','React','XEventsPermalinkController','XUICard.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m,n){k.constructor.call(this,m,n)}l.prototype.render=function(){return c('React').createElement(c('XUICard.react'),{className:"_5lqg"},c('React').createElement('div',null,c('React').createElement('div',null,this.$EventDiscoverEventEntityCard1()),c('React').createElement(c('EventDescription.react'),{eventInfo:this.props.eventInfo,actionContext:this.props.actionContext,trackingData:this.props.trackingData})))};l.prototype.$EventDiscoverEventEntityCard1=function(){var m=this.props.eventInfo.coverPhoto,n=c('XEventsPermalinkController').getURIBuilder().setInt('event_id',this.props.eventInfo.id).setString('acontext',this.props.actionContext).getURI(),o=c('React').createElement(c('Link.react'),{href:n,tabIndex:-1},c('React').createElement('div',{className:"_5lrw",style:{width:m.width}},c('React').createElement(c('BackgroundImage.react'),{height:m.height,src:m.uri,width:m.width,backgroundSize:'cover'}))),p=this.props.eventInfo.morePhoto,q=null;if(p&&p.uri){var r=c('React').createElement('div',{className:"_5ls0"},c('React').createElement('span',{className:"_5ls1"},i._("See more photos")));q=c('React').createElement(c('Link.react'),{className:"_5ls2",href:p.href?p.href:n,tabIndex:-1},c('React').createElement(c('BackgroundImage.react'),{height:p.height,src:p.uri,width:p.width,backgroundSize:'cover'}),r)}return c('React').createElement(c('LeftRight.react'),null,o,q)};f.exports=l}),null);
__d('EventDiscoverLocationTypeahead.react',['AddressTypeahead.react','AddressTypeaheadCaller','AddressTypeaheadDisplayOrder','AddressTypeaheadIntegration','AddressTypeaheadPageCategory','AddressTypeaheadProvider','AddressTypeaheadType','AddressTypeaheadSearchSourceConfig','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=10,k='event_discover';h=babelHelpers.inherits(l,c('React').PureComponent);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.state={showTypeahead:false,queryString:''},this.$EventDiscoverLocationTypeahead1=function(){this.setState({showTypeahead:true});this.refs.typeahead&&this.refs.typeahead.focusInput()}.bind(this),this.$EventDiscoverLocationTypeahead2=function(){this.setState({queryString:'',showTypeahead:false})}.bind(this),this.$EventDiscoverLocationTypeahead3=function(event){this.setState({queryString:event.target.value})}.bind(this),this.$EventDiscoverLocationTypeahead4=function(r){this.props.onSelectAttempt&&this.props.onSelectAttempt(r);this.$EventDiscoverLocationTypeahead2()}.bind(this),n}l.prototype.render=function(){return this.state.showTypeahead?c('React').createElement(c('AddressTypeahead.react'),{ref:'typeahead',placeholder:'Select a City',queryString:this.state.queryString,onSelectAttempt:this.$EventDiscoverLocationTypeahead4,onChange:this.$EventDiscoverLocationTypeahead3,config:new (c('AddressTypeaheadSearchSourceConfig'))(null,null,c('AddressTypeaheadProvider').HERE_THRIFT,c('AddressTypeaheadType').STREET_PLACE_TYPEAHEAD,c('AddressTypeaheadIntegration').STRING_MATCH,c('AddressTypeaheadDisplayOrder').INTERLEAVE,j,c('AddressTypeaheadCaller').EVENTS_CREATION,null,[c('AddressTypeaheadPageCategory').CITY,c('AddressTypeaheadPageCategory').NEIGHBORHOOD]),isFreeFormQueryAllowed:false,productTag:k}):c('React').createElement('div',{onClick:this.$EventDiscoverLocationTypeahead1,role:'presentation'},this.props.content)};f.exports=l}),null);
__d('EventDiscoverLocationFilter.react',['cx','fbt','EventDiscoverLocationTypeahead.react','Image.react','EventDiscoverFilter.react','React','EventDiscoverFilterMixin','classWithMixins','mixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l='default_';j=babelHelpers.inherits(m,c('classWithMixins')(c('React').Component,c('mixin')(c('EventDiscoverFilterMixin'))));k=j&&j.prototype;function m(n,o){k.constructor.call(this,n,o);this.state=this.getInitState()}m.prototype.render=function(){return c('React').createElement(c('EventDiscoverFilter.react'),babelHelpers['extends']({onOptionClick:function(n,o){var p=this.$EventDiscoverLocationFilter1(o.value)?o.name:i._("in {locatio name}",[i.param('locatio name',o.name)]);this.onOptionClick(n,o.value,p)}.bind(this),onAllClick:this.onAllClick.bind(this),moreOptionButton:this.$EventDiscoverLocationFilter2(),selectedOptions:this.state.selectedOptions},this.props))};m.prototype.$EventDiscoverLocationFilter2=function(){var n=c('React').createElement('div',{className:"_47ni"},c('React').createElement(c('Image.react'),{src:'/images/browse/results/ellipsis.png'}),c('React').createElement('span',null,i._("More")));return c('React').createElement('li',null,c('React').createElement(c('EventDiscoverLocationTypeahead.react'),{content:n,onSelectAttempt:this.$EventDiscoverLocationFilter3.bind(this)}))};m.prototype.$EventDiscoverLocationFilter3=function(n){if(!n)return;var o=n.getAuxiliaryData();if(!o||o.resultType!=='place')return;var p={name:n.getTitle(),value:o.locationID,hidden:false,href:null},q=i._("in {locatio name}",[i.param('locatio name',n.getTitle())]);this.onNewOptionSelected(p,q)};m.prototype.$EventDiscoverLocationFilter1=function(n){return n.startsWith(l)};f.exports=m}),null);
__d('EventDiscoverTicketedFilter.react',['classWithMixins','EventDiscoverFilter.react','EventDiscoverFilterMixin','React','mixin'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('classWithMixins')(c('React').Component,c('mixin')(c('EventDiscoverFilterMixin'))));i=h&&h.prototype;function j(k,l){i.constructor.call(this,k,l);this.state=this.getInitState()}j.prototype.render=function(){return c('React').createElement(c('EventDiscoverFilter.react'),babelHelpers['extends']({onOptionClick:function(k,l){this.onOptionClick(k,l.value,null)}.bind(this),onAllClick:this.onAllClick.bind(this),moreOptionButton:null,selectedOptions:this.state.selectedOptions},this.props))};f.exports=j}),null);
__d('EventDiscoverTimeFilter.react',['cx','fbt','AdsAccountStore','EventDiscoverFilter.react','EventDiscoverFilterMixin','EventDiscoverTimeRangeSelector.react','Image.react','LocalDate','React','Timezone','classWithMixins','mixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Timezone').PST8PDT,m=c('AdsAccountStore').getTimezoneID()||l;j=babelHelpers.inherits(n,c('classWithMixins')(c('React').Component,c('mixin')(c('EventDiscoverFilterMixin'))));k=j&&j.prototype;function n(o,p){k.constructor.call(this,o,p);this.state=this.getInitState()}n.prototype.render=function(){return c('React').createElement(c('EventDiscoverFilter.react'),babelHelpers['extends']({onOptionClick:function(o,p){return this.onOptionClick(o,p.value,null)}.bind(this),onAllClick:this.onAllClick.bind(this),moreOptionButton:this.$EventDiscoverTimeFilter1(),selectedOptions:this.state.selectedOptions},this.props))};n.prototype.$EventDiscoverTimeFilter1=function(){var o=c('React').createElement('div',{className:"_47ni"},c('React').createElement(c('Image.react'),{src:'/images/browse/results/ellipsis.png'}),c('React').createElement('span',null,i._("Choose a date")));return c('React').createElement('li',null,c('React').createElement(c('EventDiscoverTimeRangeSelector.react'),{content:o,timezoneID:m,dateRestraints:[function(p){return p.isAfterOrEqual(c('LocalDate').today(m))}],options:[],onChange:this.$EventDiscoverTimeFilter2.bind(this)}))};n.prototype.$EventDiscoverTimeFilter2=function(o){if(!o||!o.start||!o.end)return;var p=o.end.subtractDays(1),q=o.start.toISOString(),r=JSON.stringify({start:q,end:o.end.toISOString()}),s=o.start.format('F d'),t=o.start.getYear()===p.getYear()&&o.start.getMonth()===p.getMonth()?p.format('d'):p.format('F d'),u=o.start.equals(p)?s:s+' - '+t,v={name:u,value:r,hidden:false,href:null};this.onNewOptionSelected(v,null)};f.exports=n}),null);
__d('EventDiscoverFilters.react',['cx','EventDiscoverCategoriesFilter.react','EventDiscoverFilterType','EventDiscoverLocationFilter.react','EventDiscoverTicketedFilter.react','EventDiscoverTimeFilter.react','List.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l,m){j.constructor.call(this,l,m)}k.prototype.render=function(){return c('React').createElement('div',{className:"_2z-i"},c('React').createElement(c('List.react'),{border:'none',spacing:'large'},this.$EventDiscoverFilters1().map(function(l,m){return c('React').createElement('li',{key:m},l)})))};k.prototype.$EventDiscoverFilters1=function(){var l=this.props.filters&&Object.keys(this.props.filters).map(function(m){var n=this.props.filters[m];switch(m){case c('EventDiscoverFilterType').TIME:return c('React').createElement(c('EventDiscoverTimeFilter.react'),{filterID:m,filterSettings:n,appliedFilterValues:this.props.appliedFilters,onOptionChange:this.props.onFilterOptionsChange.bind(this),isRadioButton:n.isRadioButton,sessionID:this.props.sessionID,hideAllOption:!!n.hideAllOption});case c('EventDiscoverFilterType').CITY:return c('React').createElement(c('EventDiscoverLocationFilter.react'),{filterID:m,filterSettings:n,appliedFilterValues:this.props.appliedFilters,onOptionChange:this.props.onFilterOptionsChange.bind(this),isRadioButton:n.isRadioButton,sessionID:this.props.sessionID,hideAllOption:!!n.hideAllOption});case c('EventDiscoverFilterType').EVENT_CATEGORIES:return c('React').createElement(c('EventDiscoverCategoriesFilter.react'),{filterID:m,filterSettings:n,appliedFilterValues:this.props.appliedFilters,onOptionChange:this.props.onFilterOptionsChange.bind(this),isRadioButton:n.isRadioButton,sessionID:this.props.sessionID,hideAllOption:!!n.hideAllOption});case c('EventDiscoverFilterType').TICKETED_EVENTS:return c('React').createElement(c('EventDiscoverTicketedFilter.react'),{filterID:m,filterSettings:n,appliedFilterValues:this.props.appliedFilters,onOptionChange:this.props.onFilterOptionsChange.bind(this),isRadioButton:n.isRadioButton,sessionID:this.props.sessionID,hideAllOption:!!n.hideAllOption});default:return null;}}.bind(this),this);return l};f.exports=k}),null);
__d('EventRow.react',['cx','EventActionContextHelper','BackgroundImage.react','LeftRight.react','Link.react','PublicEventWatchStatusSelector.react','React','XEventsPermalinkController','EventWatchStatus'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=60;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){j.constructor.call(this,m,n);this.state={viewerWatchStatus:m.eventInfo.viewer_watch_status?m.eventInfo.viewer_watch_status:c('EventWatchStatus').UNWATCHED}}l.prototype.render=function(){var event={id:this.props.eventInfo.id,viewer_watch_status:this.state.viewerWatchStatus},m=this.props.eventInfo.coverPhoto,n=c('React').createElement(c('Link.react'),{href:this.$EventRow1()},c('React').createElement('div',{className:"_11v1"},c('React').createElement(c('BackgroundImage.react'),{height:k,src:m.uri,width:k,backgroundSize:'cover'}))),o=c('EventActionContextHelper').getActionHistoryJSON(this.props.actionContext);return c('React').createElement('div',{className:"_11v2"},c('React').createElement(c('LeftRight.react'),null,n,c('React').createElement(c('LeftRight.react'),{className:"_11v3"},this.$EventRow2(),c('React').createElement('div',{className:"_11v4"},c('React').createElement(c('PublicEventWatchStatusSelector.react'),{event:event,actionHistory:o,actionCallback:this.$EventRow3.bind(this),hideLabel:true})))))};l.prototype.$EventRow2=function(){return c('React').createElement('span',null,c('React').createElement(c('Link.react'),{href:this.$EventRow1()},c('React').createElement('div',{className:"_11v5"},this.props.eventInfo.title)),c('React').createElement('div',{className:"_11v6"},this.props.eventInfo.dateAndTime,c('React').createElement('span',null,' ','\u00B7',' '),this.props.eventInfo.location),c('React').createElement('div',{className:"_11v7"},this.props.eventInfo.socialContext))};l.prototype.$EventRow1=function(){return c('XEventsPermalinkController').getURIBuilder().setInt('event_id',this.props.eventInfo.id).setString('acontext',this.props.actionContext).getURI()};l.prototype.$EventRow3=function(m,n){if(m||!n)return;var o=n.event_update_extended_viewer_watch_status;if(!o||!o.event||!o.event.viewer_watch_status)return;this.setState({viewerWatchStatus:o.event.viewer_watch_status})};f.exports=l}),null);
__d('EventDiscoverSuggestedEventsListCard.react',['fbt','cx','EventRow.react','React','ShimButton.react','XUICard.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.state={results:m.results}}l.prototype.componentWillReceiveProps=function(m){this.setState({results:m.results})};l.prototype.render=function(){if(!this.props.results.events||this.props.results.events.length===0)return null;var m=this.props.results.events.map(function(o){return c('React').createElement('div',{className:"_bq1",key:o.id},c('React').createElement(c('EventRow.react'),{eventInfo:o,actionContext:this.props.actionContext}))}.bind(this)),n=this.props.results.hasNextPage?c('React').createElement(c('ShimButton.react'),{className:"_bq3",onClick:function(){var o=JSON.parse(this.props.results.suggestionToken);this.props.onUpdate(o)}.bind(this)},h._("See more")):null;return c('React').createElement(c('XUICard.react'),null,c('React').createElement('div',{className:"_bq2"},this.props.results.title),c('React').createElement('div',null,m),n)};f.exports=l}),null);
__d("XAsyncEventDiscoverQueryResultsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/events\/discover\/query\/",{cursor:{type:"String"},suggestion_token:{type:"String"},timezone_id:{type:"Int"}})}),null);
__d('EventDiscoverSuggestedEventsList.react',['cx','fbt','AdsAccountStore','AsyncRequest','EventDiscoverErrorCard.react','EventDiscoverEventEntityCard.react','EventDiscoverSuggestedEventsListCard.react','FBMorePager.react','List.react','LogicalGrid.react','LogicalGridRow.react','React','Timezone','XAsyncEventDiscoverQueryResultsController','XUICard.react','XUICardSection.react','XUISpinner.react','XUIText.react','getViewportDimensions'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Timezone').PST8PDT,m=c('AdsAccountStore').getTimezoneID()||l,n=Math.ceil(c('getViewportDimensions')().height/2),o=2;j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(q){k.constructor.call(this,q);this.state={paginationCursor:null,isLoading:false,hasNextPage:true,results:[],trackingData:q.trackingData,isGroupedList:false};this.$EventDiscoverSuggestedEventsList2=0}p.prototype.componentWillReceiveProps=function(q){this.$EventDiscoverSuggestedEventsList1&&this.$EventDiscoverSuggestedEventsList1.abandon();this.setState({paginationCursor:null,isLoading:false,hasNextPage:true,results:[],trackingData:q.trackingData,isGroupedList:false})};p.prototype.render=function(){var q=this.props.title?this.props.title:i._("Events"),r=c('React').createElement('div',{className:"_1tz-"},c('React').createElement(c('XUICard.react'),null,c('React').createElement(c('XUICardSection.react'),{className:"_1t-0"},c('React').createElement(c('XUIText.react'),{size:'large',display:'block'},c('React').createElement('strong',null,q,' ',this.props.subtitle))))),s=false;if(this.state.isGroupedList){s=!this.state.hasNextPage&&this.state.results&&this.state.results.length===0}else s=!this.state.hasNextPage&&this.state.results&&this.state.results.length&&this.state.results[0].events&&this.state.results[0].events.length===0;if(this.props.overrideResultsWithLoader){this.$EventDiscoverSuggestedEventsList2=0;return c('React').createElement('div',null,r,c('React').createElement('div',{className:"_2to_"},c('React').createElement(c('XUISpinner.react'),{size:'large'})))}else if(s)return c('React').createElement('div',null,r,c('React').createElement(c('EventDiscoverErrorCard.react'),{title:i._("We couldn't find any results matching your search criteria"),subtitle:i._("Discover other events by using the filters")}));var t=null;if(!this.state.isLoading){t=c('React').createElement('li',null,this.$EventDiscoverSuggestedEventsList3())}else if(this.state.isLoading&&this.state.hasNextPage){t=c('React').createElement('div',{className:"_33_n"},c('React').createElement(c('XUISpinner.react'),{size:'large'}))}else if(!this.state.hasNextPage)t=c('React').createElement('div',{className:"_4s4i"},c('React').createElement('hr',{className:"_kt"}),c('React').createElement('div',{className:"_24j"},c('React').createElement('div',{className:"_64f _1zun"},i._("End of Results"))));var u=this.state.isGroupedList?c('React').createElement(c('List.react'),{border:'none',className:"_rhf"},this.$EventDiscoverSuggestedEventsList4()):c('React').createElement(c('List.react'),{border:'none'},this.$EventDiscoverSuggestedEventsList5(),t);return c('React').createElement('div',null,r,c('React').createElement(c('LogicalGrid.react'),null,u))};p.prototype.$EventDiscoverSuggestedEventsList3=function(){if(this.state.hasNextPage){return c('React').createElement(c('FBMorePager.react'),{buffer:n,onMore:function(){return this.$EventDiscoverSuggestedEventsList6()}.bind(this)},c('React').createElement('div',null))}else return c('React').createElement('div',null);};p.prototype.$EventDiscoverSuggestedEventsList6=function(){if(!this.state.isLoading&&this.state.hasNextPage)this.setState({isLoading:true},function(){var q=c('XAsyncEventDiscoverQueryResultsController').getURIBuilder().getURI();this.$EventDiscoverSuggestedEventsList1=new (c('AsyncRequest'))(q).setData({suggestion_token:this.props.filtersToken,cursor:this.state.paginationCursor,timezone_id:m}).setHandler(function(r){var s=r.getPayload();this.$EventDiscoverSuggestedEventsList1=null;var t=false,u=null;if(s.results&&s.results.length===0){this.$EventDiscoverSuggestedEventsList2++;if(this.$EventDiscoverSuggestedEventsList2>=o)t=false;}else this.$EventDiscoverSuggestedEventsList2=0;var v=this.state.results;if(s.isGroupedList){var w;if(!v)v=[];(w=v).push.apply(w,s.results)}else{if(!v||!v.length||!v[0].events)v=[{title:'',events:[],suggestionToken:'',hasNextPage:false,paginationCursor:null}];if(s.results&&s.results.length>0){var x,y=s.results[0];t=y.hasNextPage;u=y.paginationCursor;(x=v[0].events).push.apply(x,y.events)}}this.setState({paginationCursor:u,isLoading:false,results:v,hasNextPage:t,trackingData:s.trackingData,isGroupedList:s.isGroupedList})}.bind(this));this.$EventDiscoverSuggestedEventsList1.send()}.bind(this));};p.prototype.$EventDiscoverSuggestedEventsList5=function(){if(!this.state.results||this.state.results.length<=0||!this.state.results[0].events)return null;return this.state.results[0].events.map(function(q,r){var s=c('React').createElement('li',{id:q.id+'anchor'+r});return c('React').createElement(c('LogicalGridRow.react'),{component:s,key:r,rowIndex:r},c('React').createElement(c('EventDiscoverEventEntityCard.react'),{eventInfo:q,actionContext:this.props.actionContext,trackingData:this.state.trackingData}))}.bind(this))};p.prototype.$EventDiscoverSuggestedEventsList4=function(){return this.state.results&&this.state.results.map(function(q,r){return c('React').createElement(c('LogicalGridRow.react'),{className:"_3-94",component:c('React').createElement('li',null),key:r,rowIndex:r},c('React').createElement(c('EventDiscoverSuggestedEventsListCard.react'),{results:q,actionContext:this.props.actionContext,onUpdate:this.props.onUpdate}))}.bind(this),this)};p.defaultProps={overrideResultsWithLoader:false};f.exports=p}),null);
__d('EventDiscoverSuggestedEventsResults.react',['fbt','EventDiscoverErrorCard.react','EventDiscoverFilters.react','EventDiscoverSuggestedEventsList.react','EventsDashboardFilter','PageTransitions','React','SearchResultLayout.react','XEventsClassicDashboardController','EventDiscoverFilterType'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l,m){j.constructor.call(this,l,m);this.state={title:l.title,subtitle:l.subtitle,appliedFilters:l.appliedFilters?l.appliedFilters:{},overrideResultsWithLoader:false,showError:false,sessionID:l.sessionID,trackingData:l.trackingData};window.onpopstate=function(){this.$EventDiscoverSuggestedEventsResults1()}.bind(this)}k.prototype.$EventDiscoverSuggestedEventsResults1=function(){if(window.location)c('PageTransitions').go(window.location,true);};k.prototype.render=function(){var l=null;if(this.state.showError){l=c('React').createElement(c('EventDiscoverErrorCard.react'),{title:h._("There was an error and we couldn't find any results"),subtitle:h._("Discover other events by using the filters")})}else l=c('React').createElement(c('EventDiscoverSuggestedEventsList.react'),{title:this.state.title,subtitle:this.state.subtitle,filtersToken:JSON.stringify(this.state.appliedFilters),overrideResultsWithLoader:this.state.overrideResultsWithLoader,actionContext:this.props.actionContext,trackingData:this.state.trackingData,onUpdate:this.$EventDiscoverSuggestedEventsResults2.bind(this)});return c('React').createElement(c('SearchResultLayout.react'),{loggedIn:true},c('React').createElement(c('EventDiscoverFilters.react'),{filters:this.props.filters,appliedFilters:this.state.appliedFilters,onFilterOptionsChange:this.$EventDiscoverSuggestedEventsResults2.bind(this),sessionID:this.state.sessionID}),c('React').createElement('div',null,l),c('React').createElement('div',null))};k.prototype.$EventDiscoverSuggestedEventsResults2=function(l,m){var n=l[c('EventDiscoverFilterType').EVENT_CATEGORIES],o=c('React').createElement('span',null,h._("Events"));if(n!=null&&n instanceof Array&&n.length==1&&n[0]!=null){var p=this.props.filters[c('EventDiscoverFilterType').EVENT_CATEGORIES].options,q=n[0];o=p.filter(function(r){return r.value==q})[0].name}this.setState({title:o,subtitle:m?m:this.state.subtitle,appliedFilters:l,overrideResultsWithLoader:true,showError:false},function(){var r=!l?'':JSON.stringify(l),s=c('XEventsClassicDashboardController').getURIBuilder().setEnum('view',c('EventsDashboardFilter').discovery).setString('suggestion_token',r).setString('acontext',this.props.actionContext).getURI();if(window.history.pushState)window.history.pushState({},'',s.toString());this.setState({overrideResultsWithLoader:false})}.bind(this))};f.exports=k}),null);