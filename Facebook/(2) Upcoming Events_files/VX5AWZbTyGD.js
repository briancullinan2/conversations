if (self.CavalryLogger) { CavalryLogger.start_js(["b8zLw"]); }

__d("FeedbackAddStreamingReactionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1568746946533577",queryID:"158119731410742"})}),null);
__d('FeedbackAddStreamingReactionSubscription',['BaseGraphQLSubscription','FeedbackAddStreamingReactionWebGraphQLSubscription','GraphQLSubscriptionsConfig','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/feedback_add_streaming_reaction_subscribe/feedback_id_'+j},_getQueryID:function i(){return c('GraphQLSubscriptionsConfig').shouldUseGraphQL2DocumentIDs?c('FeedbackAddStreamingReactionWebGraphQLSubscription').getDocID():c('FeedbackAddStreamingReactionWebGraphQLSubscription').getLegacyQueryID()},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:j})}},_getSubscriptionCallName:function i(){return 'feedback_add_streaming_reaction_subscribe'}});f.exports=h}),null);
__d("LiveMapEntryPointsEnum",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({APPS:"bookmarks",FAVORITES:"favorites",ENDSCREEN:"endscreen",TRENDING:"trending",BLUEBAR:"bluebar",NUX:"nux",FACEBAR_TYPEAHEAD:"br_tf",SHAREABLE:"shareable",VIDEO_HOME:"video_home"})}),null);
__d("LiveMapEntryPointsEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({IMPRESSION:"impression",CLICKED:"clicked",EMPTY_UNIT:"empty_unit",VIEWER_COUNT:"viewer_count"})}),null);
__d('LiveMapEntryPointsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:LiveMapEntryPointsLoggerConfig',this.$LiveMapEntryPointsTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:LiveMapEntryPointsLoggerConfig',this.$LiveMapEntryPointsTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$LiveMapEntryPointsTypedLogger1={};return this};h.prototype.updateData=function(j){this.$LiveMapEntryPointsTypedLogger1=babelHelpers['extends']({},this.$LiveMapEntryPointsTypedLogger1,j);return this};h.prototype.setEntryPoint=function(j){this.$LiveMapEntryPointsTypedLogger1.entry_point=j;return this};h.prototype.setEvent=function(j){this.$LiveMapEntryPointsTypedLogger1.event=j;return this};h.prototype.setVC=function(j){this.$LiveMapEntryPointsTypedLogger1.vc=j;return this};h.prototype.setViewerCount=function(j){this.$LiveMapEntryPointsTypedLogger1.viewer_count=j;return this};var i={entry_point:true,event:true,vc:true,viewer_count:true};f.exports=h}),null);
__d('LiveMapEntryPointsLoggerController',['LiveMapEntryPointsTypedLogger','LiveMapEntryPointsEvent','LiveMapEntryPointsEnum'],(function a(b,c,d,e,f,g){'use strict';var h={logEndscreenImpression:function i(){new (c('LiveMapEntryPointsTypedLogger'))().setEvent(c('LiveMapEntryPointsEvent').IMPRESSION).setEntryPoint(c('LiveMapEntryPointsEnum').ENDSCREEN).log()}};f.exports=h}),null);
__d('ShowCreationFlowTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:ShowCreationFlowLoggerConfig',this.$ShowCreationFlowTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:ShowCreationFlowLoggerConfig',this.$ShowCreationFlowTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$ShowCreationFlowTypedLogger1={};return this};h.prototype.updateData=function(j){this.$ShowCreationFlowTypedLogger1=babelHelpers['extends']({},this.$ShowCreationFlowTypedLogger1,j);return this};h.prototype.setError=function(j){this.$ShowCreationFlowTypedLogger1.error=j;return this};h.prototype.setPageID=function(j){this.$ShowCreationFlowTypedLogger1.page_id=j;return this};h.prototype.setStep=function(j){this.$ShowCreationFlowTypedLogger1.step=j;return this};h.prototype.setVC=function(j){this.$ShowCreationFlowTypedLogger1.vc=j;return this};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$ShowCreationFlowTypedLogger1=babelHelpers['extends']({},this.$ShowCreationFlowTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={error:true,page_id:true,step:true,vc:true};f.exports=h}),null);
__d('KeyframeAnimation',['invariant','CSS','Map','ReactTransitionEvents','UserAgent','nullthrows','queryThenMutateDOM','uniqueID'],(function a(b,c,d,e,f,g,h){var i='KeyframeAnimation-',j='animation-';function k(l){'use strict';this.$KeyframeAnimation3=l;this.$KeyframeAnimation8=true;this.$KeyframeAnimation5=new (c('Map'))();this.$KeyframeAnimation5.set('animation-name',i+c('uniqueID')());this.$KeyframeAnimation4=new (c('Map'))();if(!k.$KeyframeAnimation1){var m=document.createElement('style');document.head.appendChild(m);var n=c('nullthrows')(m.sheet);n instanceof CSSStyleSheet||h(0);k.$KeyframeAnimation1=n;k.$KeyframeAnimation2=new (c('Map'))()}this.$KeyframeAnimation9=c('UserAgent').isEngine('WebKit')?'-webkit-':''}k.prototype.defineKeyframes=function(l){'use strict';for(var m=Object.entries(l),n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p,r=q[0],s=q[1];r=parseFloat(r,10);r>=0&&r<=100||h(0);var t='';for(var u=Object.entries(s).sort(),v=Array.isArray(u),w=0,u=v?u:u[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var x;if(v){if(w>=u.length)break;x=u[w++]}else{w=u.next();if(w.done)break;x=w.value}var y=x,z=y[0],aa=y[1];t+=z+': '+aa+';'}this.$KeyframeAnimation4.set(r,t)}return this};k.prototype.defineKeyframe=function(l,m){'use strict';l=parseFloat(l,10);l>=0&&l<=100||h(0);var n='';for(var o=Object.entries(m).sort(),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}var s=r,t=s[0],u=s[1];if(t.substring(0,j.length)===j||t==='transform')t=this.$KeyframeAnimation9+t;n+=t+': '+u+';'}this.$KeyframeAnimation4.set(l,n);return this};k.prototype.setDirection=function(l){'use strict';this.$KeyframeAnimation5.set('animation-direction',l);return this};k.prototype.setDuration=function(l){'use strict';this.$KeyframeAnimation5.set('animation-duration',l+'s');return this};k.prototype.setTimingFunction=function(l){'use strict';this.$KeyframeAnimation5.set('animation-timing-function',l);return this};k.prototype.setIterationCount=function(l){'use strict';this.$KeyframeAnimation5.set('animation-iteration-count',l+'');return this};k.prototype.setFillMode=function(l){'use strict';this.$KeyframeAnimation5.set('animation-fill-mode',l);return this};k.prototype.setAnimationDelay=function(l){'use strict';this.$KeyframeAnimation5.set('animation-delay',l+'s');return this};k.prototype.setFinishedCallback=function(l){'use strict';this.$KeyframeAnimation6=l;return this};k.prototype.setMemoize=function(l){'use strict';this.$KeyframeAnimation8=l;return this};k.prototype.start=function(){'use strict';this.$KeyframeAnimation5.has('animation-duration')||h(0);if(this.$KeyframeAnimation7){this.restartAnimation();return}var l=this.$KeyframeAnimation3,m=this.$KeyframeAnimation10(),n=this.$KeyframeAnimation11(m),o=void 0;if(this.$KeyframeAnimation8&&k.$KeyframeAnimation2.has(n)){var p=c('nullthrows')(k.$KeyframeAnimation2.get(n));this.$KeyframeAnimation5.set('animation-name',p);o=p}else{k.$KeyframeAnimation1.insertRule(m,k.$KeyframeAnimation1.cssRules.length);o=c('nullthrows')(this.$KeyframeAnimation5.get('animation-name'));if(this.$KeyframeAnimation8)k.$KeyframeAnimation2.set(n,o);}var q=this.$KeyframeAnimation12(o);if(!this.$KeyframeAnimation8||!k.$KeyframeAnimation2.has(q)){k.$KeyframeAnimation1.insertRule(q,k.$KeyframeAnimation1.cssRules.length);if(this.$KeyframeAnimation8)k.$KeyframeAnimation2.set(q,o);}c('queryThenMutateDOM')(function(){},function(){this.$KeyframeAnimation13();c('CSS').addClass(l,o)}.bind(this))};k.prototype.restartAnimation=function(){'use strict';var l=this.$KeyframeAnimation3;c('CSS').removeClass(l,c('nullthrows')(this.$KeyframeAnimation5.get('animation-name')));l.offsetWidth;this.$KeyframeAnimation7=false;c('CSS').addClass(l,c('nullthrows')(this.$KeyframeAnimation5.get('animation-name')))};k.prototype.$KeyframeAnimation13=function(){'use strict';c('ReactTransitionEvents').addEndEventListener(this.$KeyframeAnimation3,this.$KeyframeAnimation14.bind(this))};k.prototype.$KeyframeAnimation12=function(l){'use strict';var m='';m+='.'+l+' {';for(var n=this.$KeyframeAnimation5,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q,s=r[0],t=r[1];m+=s+': '+t+';'}m+='}';return m};k.prototype.$KeyframeAnimation10=function(){'use strict';var l=this.$KeyframeAnimation5.get('animation-name'),m=void 0;if(c('UserAgent').isEngine('WebKit')){m='@-webkit-keyframes'}else m='@keyframes';var n=m+' '+l+' {';for(var o=this.$KeyframeAnimation4,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}var s=r,t=s[0],u=s[1];n+=t+'% {'+u+'}'}return n+'}'};k.prototype.$KeyframeAnimation14=function(){'use strict';if(!this.$KeyframeAnimation7){if(this.$KeyframeAnimation6)this.$KeyframeAnimation6(this.$KeyframeAnimation3);this.$KeyframeAnimation7=true}};k.prototype.$KeyframeAnimation11=function(l){'use strict';return l.substring(l.indexOf('{')+1).toLowerCase().replace(/\s+/g,'')};f.exports=k}),null);
__d('CSSAnimationBuilder',['KeyframeAnimation'],(function a(b,c,d,e,f,g){var h={keyframeAnimation:function i(j){return new (c('KeyframeAnimation'))(j)}};f.exports=h}),null);
__d('PageCreateFundraiserAction.react',['ix','Image.react','PageActionOpenURLAsyncDialog.react','React','fbglyph'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){return c('React').createElement(c('PageActionOpenURLAsyncDialog.react'),babelHelpers['extends']({},k,{image:c('React').createElement(c('Image.react'),{src:h("128224")})}))};f.exports=i}),null);
__d('PageReportAction.react',['ix','Image.react','PageActionOpenURLAsyncDialog.react','React','fbglyph'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){return c('React').createElement(c('PageActionOpenURLAsyncDialog.react'),babelHelpers['extends']({},k,{image:c('React').createElement(c('Image.react'),{src:h("128308")})}))};f.exports=i}),null);
__d('PageSuggestEditsAction.react',['ix','Image.react','PageActionOpenURLAsyncDialog.react','React','fbglyph'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){return c('React').createElement(c('PageActionOpenURLAsyncDialog.react'),babelHelpers['extends']({},k,{image:c('React').createElement(c('Image.react'),{src:h("128156")})}))};f.exports=i}),null);
__d('PageSwitchRegionAction.react',['ix','Image.react','PageActionOpenURLAsyncDialog.react','React','fbglyph'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){return c('React').createElement(c('PageActionOpenURLAsyncDialog.react'),babelHelpers['extends']({},k,{image:c('React').createElement(c('Image.react'),{src:h("128018")})}))};f.exports=i}),null);
__d('PublicLiveMapConstants',['cx','VideoPlayerLoggerSource'],(function a(b,c,d,e,f,g,h){'use strict';var i={DEFAULT_MAP_ZOOM:4,POPUP_POSITION_OFFSET:[0,0],POPUP_OPEN_TIMEOUT_MS:100,HOVER_INTENT_TIMEOUT_MS:100,DEBOUNCE_TIMER_MS:400,MINIMUM_VIDEO_SIZE_PX:400,COMMENT_INPUT_HEIGHT:48,TOP_N_TO_SHOW_IN_SIDEBAR:20,NUMBER_OF_CACHE_LEVELS:3,NUMBER_OF_VIEWERS_TO_SHOW:200,MARKER_STATUS:{SPECIAL_EVENT:'special_event'},FB_HEADER_HEIGHT:42,BROADCAST_MARKER_OPTIONS:{stroke:false,fill:'true',radius:4,pointerEvents:'all'},NON_INTERACTIVE_MARKER_OPTIONS:{stroke:false,fill:'true',fillOpacity:1,radius:2,pointerEvents:'none'},VIEWER_MARKER_OPTIONS:{stroke:false,fill:'true',fillOpacity:1,radius:3,pointerEvents:'none'},VIEWER_LINE_OPTIONS:{color:'#1c4f8c',weight:.9,opacity:.5,smoothFactor:0,pointerEvents:'none'},DEFAULT_VIDEOPORT_SIZE:{width:900,height:600},VIDEO_PLAYER_DIALOG:{VERT_PADDING:320,HORIZ_PADDING:320,COMMENT_WIDTH:350},TOOLTIP:{OFFSCREEN:-500,DEFAULT:{LEFT:-109,TOP:-110},BOUNDS:{LEFT_LIMIT:180,RIGHT_LIMIT:250,TOP_LIMIT:290},VIDEO_DIMENSIONS:{MAX_WIDTH:368,TOOLTIP_SIZE:218},DESCRIPTION_LINE_LENGTH:30,DESCRIPTION_LINE_HEIGHT:20,LEFT_EDGE_ADJUST:5,RIGHT_EDGE_ADJUST:-10,TOP_EDGE_ADJUST:28,SIDEBAR:{TOP:310,LEFT:265,RIGHT:'auto'}},MAP_CENTER_OPTIONS:{AMERICAS_CENTER:[17,-40],AFRO_EURO_CENTER:[20,0],APAC_CENTER:[10,116]},MAP_BOUNDS:[[-85,-Infinity],[85,+Infinity]],STANDARD_MAP_BOUNDS:{x:-180,y:-90,width:360,height:180},STANDARD_MAP_SEARCH_BOX:{x1:-180,y1:-90,x2:180,y2:90},POPULARITY_MARKERS:{ONE:{className:"_3avk _3avl",iconSize:[12,12],iconAnchor:[6,6]},TWO:{className:"_3avq _3avl",iconSize:[16,16],iconAnchor:[8,8]},THREE:{className:"_3avr _3avl",iconSize:[20,20],iconAnchor:[10,10]},FOUR:{className:"_1iq1 _3avl",iconSize:[20,20],iconAnchor:[10,10]}},SPECIAL_EVENT_MARKER:{className:"_t0m _3avl",iconSize:[20,20],iconAnchor:[10,10]},ZOOM_CONTROLS:{vertical:'bottom',horizontal:'right'},MAP_TYPE:{LEAFLET:'leaflet',WEBGL:'webgl'},VIEW_MODE:{MAP_VIEW:'map_view',LIST_VIEW:'list_view'},ZOOM_CUTOFF_FOR_CACHE:{DYNAMIC:6,LEVEL_2:5,LEVEL_3:6},POLLING_VIDEO_COUNT:{LEVEL_0:300,LEVEL_1:300,LEVEL_2:400,DYNAMIC:100},MIN_VIEWERS_FOR_DYNAMIC_FETCH:0,MAX_VIEWERS_FOR_DYNAMIC_FETCH:6,isInlinePlayer:function j(k){return k===c('VideoPlayerLoggerSource').LIVE_MAP_SIDEBAR||k===c('VideoPlayerLoggerSource').LIVE_MAP_LISTVIEW||k===c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP||k===c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP_FROM_LISTVIEW||k===c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP_FROM_WEBGL||k===c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP_FROM_MAP}};f.exports=i}),null);
__d("XHotLiveVideoPayloadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/cdn\/cacheable\/hot_live_video_payload\/{broadcast_id}\/",{broadcast_id:{type:"Int",required:true}})}),null);
__d('HotLiveVideoPayloadManager',['Arbiter','AjaxRequest','XHotLiveVideoPayloadController'],(function a(b,c,d,e,f,g){var h={_subscribedPayloads:{},subscribe:function i(j,k,l){var m=false;if(j in this._subscribedPayloads){var n=this._subscribedPayloads[j];++n.count;if('lastPayload' in n&&k in n.lastPayload)l(n.lastPayload[k]);}else{this._subscribedPayloads[j]={count:1,intervalHandle:window.setInterval(this._fetchPayload.bind(this,j),3000)};m=true}var o=c('Arbiter').subscribe('HotLiveVideoPayloadManager/'+j+'/'+k,this._onCallback.bind(this,l));if(m)this._fetchPayload(j);return {arbiterToken:o,videoId:j,cancel:function p(){h.unsubscribe(this)}}},unsubscribe:function i(j){c('Arbiter').unsubscribe(j.arbiterToken);var k=this._subscribedPayloads[j.videoId];--k.count;if(k.count==0){if('intervalHandle' in k)window.clearInterval(k.intervalHandle);delete this._subscribedPayloads[j.videoId]}},_fetchPayload:function i(j){var k=c('XHotLiveVideoPayloadController').getURIBuilder().setInt('broadcast_id',j).getURI(),l=new (c('AjaxRequest'))('GET',k);l.streamMode=false;l.onJSON=this._onPayload.bind(this,j);l.onError=this._onError.bind(this,j);l.send()},_onPayload:function i(j,k){var l=this._subscribedPayloads[j];l.lastPayload=k.json;for(var m in k.json)c('Arbiter').inform('HotLiveVideoPayloadManager/'+j+'/'+m,k.json[m]);},_onError:function i(j,k){if(k.status==404&&j in this._subscribedPayloads){var l=this._subscribedPayloads[j];if('intervalHandle' in l){window.clearInterval(l.intervalHandle);delete l.intervalHandle}}},_onCallback:function i(j,k,l){j(l)}};f.exports=h}),null);
__d("XLiveResetViewerCountAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/live\/viewercount\/reset\/",{})}),null);
__d("XVideoLiveViewCountController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video\/liveviewcount\/",{player_origin:{type:"Enum",enumType:1},video_id:{type:"String",required:true},source:{type:"String",required:true},unmuted:{type:"Bool",defaultValue:true},read_only:{type:"Bool",defaultValue:false}})}),null);
__d('VideoWithLiveBroadcast',['AsyncRequest','HTML','SubscriptionsHandler','Run','VideoPlayerLoggerEvent','XLiveResetViewerCountAsyncController','XVideoLiveViewCountController','BanzaiODS'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.$VideoWithLiveBroadcast8=null;this.$VideoWithLiveBroadcast5=i;if(this.$VideoWithLiveBroadcast5.isState('playing'))this.$VideoWithLiveBroadcast9();this.$VideoWithLiveBroadcast2=false;this.$VideoWithLiveBroadcast1=true;this.$VideoWithLiveBroadcast6=null;this.$VideoWithLiveBroadcast4=new (c('SubscriptionsHandler'))();this.$VideoWithLiveBroadcast4.addSubscriptions(i.addListener('beginPlayback',this.$VideoWithLiveBroadcast9.bind(this)),i.addListener('pausePlayback',this.$VideoWithLiveBroadcast10.bind(this)),i.addListener('updateStatus',this.$VideoWithLiveBroadcast11.bind(this)),i.addListener('finishPlayback',this.$VideoWithLiveBroadcast12.bind(this)),i.addListener('unmuteVideo',this.$VideoWithLiveBroadcast13.bind(this)),i.addListener('muteVideo',this.$VideoWithLiveBroadcast14.bind(this)));i.registerOption('VideoWithLiveBroadcast','viewCount',this.getViewCount.bind(this));i.registerOption('VideoWithLiveBroadcast','isLive',function(){return true});c('Run').onLeave(function(){return this.leave()}.bind(this))}h.prototype.leave=function(){'use strict';this.$VideoWithLiveBroadcast15();this.$VideoWithLiveBroadcast4.release()};h.prototype.getViewCount=function(){'use strict';return this.$VideoWithLiveBroadcast6};h.prototype.$VideoWithLiveBroadcast16=function(i){'use strict';if(this.$VideoWithLiveBroadcast6!=i){this.$VideoWithLiveBroadcast6=i;this.$VideoWithLiveBroadcast5.emit('VideoWithLiveBroadcast/viewCountChange',i)}};h.prototype.$VideoWithLiveBroadcast12=function(){'use strict';this.$VideoWithLiveBroadcast5.logEvent(c('VideoPlayerLoggerEvent').PLAYING_LIVE_STOPPED);this.$VideoWithLiveBroadcast8=null;this.$VideoWithLiveBroadcast15()};h.prototype.$VideoWithLiveBroadcast17=function(){'use strict';if(this.$VideoWithLiveBroadcast7)return;this.$VideoWithLiveBroadcast18();this.$VideoWithLiveBroadcast7=setInterval(function(){return this.$VideoWithLiveBroadcast18()}.bind(this),3000)};h.prototype.$VideoWithLiveBroadcast11=function(i){'use strict';if(this.$VideoWithLiveBroadcast5.isState('playing')){if(this.$VideoWithLiveBroadcast8==null)this.$VideoWithLiveBroadcast8=i.position;if(this.$VideoWithLiveBroadcast8+3<=i.position){this.$VideoWithLiveBroadcast5.logEvent(c('VideoPlayerLoggerEvent').PLAYED_FOR_THREE_SECONDS);this.$VideoWithLiveBroadcast8=Infinity}}if(!this.$VideoWithLiveBroadcast5.isState('playing')){if(!this.$VideoWithLiveBroadcast3){c('BanzaiODS').bumpEntityKey('www_live_concurrent_viewer','non_playing_update_status');this.$VideoWithLiveBroadcast3=true}if(this.$VideoWithLiveBroadcast1&&!this.$VideoWithLiveBroadcast2)this.$VideoWithLiveBroadcast2=true;}};h.prototype.$VideoWithLiveBroadcast15=function(){'use strict';this.$VideoWithLiveBroadcast7&&clearInterval(this.$VideoWithLiveBroadcast7);this.$VideoWithLiveBroadcast7=null};h.prototype.$VideoWithLiveBroadcast18=function(){'use strict';this.$VideoWithLiveBroadcast19(function(i){var j=c('HTML').replaceJSONWrapper(i).getRootNode();this.$VideoWithLiveBroadcast16(j)}.bind(this))};h.prototype.$VideoWithLiveBroadcast19=function(i){'use strict';this.$VideoWithLiveBroadcast5.emit('VideoWithLiveBroadcast/poll');var j=c('XVideoLiveViewCountController').getURIBuilder().setString('video_id',this.$VideoWithLiveBroadcast5.getVideoID()).setString('source',this.$VideoWithLiveBroadcast5.getSource()).setEnum('player_origin',this.$VideoWithLiveBroadcast5.getPlayerOrigin()).setBool('unmuted',!this.$VideoWithLiveBroadcast5.isMuted()).getURI();new (c('AsyncRequest'))().setMethod('GET').setURI(j).setReadOnly(true).setHandler(function(k){return i(k&&k.payload)}).send()};h.prototype.$VideoWithLiveBroadcast9=function(){'use strict';if(this.$VideoWithLiveBroadcast5.isFacecastAudio()&&(this.$VideoWithLiveBroadcast5.isMuted()||!this.$VideoWithLiveBroadcast5.isState('playing')))return;this.$VideoWithLiveBroadcast8=null;if(this.$VideoWithLiveBroadcast1){this.$VideoWithLiveBroadcast5.logEvent(c('VideoPlayerLoggerEvent').PLAYING_LIVE_STARTED);this.$VideoWithLiveBroadcast1=false;c('BanzaiODS').bumpEntityKey('www_live_concurrent_viewer','begin_playback');if(!this.$VideoWithLiveBroadcast2)c('BanzaiODS').bumpEntityKey('www_live_concurrent_viewer','begin_playback_without_early_polling');}this.$VideoWithLiveBroadcast17()};h.prototype.$VideoWithLiveBroadcast10=function(){'use strict';this.$VideoWithLiveBroadcast8=null;this.$VideoWithLiveBroadcast15()};h.prototype.$VideoWithLiveBroadcast13=function(){'use strict';if(!this.$VideoWithLiveBroadcast5.isFacecastAudio())return;this.$VideoWithLiveBroadcast15();this.$VideoWithLiveBroadcast9()};h.prototype.$VideoWithLiveBroadcast14=function(){'use strict';if(!this.$VideoWithLiveBroadcast5.isFacecastAudio())return;new (c('AsyncRequest'))().setMethod('POST').setURI(c('XLiveResetViewerCountAsyncController').getURIBuilder().getURI()).setData({video_id:this.$VideoWithLiveBroadcast5.getVideoID()}).send()};f.exports=h}),null);
__d('VideoDebugDashManifestView.react',['cx','Promise','regeneratorRuntime','React','TooltipLink.react','UserAgent','URI','BinarySearch','VideoDebugOverlay','XHRRequest'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k={streamInterruptAt:'rgba(227,26,28,0.7)',commercialBreakAt:'rgba(127,188,65,0.7)',endedAt:'rgba(0,0,0,0.7)',timelineGapAt:'rgba(255,50,50,0.7)',timelineOverlapAt:'rgba(255,255,255,0.7)'},l=10,m=10,n=2/15,o=1+2*n,p=.25;i=babelHelpers.inherits(q,c('React').Component);j=i&&i.prototype;function q(r){j.constructor.call(this,r);this.eventInView=function(event){return event.time<this.tMax&&event.time>=this.tMin}.bind(this);this.rangeInView=function(s){return s.startTime<this.tMax&&s.endTime>=this.tMin-p}.bind(this);this.renderTimeline=function(s,t){var u=['v','a'][t],v=s.map(this.renderSegment.bind(this,u)),w=o*t;return c('React').createElement('g',{key:'track-'+t,transform:'translate(0,'+w+')'},v)}.bind(this);this.renderBufferHealth=function(s,t){var u=t*o-n;return c('React').createElement('g',{key:'buffer'+t,transform:'translate(0,'+u+')'},s.filter(this.rangeInView).map(this.renderBufferRange))}.bind(this);this.renderMomentEvent=function(s,t){var u=s.type,v=s.time,w={key:t+'-'+u+'-'+v,stroke:k[u]};return c('React').createElement('line',babelHelpers['extends']({x1:v,x2:v,y1:this.yMin,y2:this.yMax},w))}.bind(this);this.getVisibleSegments=function(s){return s.filter(this.rangeInView)}.bind(this);this.$VideoDebugDashManifestView1=0}q.prototype.$VideoDebugDashManifestView2=function(r){var s=new (c('URI'))(r.url),t=this.props.segmentInitSourceMap.get(s.getPath());if(!t)return '';var u=t.getFailoverUri(),v=this.$VideoDebugDashManifestView3(u);return v};q.prototype.$VideoDebugDashManifestView3=function(r){var s=new (c('URI'))(r),t=r.getStartByte(),u=r.getEndByte();if(t||u){s.addQueryData('bytestart',t);s.addQueryData('byteend',u)}return s.toString()};q.prototype.$VideoDebugDashManifestView4=function(r){return new (c('Promise'))(function(s,t){new (c('XHRRequest'))(r).setMethod('GET').setResponseType('blob').setResponseHandler(function(u,v,w){if(w)s(u);}).setErrorHandler(t).send()})};q.prototype.$VideoDebugDashManifestView5=function(r){var s=new (c('URI'))(r.url).getPath(),t=s.substring(s.lastIndexOf('/')+1);return t};q.prototype.$VideoDebugDashManifestView6=function(r){var s={a:'audio/mp4',v:'video/mp4'};return s[r[0]]};q.prototype.$VideoDebugDashManifestView7=function r(s,t,event){var u,v,w,x,y,z,aa,ba,ca;return c('regeneratorRuntime').async(function da(ea){while(1)switch(ea.prev=ea.next){case 0:u=c('UserAgent').isPlatform('Mac OS X')?event.metaKey:event.ctrlKey;ea.next=3;return c('regeneratorRuntime').awrap(this.$VideoDebugDashManifestView8(s,t,u));case 3:v=ea.sent;w=document.createElement('a');x=window.URL.createObjectURL(v);w.href=x;y=this.$VideoDebugDashManifestView5(s);z=y.lastIndexOf('.');aa=y.substring(0,z);ba=y.substring(z);w.download=aa+'-'+t+ba;ca=this.$VideoDebugDashManifestView6(t);w.type=ca;w.click();window.URL.revokeObjectURL(x);case 16:case 'end':return ea.stop();}},null,this)};q.prototype.$VideoDebugDashManifestView8=function r(s,t,u){var v;return c('regeneratorRuntime').async(function w(x){while(1)switch(x.prev=x.next){case 0:v=[this.$VideoDebugDashManifestView3(s.url)];if(u)v.unshift(this.$VideoDebugDashManifestView2(s));return x.abrupt('return',c('Promise').all(v.map(function(y){return this.$VideoDebugDashManifestView4(y)}.bind(this))).then(function(y){return new Blob(y)}));case 3:case 'end':return x.stop();}},null,this)};q.prototype.renderSegment=function(r,s,t){var u=s.startTime,v=s.debugInfo,w=v&&v.delta>0?v.endTime:s.endTime,x=w-u,y=this.props.getSegmentClass(this.props.segmentStates,s,r),z=''+r+t;return c('React').createElement(c('TooltipLink.react'),{key:z,tooltip:'Segment '+t+' - '+r,onClick:this.$VideoDebugDashManifestView7.bind(this,s,z)},c('React').createElement('rect',{className:y,x:u,width:x,height:'1'}))};q.prototype.renderBufferRange=function(r,s){var t=r.gap,u=r.startTime,v=r.endTime,w=t?"_4yqh":"_4yqi";return c('React').createElement('line',{key:'buffer-'+s,className:w,x1:u,x2:v})};q.prototype.renderDurationEvent=function(r,s){var t=r.type,u=r.track,v=r.startTime,w=r.endTime,x=o*u,y=x+1,z=v-p,aa=v+p,ba=w+p,ca=w-p,da={d:'M'+z+' '+x+'L'+aa+' '+y+'H'+ba+'L'+ca+' '+x,key:s+'-'+t+'-'+v+'-'+w,fill:k[t],stroke:k[t]};return c('React').createElement('path',da)};q.prototype.getBitrateString=function(r){var s=1024,t=s*s;if(!r)return '0bps';if(r>=t)return (r/t).toFixed(1)+'Mbps';if(r>=s)return (r/s).toFixed(1)+'Kbps';return r+'bps'};q.prototype.isPlayheadInsideSegment=function(r,s,t){return r>=s&&r<=t};q.prototype.renderSegmentStats=function(r,s,t){if(!s)return null;return c('React').createElement(c('TooltipLink.react'),{key:'length-'+t,display:'inline',href:'#',className:"_2io3",tooltip:'Current bitrate / Length of the largest buffered segment shown in this track'},r[t]+' / '+s.toFixed(2)+'s')};q.prototype.getCurrentSegment=function(r,s,t){var u=t[r][this.$VideoDebugDashManifestView1].startTime,v=t[r][this.$VideoDebugDashManifestView1].endTime;if(!this.isPlayheadInsideSegment(s,u,v))if(this.$VideoDebugDashManifestView1<t[r].length-1){u=t[r][this.$VideoDebugDashManifestView1+1].startTime;v=t[r][this.$VideoDebugDashManifestView1+1].endTime;if(this.isPlayheadInsideSegment(s,u,v)){++this.$VideoDebugDashManifestView1}else this.$VideoDebugDashManifestView1=-1;}else this.$VideoDebugDashManifestView1=-1;if(this.$VideoDebugDashManifestView1===-1){var w=c('BinarySearch').findBoundInArray(t[r].map(function(x){return x.startTime}),s,function(x,y){return x-y},c('BinarySearch').LEAST_STRICT_UPPER_BOUND);this.$VideoDebugDashManifestView1=--w}};q.prototype.getSegmentSize=function(r,s,t){return t[r][s].url.endByte-t[r][s].url.startByte};q.prototype.getSegmentLength=function(r,s,t){return t[r][s].endTime-t[r][s].startTime};q.prototype.getLongestSegmentLength=function(r){return r.reduce(function(s,t){var u=t.startTime,v=t.endTime;return Math.max(s,v-u)},0)};q.prototype.computeViewBox=function(r,s){var t=this.props.segmentArrays.length;this.tMin=r-l;this.tMax=r+m;this.yMin=-2*n;this.yMax=t+2*n*s;return this.tMin+' '+this.yMin+' '+(l+m)+' '+this.yMax};q.prototype.render=function(){var r=this.props,s=r.segmentArrays,t=r.playbackPosition;if(!s)return null;var u=this.props.getSourceBufferHealth(),v=this.computeViewBox(t,u.length),w=s.map(this.getVisibleSegments),x=[];for(var y=0;y<=1;y++){this.getCurrentSegment(y,t,s);var z=this.getSegmentSize(y,this.$VideoDebugDashManifestView1,s),aa=this.getSegmentLength(y,this.$VideoDebugDashManifestView1,s);x[y]=this.getBitrateString(aa?z*8/aa:0)}var ba=w.map(this.getLongestSegmentLength),ca=c('React').createElement('line',{x1:t,x2:t,y1:this.yMin,y2:this.yMax,stroke:'#000'}),da=this.props.timelineEvents.filter(this.eventInView),ea=this.props.timelineRanges.filter(this.rangeInView);for(var fa=0,ga;ga=w[fa];fa++)for(var ha=ga,ia=Array.isArray(ha),ja=0,ha=ia?ha:ha[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ka;if(ia){if(ja>=ha.length)break;ka=ha[ja++]}else{ja=ha.next();if(ja.done)break;ka=ja.value}var la=ka,ma=la.debugInfo;if(ma){var na=ma.delta,oa=void 0,pa=void 0,qa=void 0;if(na>0){oa='timelineGapAt';pa=ma.endTime;qa=ma.endTime+na}else{oa='timelineOverlapAt';pa=ma.endTime+na;qa=ma.endTime}ea.push({type:oa,track:fa,startTime:pa,endTime:qa})}}return c('React').createElement('div',{className:"_2iob"},c('React').createElement(c('TooltipLink.react'),{display:'inline',href:'#',className:"_2iof",tooltip:'The vertical line marks the current playhead position. '+'To the left of it, a '+l+'s window of past segments. '+'Afterwards, the next upcoming '+m+'s of known segments.'},'Video:',c('React').createElement('br',null),'Audio:'),c('React').createElement('div',{className:"_2iog"},ba.map(function(ra,sa){return this.renderSegmentStats(x,ra,sa)}.bind(this))),c('React').createElement('svg',{className:"_2ioh",viewBox:v,strokeWidth:n},w.map(this.renderTimeline),da.map(this.renderMomentEvent),ea.map(this.renderDurationEvent),ca,u.map(this.renderBufferHealth)))};f.exports=q}),null);
__d('VDOPropertyUpdater',[],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){function h(i,j,k){'use strict';this.parent=j;this.property=i;this.initValue=k}h.prototype.safeValue=function(i){'use strict';return i===undefined?this.initValue:i};h.prototype.get=function(i){'use strict';return this.parent.getProp(i||this.property)};h.prototype.replace=function(i){'use strict';this.parent.replace(this.property,this.safeValue(i))};h.prototype.update=function(i,j){'use strict';this.parent.update(this.property,i,this.safeValue(j))};return h}()}),null);
__d('VDOIdentityHistory',['VDOPropertyUpdater'],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c('VDOPropertyUpdater'));i=h&&h.prototype;function j(k,l,m){'use strict';i.constructor.call(this,k,l);this.recordEvent=function(n,o){this.history[n]=this.safeValue(o)}.bind(this);this.recordProperty=this.recordEvent;this.history=[];this.initValue=m}j.prototype.previous=function(k,l){'use strict';this.replace(this.history[l])};j.prototype.next=function(k){'use strict';this.replace(this.history[k])};j.prototype.last=function(){'use strict';return this.safeValue(this.history[this.history.length-1])};return j}()}),null);
__d('VDOSegmentArraysHistory',['VDOPropertyUpdater'],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c('VDOPropertyUpdater'));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this,k,l);this.indexDiffs=[]}j.prototype.recordEvent=function(k,l){'use strict';this.indexDiffs[k]=this.computeSegmentDiffToLog(l)};j.prototype.computeSegmentDiffToLog=function(k){'use strict';var l=k;if(this.segmentIndexEndTimes)l=k.map(function(m,n){var o=this.segmentIndexEndTimes[n];if(o==null)return m;var p=m.length;while(--p>=0)if(m[p].endTime<=o){p++;break}return m.slice(p)}.bind(this));this.segmentIndexEndTimes=this.extractEndTimes(k);return l};j.prototype.extractEndTimes=function(k){'use strict';var l=k.map(function(m){return m[m.length-1]});return l.filter(function(m){return m}).map(function(m){var n=m.endTime;return n})};j.prototype.previous=function(k,l){'use strict';var m=this.indexDiffs[k];if(m){var n=this.get();for(var o=0;o<m.length;o++){var p=m[o].length;if(!p)continue;var q=n[o];m[o]=q.splice(q.length-p,p)}this.updateLivehead(n)}};j.prototype.next=function(k){'use strict';var l=this.indexDiffs[k];if(l){var m=this.get();for(var n=0;n<l.length;n++){var o=m[n];o.push.apply(o,l[n])}this.updateLivehead(m)}};j.prototype.updateLivehead=function(k){'use strict';var l=this.extractEndTimes(k);if(l.length)this.parent.replace('liveheadPosition',Math.min.apply(Math,l));};return j}()}),null);
__d('VDOSegmentStatesHistory',['VDOPropertyUpdater'],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c('VDOPropertyUpdater'));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this,k,l);this.segmentStates=[];this.segmentIDs=[]}j.prototype.recordEvent=function(k,l){'use strict';var m=l[0],n=l[1];this.segmentIDs[k]=m;this.segmentStates[k]=n};j.prototype.previous=function(k,l){'use strict';var m=this.segmentIDs[k];if(m){var n=l<0?-1:this.segmentIDs.lastIndexOf(m,l);this.update(m,n===-1?0:this.segmentStates[n])}};j.prototype.next=function(k){'use strict';var l=this.segmentIDs[k];if(l)this.update(l,this.segmentStates[k]);};return j}()}),null);
__d('VDOSparseHistory',['VDOPropertyUpdater'],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c('VDOPropertyUpdater'));i=h&&h.prototype;function j(k,l,m){'use strict';i.constructor.call(this,k,l,m);this.recordEvent=function(n,o){if(this.isUpdate(o)){this.history[n]=o;this.mostRecent=o}}.bind(this);this.recordProperty=this.recordEvent;this.getAllUntil=function(n){var o=[];for(var p in this.history)if(Number(p)<=n)o.push(this.history[p]);return o}.bind(this);this.history={};this.initValue=m;this.mostRecent=undefined}j.prototype.isUpdate=function(k){'use strict';return this.mostRecent!==k};j.prototype.previous=function(k,l){'use strict';var m=-1;for(var n in this.history){if(Number(n)>l)break;m=Number(n)}if(m>=0)this.replace(this.history[m]);};j.prototype.next=function(k){'use strict';if(k in this.history)this.replace(this.history[k]);};return j}()}),null);
__d('VDOSourceBufferHealthHistory',['VDOSparseHistory'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=function k(l){if(l==null||typeof l!=='object')return l;if(Array.isArray(l))return l.map(k);var m={};for(var n in l)m[n]=k(l[n]);return m};f.exports=(i=h=function(){var k,l;k=babelHelpers.inherits(m,c('VDOSparseHistory'));l=k&&k.prototype;function m(n,o,p){'use strict';l.constructor.call(this,n,o,p);this.recordEvent=function(q,r){var s,t=this,u=r(),v=this.isUpdate(u);window.updates=!!v+(window.updates||0);if(v)(function(){var w=j(u);t.history[q]=function(){return w};t.mostRecent=w})();}.bind(this);this.recordProperty=this.recordEvent}m.prototype.isUpdate=function(n){'use strict';var o=this.mostRecent;if(n&&!o)return true;if(n.length!==this.mostRecent.length)return true;for(var p=0;p<n.length;p++){var q=n[p],r=o[p];if(!!q!==!!r)return true;var s=q.length;if(s!==r.length)return true;if(!s)continue;var t=q[s-1].endTime,u=r[s-1].endTime;if(t!==u)return true;}return false};return m}(),h.deepClone=j,i)}),null);
__d('VideoDebugHistory',['VDOIdentityHistory','VDOSegmentStatesHistory','VDOSegmentArraysHistory','VDOSourceBufferHealthHistory','VDOSparseHistory'],(function a(b,c,d,e,f,g){'use strict';var h=function i(j){if(typeof j==='function'){j=j();return function(){return j}}if(j==null||typeof j!=='object')return j;if(Array.isArray(j))return j.slice();return Object.assign({},j)};f.exports=function(){function i(j){'use strict';this.frozenProps={};this.$VideoDebugHistory1=j;this.history=[];this.offset=Infinity;this.reconstructors={lastError:new (c('VDOIdentityHistory'))('lastError',this),stallTime:new (c('VDOSparseHistory'))('stallTime',this,0),playerState:new (c('VDOIdentityHistory'))('playerState',this,'loading'),playbackPosition:new (c('VDOIdentityHistory'))('playbackPosition',this,0),lastMpdFetchDuration:new (c('VDOSparseHistory'))('lastMpdFetchDuration',this),mpdUpdatePollCount:new (c('VDOSparseHistory'))('mpdUpdatePollCount',this),segmentStates:new (c('VDOSegmentStatesHistory'))('segmentStates',this),segmentArrays:new (c('VDOSegmentArraysHistory'))('segmentArrays',this),getSourceBufferHealth:new (c('VDOSourceBufferHealthHistory'))('getSourceBufferHealth',this),lastLogEvent:new (c('VDOSparseHistory'))('lastLogEvent',this)}}i.prototype.freezeProps=function(){'use strict';this.offset=this.history.length;var j=this.$VideoDebugHistory1();for(var k in j)j[k]=h(j[k]);this.frozenProps=j;return this.offset};i.prototype.record=function(event,j,k){'use strict';var l=this.history.length;this.history.push(k);for(var m in this.reconstructors){var n=this.reconstructors[m],o=event[m],p=j[m];if(o!==undefined&&'recordEvent' in n){n.recordEvent(l,o,j)}else if(p!==undefined&&'recordProperty' in n)n.recordProperty(l,p,j);}};i.prototype.getProps=function(){'use strict';return Object.assign(this.frozenProps,{atHistoryEntry:this.offset,historyLength:this.history.length})};i.prototype.prev=function(){'use strict';var j=Math.min(this.offset,this.history.length),k=j-1;if(k<0)return -Infinity;for(var l in this.reconstructors){var m=this.reconstructors[l];m.previous(j,k)}this.frozenProps.historyEventType=this.history[k];return this.offset=k};i.prototype.next=function(){'use strict';var j=Math.min(this.offset,this.history.length),k=j+1;if(k>this.history.length)return Infinity;for(var l in this.reconstructors){var m=this.reconstructors[l];m.next(k)}this.frozenProps.historyEventType=this.history[k];return this.offset=k};i.prototype["goto"]=function(j){'use strict';var k=this.reconstructors.playbackPosition.last(),l=j>k,m=0;while(this.frozenProps.playbackPosition>j&&isFinite(m))m=this.prev();while(this.frozenProps.playbackPosition<j&&isFinite(m))m=this.next();this.frozenProps.playbackPosition=Math.max(0,Math.min(j,k));return l?Infinity:m};i.prototype.getProp=function(j){'use strict';return this.frozenProps[j]};i.prototype.replace=function(j,k){'use strict';this.frozenProps[j]=k};i.prototype.update=function(j,k,l){'use strict';this.frozenProps[j][k]=l};return i}()}),null);
__d('exposeVideoDebug',['React'],(function a(b,c,d,e,f,g){'use strict';var h=function i(j,k){var l=j.getDebug,m=j.videoID,n=j.loggedError,o=j.lastError,p=l(),q=p.VideoPlayerController,r=p.VideoDebugParent,s=p.VideoDebugOverlay,t=p.VideoBufferGaps,u=p.ComboBufferGaps,v=p.AudioBufferGaps,w=r.getProps(),x=w.segmentArrays,y=x||[],z=y[0],aa=y[1],ba=q.getVideoAPI(),ca=ba.getDOMElement(),da=ba.getDebug(),ea=da.VideoPlayerHTML5Shaka,fa={},ga={};if(ea){fa=ea.getDebug();var ha=fa,ia=ha.ShakaPlayer;if(ia){ga=ia.getDebug();!ga.identifiersIntact}}var ja={vid:'videoID',vel:'VideoElement',mpd:'getManifest',abr:'AbrManager',bwe:'BandwidthEstimator',src:'VideoSource',vss:'VideoSourceStream',vsi:'VideoSegmentIndex',vbm:'VideoBufferManager',vsb:'VideoSourceBuffer',vbg:'VideoBufferGaps',cbg:'ComboBufferGaps',ass:'AudioSourceStream',asi:'AudioSegmentIndex',abm:'AudioBufferManager',asb:'AudioSourceBuffer',abg:'AudioBufferGaps',tss:'TextSourceStream',sha:'ShakaPlayer',h5s:'VideoPlayerHTML5Shaka',h5a:'VideoPlayerHTML5Api',vpc:'VideoPlayerController',vdp:'VideoDebugParent',vdo:'VideoDebugOverlay',lpe:'LoggedPlayerError',err:'PlayerError'},ka=babelHelpers['extends']({videoID:m,VideoElement:ca,VideoBufferGaps:t,ComboBufferGaps:u,AudioBufferGaps:v,VideoSegmentIndex:z,AudioSegmentIndex:aa},fa,ga,{VideoPlayerHTML5Shaka:ea,VideoPlayerHTML5Api:ba,VideoPlayerController:q,VideoDebugParent:r,VideoDebugOverlay:s,LoggedPlayerError:n,PlayerError:o,ns:function la(){var ma=arguments.length<=0||arguments[0]===undefined?window:arguments[0];console.group('videoDebug [videoID '+m+']');for(var na in ja){var oa=ja[na],pa=ka[oa];if(pa!==undefined){ma[na]=pa;window.console.log(na+' = '+oa)}}console.groupEnd();return ka}});window.videoDebug=ka;if(k)ka.ns();};f.exports=h}),null);
__d('VideoDebugOverlay',['cx','CSS','KeyboardShortcuts','Map','React','ReactDOM','SubscriptionsHandler','URI','VideoDebugHistory','VideoDebugOverlay.react','VideoPlayerReason','cancelAnimationFrame','clearTimeout','exposeVideoDebug','getActiveElement','requestAnimationFrame','setTimeout'],(function a(b,c,d,e,f,g,h){var i=0,j=1,k=2,l=['SegmentUnknown','SegmentFetching','SegmentFetched','SegmentFailed','SegmentAppended'],m=["_2io2","_19ur","_19us","_19ut","_37la"];function n(o,p,q){'use strict';this.inFocusAndAltKey=function(r,s){if(!r.altKey||s!=='onkeydown'||r.ctrlKey||r.metaKey)return false;var t=this.$VideoDebugOverlay2,u=c('getActiveElement')();return u.contains(t)||t.contains(u)}.bind(this);this.toggleMute=function(event){var r=this.$VideoDebugOverlay13;if(r.isMuted()){r.unmute()}else r.mute();}.bind(this);this.togglePause=function(event){var r=this.$VideoDebugOverlay13;if(r.isState('playing')){r.pause(c('VideoPlayerReason').USER)}else r.play(c('VideoPlayerReason').USER);}.bind(this);this.onExpose=function(event){c('exposeVideoDebug')(this.getProps(),!!event.shiftKey)}.bind(this);this.onFreeze=function(event){if(this.$VideoDebugOverlay9){return this.resume()}else return this.freeze();}.bind(this);this.onHistoryRew=function(event){if(event.shiftKey)return this["goto"](-Infinity);return this.prev()}.bind(this);this.onHistoryFwd=function(event){if(event.shiftKey){this["goto"](Infinity);return this.resume()}return this.next()}.bind(this);this.onLivePoll=function(){if(this.$VideoDebugOverlay18)c('clearTimeout')(this.$VideoDebugOverlay18);this.$VideoDebugOverlay18=c('setTimeout')(function(){this.$VideoDebugOverlay18=null}.bind(this),1000)}.bind(this);this.onShakaDebug=function(r){var s=r.type,event=r.event,t=null;switch(s){case 'MPDFetchDuration':var u=event;this.$VideoDebugOverlay5.lastMpdFetchDuration=u;t={lastMpdFetchDuration:u};break;case 'InitialSegmentIndexes':t=this.onSegmentIndexes(event,true);break;case 'SegmentIndexesUpdated':t=this.onSegmentIndexes(event,false);break;case 'SegmentInitSources':this.onSegmentInitSources(event);break;case 'SegmentFetching':case 'SegmentFetched':case 'SegmentFailed':case 'SegmentAppended':t=this.onSegmentEvent(s,event);break;case 'streamInterruptAt':case 'commercialBreakAt':case 'endedAt':this.addTimelineMark(s,event);break;case 'streamResumedAt':this.removeTimelineMark('streamInterruptAt',event);break;default:return;}if(t)this.record(s,t);}.bind(this);this.onVpcLogEvent=function(event){this.$VideoDebugOverlay5.lastLogEvent=event;this.$VideoDebugOverlay5.getLogEventsUntil=this.$VideoDebugOverlay4.reconstructors.lastLogEvent.getAllUntil;this.record(event.event,{lastLogEvent:event})}.bind(this);this.getSourceBufferHealth=function(){this.$VideoDebugOverlay10[j]=this.$VideoDebugOverlay13.getVideoNode();return this.$VideoDebugOverlay10.map(this.$VideoDebugOverlay19)}.bind(this);this.$VideoDebugOverlay19=function(r,s){var t=[];if(!r)return t;var u=void 0,v=void 0;try{u=r.buffered;v=u.length}catch(z){return t}for(var w=0;w<v;w++)t.push({gap:false,startTime:u.start(w),endTime:u.end(w)});for(var x=1;x<v;x++){var y={gap:true,startTime:t[x-1].endTime,endTime:t[x].startTime};t.push(y);this.$VideoDebugOverlay11[s][y.startTime]=y}return t}.bind(this);this.toggleHidden=function(){return this.setHidden(!this.getHidden())}.bind(this);this.getHidden=function(){return this.$VideoDebugOverlay20}.bind(this);this.setHidden=function(r){this.$VideoDebugOverlay20=r;if(this.$VideoDebugOverlay20){this.stopAnimating()}else this.startAnimating();c('CSS').conditionClass(this.$VideoDebugOverlay2,'hidden_elem',this.$VideoDebugOverlay20)}.bind(this);this.getDebug=function(){return {VideoPlayerController:this.$VideoDebugOverlay13,VideoDebugOverlay:this.vdo,VideoDebugParent:this,VideoBufferGaps:this.$VideoDebugOverlay11[i],ComboBufferGaps:this.$VideoDebugOverlay11[j],AudioBufferGaps:this.$VideoDebugOverlay11[k]}}.bind(this);this.getProps=function(){var r=this.$VideoDebugOverlay13;if(!r)return null;var s=r.getVideoResolution(),t=s.height,u=s.width,v=r.getDebugInfo(),w=v.currentVideo,x=v.player;return Object.assign({},this.$VideoDebugOverlay5,{videoID:r.getVideoID(),playbackPosition:r.getCurrentTimePosition(),playbackDuration:r.getPlaybackDuration(),isSpherical:r.isSpherical(),streamType:w.streamType,projection:w.projection,isLiveStream:w.isLiveStream,isHD:w.isHD,hasHD:w.hasHD,tagSD:w.tagSD,tagHD:w.tagHD,hasSubtitles:w.hasSubtitles,isRateLimited:w.isRateLimited,hasRateLimit:w.hasRateLimit,liveManifestUrl:w.liveManifestUrl,isAkamai:w.liveManifestUrl&&w.liveManifestUrl.includes('akamaihd'),streamId:w.streamId,audioStreamId:w.audioStreamId,videoHeight:t,videoWidth:u,hasSpatialAudio:r.getOption('SphericalVideoSpatialAudioController','hasSpatialAudio'),dashAudioFormat:w.dashAudioFormat,initializationTime:x.initializationTime,initializationTimestamp:x.initializationTimestamp,playerVersion:x.version,stallCount:x.stallCount,stallTime:x.stallTime,interruptCount:x.interruptCount,interruptTime:x.interruptTime,loggedError:x.loggedError,lastError:x.lastError,droppedFrames:x.droppedFrames,totalFrames:x.totalFrames,getDebug:this.getDebug,playerState:this.$VideoDebugOverlay17(),isPolling:!!this.$VideoDebugOverlay18,getSegmentClass:n.getSegmentClass})}.bind(this);this.$VideoDebugOverlay21=function(r){this.vdo=r}.bind(this);this.$VideoDebugOverlay2=o;this.$VideoDebugOverlay3=p;this.$VideoDebugOverlay4=new (c('VideoDebugHistory'))(this.getProps);this.$VideoDebugOverlay5=this.$VideoDebugOverlay6();this.$VideoDebugOverlay7();this.$VideoDebugOverlay8=null;this.$VideoDebugOverlay9=false;this.setHidden(q.hidden);this.$VideoDebugOverlay1=q.timeBetweenRender}n.prototype.$VideoDebugOverlay7=function(){'use strict';this.$VideoDebugOverlay10=[null,null,null];this.$VideoDebugOverlay11=[{},{},{}]};n.prototype.$VideoDebugOverlay6=function(){'use strict';var o=this.$VideoDebugOverlay3,p=o.autoplayReason,q=o.autoplayReasonReadable;return {autoplayReason:p,autoplayReasonReadable:q,lastMpdFetchDuration:null,prevMpdChangesTime:null,lastMpdChangesTime:Date.now(),mpdUpdatePollCount:0,segmentStates:{},segmentInitSourceMap:null,timelineEvents:[],timelineRanges:[],getSourceBufferHealth:this.getSourceBufferHealth,getLogEventsUntil:function r(){return []},yaw:0,pitch:0,lastRTT:null}};n.prototype.disable=function(){'use strict';this.setHidden(true);this.$VideoDebugOverlay12.release();this.$VideoDebugOverlay13.unregisterOption('DebugOverlay','hidden')};n.prototype.enable=function(o){var p;'use strict';this.$VideoDebugOverlay13=o;this.$VideoDebugOverlay12=new (c('SubscriptionsHandler'))();(p=this.$VideoDebugOverlay12).addSubscriptions.apply(p,[o.addListener('VideoWithLiveBroadcast/poll',this.onLivePoll),o.addListener('debug/shakaEvent',this.onShakaDebug),o.addListener('debug/vpcLogEvent',this.onVpcLogEvent),o.addListener('streamInterrupted',function(){this.$VideoDebugOverlay14('interrupted')}.bind(this)),o.addListener('streamResumed',function(){this.$VideoDebugOverlay14(null)}.bind(this)),o.addListener('buffering',function(){this.$VideoDebugOverlay14('buffering')}.bind(this)),o.addListener('buffered',function(){this.$VideoDebugOverlay14(null)}.bind(this)),o.addListener('abortedLoading',function(){this.$VideoDebugOverlay14('aborted')}.bind(this)),o.addListener('restoringAfterAbort',function(){this.$VideoDebugOverlay14('restoring');this.$VideoDebugOverlay5=this.$VideoDebugOverlay6();this.$VideoDebugOverlay7()}.bind(this)),o.addListener('restoredAfterAbort',function(){this.$VideoDebugOverlay14(null)}.bind(this)),o.addListener('bufferingChanged',function(){var q=o.getDebugInfo(),r=q.player,event={stallTime:r.stallTime},s={playbackPosition:o.getCurrentTimePosition()};this.$VideoDebugOverlay4.record(event,s,'bufferingChanged')}.bind(this)),o.addListener('viewportChange',function(q,r){this.$VideoDebugOverlay5.yaw=q;this.$VideoDebugOverlay5.pitch=r}.bind(this))].concat(this.registerKeys({d:this.toggleHidden,e:this.onExpose,f:this.onFreeze,m:this.toggleMute,p:this.togglePause,LEFT:this.onHistoryRew,RIGHT:this.onHistoryFwd})));o.registerOption('DebugOverlay','hidden',this.getHidden,this.setHidden);if(this.$VideoDebugOverlay15(o.getVideoID()))this.setHidden(false);};n.prototype.registerKeys=function(o){'use strict';var p=[],q={baseFilters:[this.inFocusAndAltKey],allowDefault:true};for(var r in o)p.push(c('KeyboardShortcuts').register(r,o[r],q));return p};n.prototype.$VideoDebugOverlay15=function(o){'use strict';var p=c('URI').getRequestURI().getQueryData(),q=p.vid;switch(q){case undefined:return false;case null:return true;default:return q.split(/\D+/g).indexOf(o)!==-1;}};n.prototype.$VideoDebugOverlay14=function(o){'use strict';this.$VideoDebugOverlay16=o};n.prototype.$VideoDebugOverlay17=function(){'use strict';var o=this.$VideoDebugOverlay13.getState();if(this.$VideoDebugOverlay16)o+=' ('+this.$VideoDebugOverlay16+')';return o};n.prototype.addTimelineMark=function(o,p){'use strict';var event={type:o,time:p};this.removeTimelineMark(event);var q=this.$VideoDebugOverlay5.timelineEvents;q.push(event);return p};n.prototype.removeTimelineMark=function(o,p){'use strict';var q=this.$VideoDebugOverlay5.timelineEvents;for(var r=0;r<q.length;r++){var event=q[r];if(event.type===o&&event.time===p){q.splice(r,1);return true}}return false};n.prototype.record=function(o,p,q){'use strict';var r=this.$VideoDebugOverlay13;q=q||{};p=p||{};this.$VideoDebugOverlay4.record(p,Object.assign(q,this.$VideoDebugOverlay5,{playerState:this.$VideoDebugOverlay17(),playbackPosition:r.getCurrentTimePosition(),getSourceBufferHealth:this.getSourceBufferHealth}),o)};n.getSegmentId=function(o,p){'use strict';return p+o.startTime};n.getSegmentClass=function(o,p,q){'use strict';var r=n.getSegmentId(p,q);return m[o[r]||0]};n.prototype.onSegmentEvent=function(o,event){'use strict';var p=event.type,q=event.segment,r=event.segment.url,s=event.sourceBuffer,t=n.getSegmentId(q,p),u=l.indexOf(o);this.$VideoDebugOverlay5.segmentStates[t]=u;if(o==='SegmentFetched'&&r.getResourceTimingEntry())this.$VideoDebugOverlay5.lastRTT=r.getResourceTimingEntry().timeToFirstByte;switch(p){case 'v':this.$VideoDebugOverlay10[i]=s;break;case 'a':this.$VideoDebugOverlay10[k]=s;break;}return {segmentStates:[t,u]}};n.prototype.onSegmentIndexes=function(o,p){'use strict';var q=p||o.some(function(v){return v.lastPollHadChanges()}),r=o.map(function(v){return v.getSegments()});if(q){var s=this.$VideoDebugOverlay5.lastMpdChangesTime;this.$VideoDebugOverlay5.prevMpdChangesTime=s;this.$VideoDebugOverlay5.lastMpdChangesTime=Date.now();this.$VideoDebugOverlay5.mpdUpdatePollCount=0}else this.$VideoDebugOverlay5.mpdUpdatePollCount+=1;this.$VideoDebugOverlay5.segmentArrays=r;var t=r.map(function(v){return v[v.length-1]}).filter(function(v){return v}).map(function(v){var w=v.endTime;return w});if(t.length)this.$VideoDebugOverlay5.liveheadPosition=Math.min.apply(Math,t);var u=this.$VideoDebugOverlay5.mpdUpdatePollCount;return {segmentArrays:r,mpdUpdatePollCount:u}};n.prototype.onSegmentInitSources=function(o){'use strict';this.$VideoDebugOverlay5.segmentInitSourceMap=new (c('Map'))(o.map(function(p){var q=p.getFailoverUri(),r=new (c('URI'))(q.toString());return [r.getPath(),p]}))};n.prototype.isHidden=function(){'use strict';return this.$VideoDebugOverlay20};n.prototype.startAnimating=function(){'use strict';if(this.$VideoDebugOverlay8)return;var o=function(){this.renderOverlay();if(this.$VideoDebugOverlay1){this.$VideoDebugOverlay8=c('setTimeout')(o,this.$VideoDebugOverlay1)}else this.$VideoDebugOverlay8=c('requestAnimationFrame')(o);}.bind(this);o()};n.prototype.stopAnimating=function(){'use strict';var o=this.$VideoDebugOverlay8;if(this.$VideoDebugOverlay8){if(this.$VideoDebugOverlay1){c('clearTimeout')(this.$VideoDebugOverlay8)}else c('cancelAnimationFrame')(this.$VideoDebugOverlay8);this.$VideoDebugOverlay8=null}return o};n.prototype.prev=function(){'use strict';this.freeze();this.$VideoDebugOverlay4.prev()};n.prototype.next=function(){'use strict';this.freeze();var o=this.$VideoDebugOverlay4.next();if(!isFinite(o))this.resume();};n.prototype["goto"]=function(o){'use strict';this.freeze();this.$VideoDebugOverlay4["goto"](o)};n.prototype.freeze=function(){'use strict';if(!this.$VideoDebugOverlay9){this.$VideoDebugOverlay4.freezeProps();this.$VideoDebugOverlay9=true}};n.prototype.resume=function(){'use strict';this.$VideoDebugOverlay9=false};n.prototype.getPropsToRender=function(){'use strict';return this.$VideoDebugOverlay9?this.$VideoDebugOverlay4.getProps():this.getProps()};n.prototype.renderOverlay=function(){'use strict';var o=!this.$VideoDebugOverlay20&&this.getPropsToRender();if(o)c('ReactDOM').render(c('React').createElement(c('VideoDebugOverlay.react'),babelHelpers['extends']({ref:this.$VideoDebugOverlay21},o)),this.$VideoDebugOverlay2);};f.exports=n}),null);
__d('VideoDebugItem.react',['cx','React','TooltipLink.react'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';var l=this.props.children,m=null;if(this.props.column==='right')m="_s5q";var n=this.props.label;if(this.props.tooltip)n=c('React').createElement(c('TooltipLink.react'),this.props,n);return c('React').createElement('div',{className:m},c('React').createElement('b',null,n),': ',l)};function k(){'use strict';i.apply(this,arguments)}f.exports=k}),null);
__d('VideoDebugDashMpdLag.react',['React','VideoDebugItem.react','TooltipLink.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.componentWillReceiveProps=function(k){var l=k.mpdUpdatePollCount!==this.props.mpdUpdatePollCount;this.setState({mpdPoll:l})};j.prototype.shouldComponentUpdate=function(k,l){return l.mpdPoll};j.prototype.$VideoDebugDashMpdLag1=function(k){return (k/1000).toFixed(3)+'s'};j.prototype.render=function(){var k=this.props,l=k.lastMpdFetchDuration,m=k.lastMpdChangesTime;if(!l)return null;var n=this.$VideoDebugDashMpdLag1(Date.now()-m),o='We saw no new segments in this number of MPD polls.\n'+(l?'Last poll with news was '+n+' ago.':'It has been '+n+' without news, since we started polling.'),p=null,q=this.props.prevMpdChangesTime;if(q){p=this.$VideoDebugDashMpdLag1(m-q);p=': '+p}return c('React').createElement('div',null,c('React').createElement(c('VideoDebugItem.react'),{label:'MPD load time',column:'right',tooltip:'Load time of the most recent dash manifest'},l.toFixed(3),'s'),c('React').createElement(c('VideoDebugItem.react'),{label:'MPD polls',href:this.props.liveManifestUrl||null,tooltip:'Number of recent dash manifest polls without news,\n'+'and the time last poll for new segments took.'},c('React').createElement(c('TooltipLink.react'),{tooltip:o},this.props.mpdUpdatePollCount),p))};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('VideoDebugDashRepresentation.react',['React','TooltipLink.react','VideoDebugItem.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.idToolLink=function(k){return 'https://our.intern.facebook.com/intern/id2/'+k+'/'};j.prototype.render=function(){var k=this.props,l=k.streamId,m=k.audioStreamId,n=k.audioFormat;if(!l)return null;var o=l,p=l.replace(/vd?$/,'');if(/^\d+$/.test(p))o=c('React').createElement(c('TooltipLink.react'),{target:'_blank',display:'inline',tooltip:'Show VideoEncoding of the playing video representation id',href:this.idToolLink(p)},o);var q='';if(m){var r=m.replace(/ad?$/,'');if(/^\d+$/.test(r)){q=c('React').createElement(c('VideoDebugItem.react'),{label:'Audio Representation'},c('React').createElement(c('TooltipLink.react'),{target:'_blank',display:'inline',tooltip:'Show VideoEncoding of the playing audio representation id',href:this.idToolLink(r)},m),' (',n,')')}else q=c('React').createElement(c('VideoDebugItem.react'),{label:'Audio Representation'},m);}return c('React').createElement('div',null,c('React').createElement(c('VideoDebugItem.react'),{label:'Video Representation'},o),q)};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('VideoDebugExposeVideoDebug.react',['cx','React','TooltipLink.react','exposeVideoDebug'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$VideoDebugExposeVideoDebug1=function(event){event.preventDefault();c('exposeVideoDebug')(this.props,!!event.shiftKey)}.bind(this),m}k.prototype.render=function(){return c('React').createElement(c('TooltipLink.react'),{display:'inline',className:"_5jy",style:{right:'15px'},onClick:this.$VideoDebugExposeVideoDebug1,tooltip:'Expose a videoDebug object for this video to js devtools.\n'+'(Shift-click to break out independent globals immediately.)'},'js')};f.exports=k}),null);
__d('VideoDebugFlag.react',['cx','React','TooltipLink.react'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';var l=this.props,m=l.tooltip,n=l.active,o=l.available,p="_45za",q=this.renderDot(n,o),r=this.props.label;if(m)r=c('React').createElement(c('TooltipLink.react'),{display:'inline',href:'#',tooltip:m},r);return c('React').createElement('li',{className:p},c('React').createElement('b',null,r),': ',q)};k.prototype.renderDot=function(l,m){'use strict';var n={color:l?'green':m?'red':'gray'};return c('React').createElement('span',{className:"_45zb",style:n},'\u25CF')};function k(){'use strict';i.apply(this,arguments)}f.exports=k}),null);
__d('VideoDebugLogMessages.react',['cx','React','VideoDebugItem.react','VideoPlayerLoggerEvent'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=' \uD83D\uDE1E';i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.renderOption=function(r,s){var event=r.event;if(event===c('VideoPlayerLoggerEvent').PAUSED||event===c('VideoPlayerLoggerEvent').FINISHED_PLAYING)event=event.toUpperCase();var t=r.logData,u=t.time_ms,v=t.recent_stalls_count,w=this.props.initializationTimestamp,x=((u-w)/1000).toFixed(3),y=v?k:null;return c('React').createElement('option',{key:s,value:s},x,'s: ',event,y)}.bind(this),this.$VideoDebugLogMessages2=function(event){var r=this.$VideoDebugLogMessages3(),s=r[Number(event.target.value)];console.group('log = %s event',s.event);console.groupEnd()}.bind(this),n}l.prototype.shouldComponentUpdate=function(m){return this.$VideoDebugLogMessages1!==m.lastLogEvent};l.prototype.$VideoDebugLogMessages3=function(){var m=this.props,n=m.getLogEventsUntil,o=m.atHistoryEntry,p=o==null?Infinity:o;return n(p)};l.prototype.render=function(){var m=this.$VideoDebugLogMessages3(),n=m.length-1;this.$VideoDebugLogMessages1=m[n];var o=void 0;if(m.length)o=c('React').createElement('select',{value:n,className:"_4a8p",onChange:this.$VideoDebugLogMessages2},m.map(this.renderOption));return c('React').createElement(c('VideoDebugItem.react'),{label:'Log'},o)};f.exports=l}),null);
__d('VideoDebugScubaEventsLink.react',['CurrentUser','React','URI','TooltipLink.react','VideoDebugItem.react','formatDate'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.getScubaUrl=function(k,l,m){function n(p){var q=new Date(p);return c('formatDate')(q,'Y-m-d H:i:s',{skipPatternLocalization:true})}var o={cols:['time_ms','time_ms_begin','event_name','userid','video_id','time_ms_done','stall_time'],derivedCols:[],num_samples:'100',dimensions:['event_name'],startcol:'time_ms_begin',endcol:'time_ms_done',colorcol:'event_name',bordercol:'event_name',ordercol:'time_ms_begin',labelcol:'__number',unit:'Auto',aggregate:'',start:n(m-5000),end:'now',modifiers:[],aggregateList:[],constraints:{userid:{eq:['["'+k+'"]']},video_id:{eq:['["'+l+'"]']}},c_constraints:{},b_constraints:{}};return new (c('URI'))('https://our.intern.facebook.com/intern/scuba/query/').setQueryData({dataset:'video_player_log',view:'TimelineBreakdown',drillstate:JSON.stringify(o)}).toString()};j.prototype.shouldComponentUpdate=function(k){var l=this.props.atHistoryEntry!==null;if(l)return k.atHistoryEntry!==this.props.atHistoryEntry||k.historyLength!==this.props.historyLength;return !!k.atHistoryEntry};j.prototype.render=function(){var k=this.props.videoID,l=[];if(this.props.isLiveStream){var m=c('React').createElement(c('TooltipLink.react'),{display:'inline',href:new (c('URI'))('https://our.intern.facebook.com/intern/facecast/debug/').setQueryData({video_broadcast_id:k}).toString(),tooltip:'Debug in Facecast'},'FC');l.push(c('React').createElement('span',{key:'live'},' [',m,']'))}if(this.props.isSpherical){var n=c('React').createElement(c('TooltipLink.react'),{display:'inline',target:'_blank',href:new (c('URI'))('https://our.intern.facebook.com/intern/360dive/').setQueryData({video_id:k}).toString(),tooltip:'Debug in 360dive'},'360dive');l.push(c('React').createElement('span',{key:'spherical'},' [',n,']'))}var o=this.props.initializationTimestamp,p={href:this.getScubaUrl(c('CurrentUser').getID(),k,o),tooltip:'Show scuba video_player_log events timeline for this video',target:'_blank',label:'Video'},q=null,r=this.props,s=r.atHistoryEntry,t=r.historyLength;if(s!=null)q=c('React').createElement('span',null,c('React').createElement('b',null,' frozen at'),' ',s,'/',t);return c('React').createElement(c('VideoDebugItem.react'),p,k,l,q)};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('VideoDebugOverlay.react',['cx','React','TooltipLink.react','VideoDebugDashRepresentation.react','VideoDebugDashManifestView.react','VideoDebugDashMpdLag.react','VideoDebugExposeVideoDebug.react','VideoDebugFlag.react','VideoDebugItem.react','VideoDebugLogMessages.react','VideoDebugScubaEventsLink.react'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.$VideoDebugOverlay1=function(l){'use strict';return Number(l||0).toFixed(1)+'ms'};k.prototype.$VideoDebugOverlay2=function(l){'use strict';return Number(l||0).toFixed(3)+'s'};k.prototype.$VideoDebugOverlay3=function(l,m){'use strict';return Math.floor(l)+' / '+Math.floor(m)};k.prototype.render=function(){'use strict';var l=null;if(this.props.streamType==='dash'){l=c('React').createElement(c('VideoDebugDashRepresentation.react'),{streamId:this.props.streamId,audioStreamId:this.props.audioStreamId,audioFormat:this.props.dashAudioFormat})}else{var m=this.props,n=m.tagSD,o=m.tagHD;if(o){l=n+' (SD) / '+o+' (HD)'}else l=n+' (SD)';l=c('React').createElement(c('VideoDebugItem.react'),{label:'Encoding'},l)}var p=!!this.props.segmentArrays,q='The current time of the video.';if(p)q+=' (The black bar in the graph.)';var r=null,s=this.props,t=s.liveheadPosition,u=s.playbackPosition;if(t&&this.props.isLiveStream){var v=this.$VideoDebugOverlay2(t-u);r=c('React').createElement(c('VideoDebugItem.react'),{label:'Livehead \u0394',column:'right',tooltip:'How much ahead of the playhead the current livehead is. '+'In the graph below, that amounts to the time between the '+'playhead (the black bar) and the end of the final segment.'},v)}else r=c('React').createElement(c('VideoDebugItem.react'),{label:'Duration',column:'right'},this.$VideoDebugOverlay2(this.props.playbackDuration));var w=null;if(this.props.isLiveStream&&this.props.streamType=='dash')w=c('React').createElement(c('VideoDebugDashMpdLag.react'),{liveManifestUrl:this.props.liveManifestUrl,lastMpdFetchDuration:this.props.lastMpdFetchDuration,mpdUpdatePollCount:this.props.mpdUpdatePollCount,prevMpdChangesTime:this.props.prevMpdChangesTime,lastMpdChangesTime:this.props.lastMpdChangesTime});var x=this.props.lastError;if(x){var y=x,z=y.error,aa=y.message;x=c('React').createElement(c('VideoDebugItem.react'),{label:'Error'},z,': ',aa)}var ba=this.props,ca=ba.atHistoryEntry,da=ba.historyEventType,ea=ca!=null?"isFrozen":null,fa=null;if(da){fa=c('React').createElement(c('VideoDebugItem.react'),{label:'History event'},da)}else fa=c('React').createElement(c('VideoDebugItem.react'),{label:'Autoplay reason'},c('React').createElement(c('TooltipLink.react'),{display:'inline',href:'#',tooltip:this.props.autoplayReasonReadable},this.props.autoplayReason));var ga=c('React').createElement(c('VideoDebugItem.react'),{label:'Projection'},this.props.projection);if(this.props.isSpherical)ga=c('React').createElement('div',null,c('React').createElement(c('VideoDebugItem.react'),{label:'Yaw / Pitch',tooltip:'The yaw / pitch orientation of the video'},this.$VideoDebugOverlay3(this.props.yaw,this.props.pitch)),ga);return c('React').createElement('div',{className:ea},c('React').createElement(c('TooltipLink.react'),{target:'_blank',display:'inline',className:"_5jy",href:'https://our.intern.facebook.com/intern/dex/video-debug-overlay/',tooltip:'See the DEX about how to read this overlay'},'?'),c('React').createElement(c('VideoDebugExposeVideoDebug.react'),{videoID:this.props.videoID,getDebug:this.props.getDebug,VideoDebugOverlay:this,loggedError:this.props.loggedError,lastError:this.props.lastError}),c('React').createElement(c('VideoDebugScubaEventsLink.react'),{videoID:this.props.videoID,initializationTimestamp:this.props.initializationTimestamp,atHistoryEntry:this.props.atHistoryEntry,historyLength:this.props.historyLength,isLiveStream:this.props.isLiveStream,isSpherical:this.props.isSpherical}),fa,c('React').createElement(c('VideoDebugLogMessages.react'),{lastLogEvent:this.props.lastLogEvent,atHistoryEntry:this.props.atHistoryEntry,getLogEventsUntil:this.props.getLogEventsUntil,initializationTimestamp:this.props.initializationTimestamp}),x,c('React').createElement(c('VideoDebugItem.react'),{label:'State',column:'right'},this.props.playerState),c('React').createElement(c('VideoDebugItem.react'),{label:'Player'},this.props.playerVersion),c('React').createElement(c('VideoDebugItem.react'),{label:'Stalls',column:'right'},this.props.stallCount,': ',this.$VideoDebugOverlay2(this.props.stallTime/1000)),c('React').createElement(c('VideoDebugItem.react'),{label:'Init time'},this.$VideoDebugOverlay2(this.props.initializationTime/1000)),c('React').createElement(c('VideoDebugItem.react'),{label:'Interrupts',column:'right'},this.props.interruptCount,': ',this.$VideoDebugOverlay2(this.props.interruptTime/1000)),c('React').createElement(c('VideoDebugItem.react'),{label:'Stream Type'},this.props.streamType),c('React').createElement(c('VideoDebugItem.react'),{label:'Frames/Dropped',column:'right'},this.props.totalFrames+'/'+this.props.droppedFrames),c('React').createElement(c('VideoDebugItem.react'),{label:'Round-trip time'},this.props.lastRTT?this.$VideoDebugOverlay1(this.props.lastRTT):'n/a'),c('React').createElement(c('VideoDebugItem.react'),{label:'Rep. Size',column:'right',tooltip:'Resolution of the representation, as reported by the browser'},this.props.videoWidth,' x ',this.props.videoHeight),ga,l,c('React').createElement('ul',null,c('React').createElement(c('VideoDebugFlag.react'),{label:'HD',active:this.props.isHD,available:this.props.hasHD,tooltip:'High Definition. Indicates if the video '+'has an HD stream and if it is playing.'}),c('React').createElement(c('VideoDebugFlag.react'),{label:'Live',active:this.props.isLiveStream,tooltip:'Indicates if this is a Live stream.'}),c('React').createElement(c('VideoDebugFlag.react'),{label:'CVC Poller',active:this.props.isPolling,available:this.props.isLiveStream,tooltip:'Concurrent Viewer Count Poller. Indicates if a poll request '+'was sent recently. This should blink at a ~3 sec inteval.'}),c('React').createElement(c('VideoDebugFlag.react'),{label:'RL',active:this.props.isRateLimited,available:this.props.hasRateLimit,tooltip:'Rate Limit. Indicates if the server '+'is rate limiting the video stream.'}),c('React').createElement(c('VideoDebugFlag.react'),{label:'ST',active:this.props.hasSubtitles,tooltip:'Subtitles. Indicates if the video has subtitles.'}),c('React').createElement(c('VideoDebugFlag.react'),{label:'SA',active:this.props.hasSpatialAudio,tooltip:'Spatial Audio. Indicates if the video has spatial audio.'}),c('React').createElement(c('VideoDebugFlag.react'),{label:'Akamai',active:this.props.isAkamai,tooltip:'Akamai. Indicates if the video is being served from Akamai.'})),r,c('React').createElement(c('VideoDebugItem.react'),{label:'Playhead',tooltip:q},this.$VideoDebugOverlay2(u)),c('React').createElement(c('VideoDebugDashManifestView.react'),{getSourceBufferHealth:this.props.getSourceBufferHealth,playbackPosition:u,segmentInitSourceMap:this.props.segmentInitSourceMap,segmentStates:this.props.segmentStates,segmentArrays:this.props.segmentArrays,timelineEvents:this.props.timelineEvents,timelineRanges:this.props.timelineRanges,getSegmentClass:this.props.getSegmentClass}),w)};function k(){'use strict';i.apply(this,arguments)}f.exports=k}),null);
__d('StreamingReaction',['cx','CSS','DOM','EventEmitter','Style','StreamingReactionsTrayEvents','UFIConfig','getVendorPrefixedName','queryThenMutateDOM'],(function a(b,c,d,e,f,g,h){var i,j,k=c('getVendorPrefixedName')('transform'),l=-30;i=babelHelpers.inherits(m,c('EventEmitter'));j=i&&i.prototype;m.getReaction=function(n,o,p){var q=arguments.length<=3||arguments[3]===undefined?'':arguments[3];'use strict';var r=n?m.friendElementQueue:m.anonElementQueue;if(r.length>0){var s=r.shift();s.removeSpecificData();s.addSpecificData(o,q);return s}else return new m(n,o,p,q);};m.clearQueue=function(){'use strict';m.anonElementQueue.length=0;m.friendElementQueue.length=0};function m(n,o,p){var q=arguments.length<=3||arguments[3]===undefined?'':arguments[3];'use strict';j.constructor.call(this);this.$StreamingReaction1=p;this.setState('CONSTRUCTED');this.isFriend=n;this.type=o;this.profilePicUri=q;this.start=-1;this.randVerticalStartPositionAnon=this.$StreamingReaction6();this.randShootUpHorizontalPosition=this.$StreamingReaction7();this.randShootUpMaxVerticalPosition=this.$StreamingReaction8();this.randAmp=this.$StreamingReaction9();this.randTimeOffsetMs=this.$StreamingReaction10();this.period=this.$StreamingReaction11(this.isFriend,this.randShootUpHorizontalPosition);this.anonWindDurationMs=this.$StreamingReaction1.anonWindDurationMs+this.randTimeOffsetMs;this.maxAnonWindDurationMs=this.$StreamingReaction1.anonWindDurationMs+this.$StreamingReaction1.durationsMs.ANON_WIND_MAX_OFFSET;this.shootUpDurationMs=this.$StreamingReaction1.durationsMs.SHOOT_UP;this.explosionDurationMs=this.$StreamingReaction1.durationsMs.EXPLOSION;this.explosionPauseDurationMs=this.$StreamingReaction1.durationsMs.EXPLOSION_PAUSE;this.morphShrinkDurationMs=this.$StreamingReaction1.durationsMs.MORPH/4;this.morphGrowDurationMs=this.$StreamingReaction1.durationsMs.MORPH/6;this.morphPauseDurationMs=this.$StreamingReaction1.durationsMs.MORPH_PAUSE;this.friendWindKeyDurationMs=this.$StreamingReaction1.friendWindDurationMs;c('queryThenMutateDOM')(function(){},this.createElem.bind(this))}m.prototype.createElem=function(){'use strict';this.yAxisDiv=c('DOM').create('div');this.xAxisDiv=c('DOM').create('div');this.reactionElem=c('DOM').create('div');c('DOM').appendContent(this.xAxisDiv,this.reactionElem);c('DOM').appendContent(this.yAxisDiv,this.xAxisDiv);this.root=this.yAxisDiv;c('CSS').addClass(this.yAxisDiv,"_g19");c('CSS').addClass(this.xAxisDiv,"_g19");this.setReactionImage();var n=void 0,o=void 0,p=void 0;if(this.isFriend){this.$StreamingReaction12();this.setFireworksColors();this.root=c('DOM').create('div');c('DOM').appendContent(this.root,this.fireworks);c('DOM').appendContent(this.root,this.yAxisDiv);n=this.randShootUpHorizontalPosition;o=this.$StreamingReaction1.minY+l;p=this.$StreamingReaction1.minMorphScale;var q=this.$StreamingReaction1.shootUpScale;this.createFriendImage();c('Style').set(this.friendImg,k,'scale('+q+')')}else{n=this.$StreamingReaction1.minX;o=this.randVerticalStartPositionAnon;p=this.$StreamingReaction1.globalScale}c('Style').set(this.reactionElem,k,'scale('+p+')');c('Style').set(this.yAxisDiv,'right',n+'px');c('Style').set(this.yAxisDiv,'bottom',o+'px');this.setState('RENDERED')};m.prototype.setAnimationX=function(n){'use strict';this.$StreamingReaction3=n};m.prototype.setAnimationY=function(n){'use strict';this.$StreamingReaction4=n};m.prototype.setAnimationScale=function(n){'use strict';this.$StreamingReaction5=n};m.prototype.getAnimationX=function(){'use strict';return this.$StreamingReaction3};m.prototype.getAnimationY=function(){'use strict';return this.$StreamingReaction4};m.prototype.getAnimationScale=function(){'use strict';return this.$StreamingReaction5};m.prototype.createFriendImage=function(){'use strict';this.friendImg=c('DOM').create('img');c('DOM').setAttributes(this.friendImg,{src:this.profilePicUri});c('DOM').appendContent(this.xAxisDiv,this.friendImg);c('Style').set(this.friendImg,k,'scale('+this.$StreamingReaction1.shootUpScale+')');c('Style').set(this.reactionElem,'opacity','0');c('CSS').addClass(this.friendImg,"_2-ai")};m.prototype.setFriendImage=function(n){'use strict';this.profilePicUri=n;c('DOM').setAttributes(this.friendImg,{src:this.profilePicUri})};m.prototype.setReactionImage=function(){'use strict';c('CSS').addClass(this.reactionElem,"_g19");c('CSS').addClass(this.reactionElem,this.getReactionImageClass(this.type))};m.prototype.setState=function(n){'use strict';var o=this.getState();this.$StreamingReaction2=n;if(o!=='FINISHED'&&n==='FINISHED'){var p=this.isFriend?m.friendElementQueue:m.anonElementQueue;p.push(this);this.$StreamingReaction2='RENDERED'}this.emit(c('StreamingReactionsTrayEvents').ReactionStateChange,this.getState())};m.prototype.getState=function(){'use strict';return this.$StreamingReaction2};m.prototype.addSpecificData=function(n,o){'use strict';this.type=n;this.profilePicUri=o;this.setReactionImage();if(this.isFriend){this.setFireworksColors();this.setFriendImage(o)}};m.prototype.removeSpecificData=function(){'use strict';this.removeReactionImage();if(this.isFriend)this.removeFireworksStyle();};m.prototype.removeReactionImage=function(){'use strict';c('CSS').removeClass(this.reactionElem,this.getReactionImageClass(this.type))};m.prototype.removeFireworksStyle=function(){'use strict';for(var n=0;n<this.fireworks.length;n++)c('CSS').removeClass(this.fireworks[n],this.getReactionFireworksClass(this.type,n));};m.prototype.$StreamingReaction12=function(){'use strict';var n=[];for(var o=0,p;o<10;o++){p=c('DOM').create('div');c('CSS').addClass(p,"_3na5");c('Style').set(p,'right',this.randShootUpHorizontalPosition+22+'px');c('Style').set(p,'bottom',this.randShootUpMaxVerticalPosition-15+'px');switch(o){case 1:c('CSS').addClass(p,"_3nab");break;case 2:c('CSS').addClass(p,"_3nad");break;case 3:c('CSS').addClass(p,"_3nae");break;case 4:c('CSS').addClass(p,"_3naf");break;case 5:c('CSS').addClass(p,"_3nag");break;case 6:c('CSS').addClass(p,"_3nah");break;case 7:c('CSS').addClass(p,"_3nak");break;case 8:c('CSS').addClass(p,"_3nam");break;case 9:c('CSS').addClass(p,"_3nan");break;default:break;}n.push(p)}this.fireworks=n};m.prototype.setFireworksColors=function(){'use strict';for(var n=0;n<this.fireworks.length;n++)c('CSS').addClass(this.fireworks[n],this.getReactionFireworksClass(this.type,n));};m.prototype.getReactionImageClass=function(n){'use strict';switch(n){case 'LIKE':return "_2-am";case 'HAHA':return "_2-an";case 'WOW':return "_2-ao";case 'LOVE':return "_2-ap";case 'ANGER':return "_2-aq";case 'SORRY':return "_2-ar";case 'DOROTHY':return "_3men";default:throw new Error('Not a valid reaction type: '+n);}};m.prototype.getReactionFireworksClass=function(n,o){'use strict';var p=o%2===0;if(p){if(this.type==='LIKE'){return "_3na6"}else if(this.type==='LOVE'){return "_3na8"}else if(this.type==='DOROTHY'){return "_1l5u"}else return "_3na9";}else return "_3naa";};m.prototype.$StreamingReaction10=function(){'use strict';var n=this.$StreamingReaction1.durationsMs.ANON_WIND_MAX_OFFSET;return -1*n+Math.random()*n*2};m.prototype.$StreamingReaction9=function(){'use strict';var n=Math.random()>.5;return (n?1:-1)*(Math.random()*(1-.6)+.6)};m.prototype.$StreamingReaction11=function(n,o){'use strict';var p=n?this.$StreamingReaction1.maxX-o:this.$StreamingReaction1.maxX;return p};m.prototype.$StreamingReaction6=function(){'use strict';var n=(this.$StreamingReaction1.maxY-this.$StreamingReaction1.minY)/2;return ~~(Math.random()*n)};m.prototype.$StreamingReaction7=function(){'use strict';return Math.random()*(this.$StreamingReaction1.maxX/3)};m.prototype.$StreamingReaction8=function(){'use strict';var n=1/3,o=this.$StreamingReaction1.maxY-this.$StreamingReaction1.minY;return Math.random()*(o*(1-n))+n*o-l};m.anonElementQueue=[];m.friendElementQueue=[];f.exports=m}),null);
__d("FeedbackReactionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NONE:0,LIKE:1,LOVE:2,WOW:3,HAHA:4,YAY:5,OUCH:6,SORRY:7,ANGER:8,JACKO:9,CONFUSED:10,DOROTHY:11,TOTO:12,SELFIE:13,FLAME:14,PLANE:15})}),null);
__d('StreamingReactionsTrayAnimation',['DOM','Set','StreamingReaction','StreamingReactionsTrayEvents'],(function a(b,c,d,e,f,g){function h(i,j){'use strict';this.root=i;this.config=j;this.animating=false;this.reactions=new (c('Set'))()}h.prototype.addReaction=function(i,j){var k,l=this,m=arguments.length<=2||arguments[2]===undefined?'':arguments[2];'use strict';if(this.animating)(function(){var n=c('StreamingReaction').getReaction(i,j,l.config,m);l.reactions.add(n);if(n.getState()==='RENDERED'){l.buildAnimation(n)}else n.once(c('StreamingReactionsTrayEvents').ReactionStateChange,function(o){if(o==='RENDERED')this.buildAnimation(n);}.bind(l));})();};h.prototype.start=function(){'use strict';this.animating=true};h.prototype.stop=function(){'use strict';this.animating=false;c('StreamingReaction').clearQueue();for(var i=this.reactions,j=Array.isArray(i),k=0,i=j?i:i[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var l;if(j){if(k>=i.length)break;l=i[k++]}else{k=i.next();if(k.done)break;l=k.value}var m=l;if(m.getState()!=='CONSTRUCTED')c('DOM').remove(m.root);}this.reactions.clear()};h.prototype.clearCurrent=function(){'use strict';c('StreamingReaction').clearQueue();for(var i=this.reactions,j=Array.isArray(i),k=0,i=j?i:i[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var l;if(j){if(k>=i.length)break;l=i[k++]}else{k=i.next();if(k.done)break;l=k.value}var m=l;if(m.getState()!=='CONSTRUCTED')c('DOM').remove(m.root);}this.reactions.clear()};h.prototype.setOnFinishHandler=function(i){'use strict';this.onFinishHandler=i};h.prototype.buildAnimation=function(i){'use strict';throw new Error('Function not implemented')};h.prototype.createOnFinishForReaction=function(i){'use strict';return function(j){this.onFinish(i,j)}.bind(this)};h.prototype.onFinish=function(i,j){'use strict';if(this.onFinishHandler)this.onFinishHandler();if(i.getState()!=='FINISHED')i.setState('FINISHED');};f.exports=h}),null);
__d('StreamingReactionsTrayAnonymousAnimation',['CSSAnimationBuilder','DOM','StreamingReactionsTrayAnimation'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('StreamingReactionsTrayAnimation'));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this,k,l)}j.prototype.addAnonReaction=function(k){'use strict';i.addReaction.call(this,false,k)};j.prototype.buildAnimation=function(k){'use strict';if(!k.getAnimationY()){var l=k.anonWindDurationMs/1000,m=k.maxAnonWindDurationMs/1000,n=-1*(this.config.maxX-this.config.minX),o=k.randAmp*(this.config.maxY-this.config.minY)/2;n=Math.round(n*100)/100;o=Math.round(o*100)/100;var p=this.config.globalScale,q=c('CSSAnimationBuilder').keyframeAnimation(k.yAxisDiv),r=c('CSSAnimationBuilder').keyframeAnimation(k.xAxisDiv),s=c('CSSAnimationBuilder').keyframeAnimation(k.reactionElem);q.defineKeyframes({'0%':{transform:'translateY('+0+'px)','animation-timing-function':'ease-in-out'},'50%':{transform:'translateY('+o+'px)','animation-timing-function':'ease-in-out'},'100%':{transform:'translateY('+0+'px)'}});r.defineKeyframes({'0%':{transform:'translateX('+0+'px)'},'100%':{transform:'translateX('+n*1.2+'px)'}});s.defineKeyframes({'0%':{transform:'scale('+p+')'},'80%':{transform:'scale('+p+')'},'100%':{transform:'scale('+.1+')'}});r.setTimingFunction(this.config.anonHorizontalCurve).setDuration(l).setMemoize(false).setIterationCount(1);k.setAnimationX(r);q.setDuration(m).setIterationCount(1).setMemoize(false).setFinishedCallback(this.createOnFinishForReaction(k));k.setAnimationY(q);s.setTimingFunction('linear').setDuration(l).setMemoize(false).setIterationCount(1);k.setAnimationScale(s);if(this.animating)c('DOM').appendContent(this.root,k.root);}if(this.animating){k.setState('ANIMATING');k.getAnimationX().start();k.getAnimationY().start();k.getAnimationScale().start()}};f.exports=j}),null);
__d('StreamingReactionsTrayConfig',['EventEmitter','StreamingReactionsAnimationConfig','StreamingReactionsTrayEvents','VideoPlayerLoggerSource'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('EventEmitter'));i=h&&h.prototype;function j(k,l,m){'use strict';i.constructor.call(this);this.$StreamingReactionsTrayConfig1=c('StreamingReactionsAnimationConfig');this.durationsMs=this.$StreamingReactionsTrayConfig1.DURATIONS_MS;this.updateDimensions(k,l);this.$StreamingReactionsTrayConfig2(m);this.globalScale=this.$StreamingReactionsTrayConfig1.SCALES.GLOBAL*this.$StreamingReactionsTrayConfig1.SCALES.SCALE_MULTIPLIER;this.shootUpScale=this.globalScale*this.$StreamingReactionsTrayConfig1.SCALES.SHOOT_UP;this.maxExplosionScale=this.globalScale*this.$StreamingReactionsTrayConfig1.SCALES.MAX_EXPLOSION;this.minMorphScale=this.globalScale*this.$StreamingReactionsTrayConfig1.SCALES.MIN_MORPH;this.scaleMultiplier=this.viewUpdateInterval=this.$StreamingReactionsTrayConfig1.THROTTLE.VIEW_UPDATE_INTERVAL;this.reactionStartAnimationRate=this.$StreamingReactionsTrayConfig1.THROTTLE.REACTION_START_ANIMATION_RATE;this.reactionBufferSize=this.$StreamingReactionsTrayConfig1.THROTTLE.REACTION_BUFFER_SIZE;this.maxAnonReactionsCount=this.$StreamingReactionsTrayConfig1.THROTTLE.MAX_REACTIONS_ON_SCREEN;this.reactionSelfFireworkAnimationThreshold=this.$StreamingReactionsTrayConfig1.THROTTLE.REACTION_CLICK_SELF_FIREWORK_ANIMATION_THRESHOLD;var n=this.$StreamingReactionsTrayConfig1.CURVES;this.anonHorizontalCurve='cubic-bezier('+n.ANON_HORIZONTAL.join(', ')+')';this.friendWindHorizontalCurve='cubic-bezier('+n.FRIEND_WIND_HORIZONTAL.join(', ')+')';this.shootUpVerticalCurve='cubic-bezier('+n.SHOOT_UP_VERTICAL.join(', ')+')';this.morphScaleCurve='cubic-bezier('+n.MORPH_SCALE.join(', ')+')';this.explosionScaleCurve='cubic-bezier('+n.EXPLOSION_SCALE.join(', ')+')';this.friendWindScaleCurve='cubic-bezier('+n.FRIEND_WIND_SCALE.join(', ')+')';this.friendWindVacuumZoneScaleCurve='cubic-bezier('+n.FRIEND_WIND_VACUUM_ZONE_SCALE.join(', ')+')'}j.prototype.updateSurface=function(k,l,m){'use strict';this.updateDimensions(k,l);this.$StreamingReactionsTrayConfig2(m);this.emit(c('StreamingReactionsTrayEvents').UpdateSurface)};j.prototype.$StreamingReactionsTrayConfig2=function(k){'use strict';if(k===c('VideoPlayerLoggerSource').CHANNEL){this.anonWindDurationMs=this.$StreamingReactionsTrayConfig1.DURATIONS_MS.ANON_WIND_CHANNEL;this.friendWindDurationMs=this.$StreamingReactionsTrayConfig1.DURATIONS_MS.FRIEND_WIND_CHANNEL}else if(k===c('VideoPlayerLoggerSource').SNOWLIFT){this.anonWindDurationMs=this.$StreamingReactionsTrayConfig1.DURATIONS_MS.ANON_WIND_SNOWLIFT;this.friendWindDurationMs=this.$StreamingReactionsTrayConfig1.DURATIONS_MS.FRIEND_WIND_SNOWLIFT}else{this.anonWindDurationMs=this.$StreamingReactionsTrayConfig1.DURATIONS_MS.ANON_WIND_INLINE;this.friendWindDurationMs=this.$StreamingReactionsTrayConfig1.DURATIONS_MS.FRIEND_WIND_INLINE}};j.prototype.updateDimensions=function(k,l){'use strict';var m=k,n=l;this.maxX=m+this.$StreamingReactionsTrayConfig1.OFFSETS_PX.POSITIVE_X;this.minX=0-this.$StreamingReactionsTrayConfig1.OFFSETS_PX.NEGATIVE_X;this.maxY=n+this.$StreamingReactionsTrayConfig1.OFFSETS_PX.POSITIVE_Y;this.minY=0-this.$StreamingReactionsTrayConfig1.OFFSETS_PX.NEGATIVE_Y;this.reactionsOffScreenX=m+21};f.exports=j}),null);
__d('StreamingReactionsTrayDiffuser',['BanzaiODS','Random','randomShuffle','setTimeout'],(function a(b,c,d,e,f,g){'use strict';c('BanzaiODS').setEntitySample('feedback',.0001);function h(i,j,k,l){'use strict';this.$StreamingReactionsTrayDiffuser1=i;this.$StreamingReactionsTrayDiffuser4=j;this.$StreamingReactionsTrayDiffuser12=k;this.$StreamingReactionsTrayDiffuser11=l;this.$StreamingReactionsTrayDiffuser10=this.$StreamingReactionsTrayDiffuser11.viewUpdateInterval;this.$StreamingReactionsTrayDiffuser7={};this.$StreamingReactionsTrayDiffuser6={};this.$StreamingReactionsTrayDiffuser2=[];this.$StreamingReactionsTrayDiffuser9=0;this.$StreamingReactionsTrayDiffuser5=this.$StreamingReactionsTrayDiffuser11.maxAnonReactionsCount;this.$StreamingReactionsTrayDiffuser3=this.$StreamingReactionsTrayDiffuser11.reactionBufferSize;this.$StreamingReactionsTrayDiffuser1.setOnFinishHandler(this.$StreamingReactionsTrayDiffuser13.bind(this))}h.prototype.clearCurrentReactions=function(){'use strict';this.$StreamingReactionsTrayDiffuser1.clearCurrent();this.$StreamingReactionsTrayDiffuser4.clearCurrent();this.$StreamingReactionsTrayDiffuser9=0};h.prototype.startAnimation=function(){'use strict';clearInterval(this.$StreamingReactionsTrayDiffuser8);this.$StreamingReactionsTrayDiffuser1.start();this.$StreamingReactionsTrayDiffuser4.start();this.$StreamingReactionsTrayDiffuser8=setInterval(this.$StreamingReactionsTrayDiffuser14.bind(this),this.$StreamingReactionsTrayDiffuser10)};h.prototype.stopAnimation=function(){'use strict';this.$StreamingReactionsTrayDiffuser1.stop();this.$StreamingReactionsTrayDiffuser4.stop();this.$StreamingReactionsTrayDiffuser9=0;clearInterval(this.$StreamingReactionsTrayDiffuser8)};h.prototype.pauseAnimation=function(){'use strict';clearInterval(this.$StreamingReactionsTrayDiffuser8)};h.prototype.clearBuffer=function(){'use strict';this.$StreamingReactionsTrayDiffuser2=[]};h.prototype.addOwnReaction=function(i,j,k){'use strict';if(k)this.$StreamingReactionsTrayDiffuser6[i]+=1;this.$StreamingReactionsTrayDiffuser15(i,j)};h.prototype.processPayload=function(i){'use strict';var j=i.feedback_add_streaming_reaction_subscribe,k=j.reactor,l=j.reaction_info.reaction_type,m=k.is_viewer_friend;if(m)this.$StreamingReactionsTrayDiffuser15(l,k.profile_picture.uri);var n={},o=0;for(var p=j.reaction_counts,q=Array.isArray(p),r=0,p=q?p:p[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var s;if(q){if(r>=p.length)break;s=p[r++]}else{r=p.next();if(r.done)break;s=r.value}var t=s,u=t.reaction_info.reaction_type,v=t.count;if(m&&l)v--;if(this.$StreamingReactionsTrayDiffuser7[u]){var w=this.$StreamingReactionsTrayDiffuser7[u];if(this.$StreamingReactionsTrayDiffuser6[u])w+=this.$StreamingReactionsTrayDiffuser6[u];var x=w?Math.max(v-w,0):0;n[u]=x;o+=x}this.$StreamingReactionsTrayDiffuser7[u]=v}this.$StreamingReactionsTrayDiffuser16(n,o)};h.prototype.processVodPayload=function(i){'use strict';var j={},k=0;for(var l=i.reactions,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var o;if(m){if(n>=l.length)break;o=l[n++]}else{n=l.next();if(n.done)break;o=n.value}var p=o,q=p.reaction_type,r=p.count;j[q]=r;k+=r;for(var s=p.important_reactors,t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var v;if(t){if(u>=s.length)break;v=s[u++]}else{u=s.next();if(u.done)break;v=u.value}var w=v;this.$StreamingReactionsTrayDiffuser17(q,w.profile_picture_uri,i.length*1000)}}this.clearBuffer();this.$StreamingReactionsTrayDiffuser16(j,k)};h.prototype.$StreamingReactionsTrayDiffuser16=function(i,j){var k;'use strict';var l=[],m=this.$StreamingReactionsTrayDiffuser3-this.$StreamingReactionsTrayDiffuser2.length;if(m>0){var n=j>m,o=function u(v){var w=v[0],x=v[1];x=n?Math.floor(x/j*m):x;l=l.concat(Array.apply(undefined,Array(x)).map(function(){return w}))};for(var p=Object.entries(i),q=Array.isArray(p),r=0,p=q?p:p[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var s;if(q){if(r>=p.length)break;s=p[r++]}else{r=p.next();if(r.done)break;s=r.value}var t=s;o(t)}c('randomShuffle')(l);this.$StreamingReactionsTrayDiffuser2=this.$StreamingReactionsTrayDiffuser2.concat(l)}};h.prototype.$StreamingReactionsTrayDiffuser17=function(i,j,k){'use strict';var l=Math.floor(c('Random').random()*k);c('setTimeout')(function(){return this.addOwnReaction(i,j,false)}.bind(this),l)};h.prototype.$StreamingReactionsTrayDiffuser15=function(i,j){'use strict';this.$StreamingReactionsTrayDiffuser4.addFriendReaction(i,j);this.$StreamingReactionsTrayDiffuser12?c('BanzaiODS').bumpEntityKey('feedback','facecast_live_friend_reaction_rendered'):c('BanzaiODS').bumpEntityKey('feedback','facecast_vod_friend_reaction_rendered')};h.prototype.$StreamingReactionsTrayDiffuser14=function(){'use strict';if(this.$StreamingReactionsTrayDiffuser2.length>0&&this.$StreamingReactionsTrayDiffuser9<this.$StreamingReactionsTrayDiffuser5){this.$StreamingReactionsTrayDiffuser1.addAnonReaction(this.$StreamingReactionsTrayDiffuser2.shift());this.$StreamingReactionsTrayDiffuser9++;this.$StreamingReactionsTrayDiffuser12?c('BanzaiODS').bumpEntityKey('feedback','facecast_live_reaction_rendered'):c('BanzaiODS').bumpEntityKey('feedback','facecast_vod_reaction_rendered')}};h.prototype.$StreamingReactionsTrayDiffuser13=function(){'use strict';this.$StreamingReactionsTrayDiffuser9--};f.exports=h}),null);
__d('StreamingReactionsTrayFriendAnimation',['Arbiter','DOM','CSSAnimationBuilder','StreamingReactionsTrayAnimation','StreamingReactionsTrayEvents','queryThenMutateDOM'],(function a(b,c,d,e,f,g){var h,i,j=10;h=babelHelpers.inherits(k,c('StreamingReactionsTrayAnimation'));i=h&&h.prototype;function k(l,m){'use strict';i.constructor.call(this,l,m)}k.prototype.addFriendReaction=function(l,m){'use strict';i.addReaction.call(this,true,l,m)};k.prototype.buildAnimation=function(l){'use strict';this.incrementFireworksCount();var m=-1*l.randShootUpMaxVerticalPosition;m=Math.round(m*100)/100;var n=l.randAmp*(this.config.maxY-this.config.minY)/2,o=-1*(this.config.maxX-this.config.minX-l.randShootUpHorizontalPosition),p=this.config.globalScale,q=[l.shootUpDurationMs,l.explosionDurationMs*.15,l.explosionDurationMs*.85,l.explosionPauseDurationMs*.8,l.explosionPauseDurationMs*.2,l.morphShrinkDurationMs,l.morphGrowDurationMs,l.morphPauseDurationMs,l.friendWindKeyDurationMs*.5,l.friendWindKeyDurationMs*.3,l.friendWindKeyDurationMs*.2].map(function(pa){return pa/1000}),r=q.reduce(function(pa,qa){return pa+qa}),s=q.map(function(pa,qa,ra){var sa=(qa>0?ra[qa-1]:0)+pa;q[qa]=sa;return sa}).map(function(pa){return pa/r*100}),t=s[0],u=s[1],v=s[2],w=s[3],x=s[4],y=s[5],z=s[6],aa=s[7],ba=s[8],ca=s[9],da=s[10],ea=c('CSSAnimationBuilder').keyframeAnimation(l.yAxisDiv);ea.defineKeyframe('0%',{transform:'translateY('+0+'px)','animation-timing-function':this.config.shootUpVerticalCurve}).defineKeyframe(t,{transform:'translateY('+m+'px)','animation-timing-function':'linear'}).defineKeyframe(aa,{transform:'translateY('+m+'px)','animation-timing-function':'ease-in-out'}).defineKeyframe(ba,{transform:'translateY('+(m+n)+'px)','animation-timing-function':'ease-in-out'}).defineKeyframe(da,{transform:'translateY('+m+'px)'});ea.setDuration(r).setFinishedCallback(this.createOnFinishForReaction(l)).setIterationCount(1);var fa=c('CSSAnimationBuilder').keyframeAnimation(l.xAxisDiv);fa.defineKeyframe('0%',{transform:'translateX('+0+'px)'}).defineKeyframe(aa,{transform:'translateX('+0+'px)'}).defineKeyframe(da,{transform:'translateX('+o+'px)'});fa.setDuration(r).setTimingFunction(this.config.anonHorizontalCurve).setIterationCount(1);var ga=c('CSSAnimationBuilder').keyframeAnimation(l.friendImg);ga.defineKeyframe('0%',{transform:'scale('+this.config.shootUpScale+')','animation-timing-function':'linear'}).defineKeyframe(t,{transform:'scale('+this.config.shootUpScale+')','animation-timing-function':this.config.explosionScaleCurve}).defineKeyframe(v,{transform:'scale('+this.config.maxExplosionScale+')','animation-timing-function':'linear'}).defineKeyframe(x,{transform:'scale('+this.config.maxExplosionScale+')',opacity:'1','animation-timing-function':'linear'}).defineKeyframe(y,{transform:'scale('+this.config.minMorphScale+')',opacity:'0'}).defineKeyframe(da,{opacity:'0'});ga.setDuration(r).setIterationCount(1);var ha=c('CSSAnimationBuilder').keyframeAnimation(l.reactionElem);ha.defineKeyframe('0%',{opacity:'0',transform:'scale('+this.config.minMorphScale+')','animation-timing-function':'linear'}).defineKeyframe(x,{opacity:'0',transform:'scale('+this.config.minMorphScale+')','animation-timing-function':'linear'}).defineKeyframe(y,{opacity:'1',transform:'scale('+this.config.minMorphScale+')','animation-timing-function':this.config.morphScaleCurve}).defineKeyframe(z,{opacity:'1',transform:'scale('+this.config.maxExplosionScale+')','animation-timing-function':'linear'}).defineKeyframe(ba,{opacity:'1',transform:'scale('+p+')','animation-timing-function':'linear'}).defineKeyframe(ca,{opacity:'1',transform:'scale('+p+')','animation-timing-function':'linear'}).defineKeyframe(da,{opacity:'1',transform:'scale('+.1+')','animation-timing-function':'linear'});ha.setDuration(r).setIterationCount(1);var ia=[];for(var ja=l.fireworks,ka=Array.isArray(ja),la=0,ja=ka?ja:ja[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ma;if(ka){if(la>=ja.length)break;ma=ja[la++]}else{la=ja.next();if(la.done)break;ma=la.value}var na=ma,oa=c('CSSAnimationBuilder').keyframeAnimation(na);oa.defineKeyframe('0%',{'background-position':'0px -36px',opacity:'0'}).defineKeyframe(u,{'background-position':'0px 36px',opacity:'0'}).defineKeyframe(w,{'background-position':'0px -36px',opacity:'1'}).defineKeyframe('100%',{'background-position':'0px -36px',opacity:'0'});oa.setDuration(r).setIterationCount(1).setMemoize(false).setTimingFunction('cubic-bezier(0.075, 0.82, 0.165, 1)').setFinishedCallback(this.onFireworkFinish.bind(this));ia.push(oa)}if(this.animating)c('queryThenMutateDOM')(function(){},function(){c('DOM').appendContent(this.root,l.root);l.setState('ANIMATING');for(var pa=ia,qa=Array.isArray(pa),ra=0,pa=qa?pa:pa[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var sa;if(qa){if(ra>=pa.length)break;sa=pa[ra++]}else{ra=pa.next();if(ra.done)break;sa=ra.value}var ta=sa;ta.start()}fa.start();ea.start();ga.start();ha.start()}.bind(this));};k.prototype.onFireworkFinish=function(l){'use strict';this.decrementFireworksCount()};k.prototype.incrementFireworksCount=function(){'use strict';var l=k.fireWorksCount,m=l+j;c('Arbiter').inform(c('StreamingReactionsTrayEvents').FireworksAnimating,true);k.fireWorksCount=m};k.prototype.decrementFireworksCount=function(){'use strict';var l=k.fireWorksCount-1;if(l<1)c('Arbiter').inform(c('StreamingReactionsTrayEvents').FireworksAnimating,false);k.fireWorksCount=l};k.fireWorksCount=0;f.exports=k}),null);
__d("XVODStreamingReactionsAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/vodreactions\/",{eft_id:{type:"String",required:true},start_time:{type:"Float",required:true},end_time:{type:"Float",required:true}})}),null);
__d('VODReactionStream',['AsyncRequest','Map','SubscriptionsHandler','XVODStreamingReactionsAsyncController','setInterval'],(function a(b,c,d,e,f,g){'use strict';function h(j,k){this.videoPlayerController=j;this.diffuser=k;this.reactions=[];this.queueEndTime=0;this.currentRequest=null;this.subscriptions=new (c('SubscriptionsHandler'))();this.resetToTime(j.getCurrentTimePosition());this.subscriptions.addSubscriptions(j.addListener('seek',function(l){this.resetToTime(l.time)}.bind(this)));c('setInterval')(this.renderReactions.bind(this),800)}h.prototype.renderReactions=function(){if(!this.videoPlayerController.isState('playing')||this.videoPlayerController.isMuted())return;var j=this.videoPlayerController.getCurrentTimePosition(),k=Math.floor(j);this.onTimeUpdated(j);if(this.reactions[k]){this.diffuser.processVodPayload(this.reactions[k]);delete this.reactions[k]}};h.prototype.fetchNewReactions=function(j){var k=j+60,l=c('XVODStreamingReactionsAsyncController').getURIBuilder().setString('eft_id',this.videoPlayerController.getVideoID()).setFloat('start_time',j).setFloat('end_time',k).getURI();if(this.currentRequest)this.currentRequest.abandon();this.currentRequest=new (c('AsyncRequest'))().setURI(l).setHandler(function(m){var n=m.getPayload();if(n.reactionpayloads)for(var o=n.reactionpayloads,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}var s=r;this.reactions[s.start_time]=s}this.queueEndTime=k}.bind(this)).setFinallyHandler(function(){this.currentRequest=null}.bind(this));this.currentRequest.send()};h.prototype.onTimeUpdated=function(j){if(j<this.queueEndTime-15||this.currentRequest!==null)return;this.fetchNewReactions(this.queueEndTime)};h.prototype.resetToTime=function(j){this.fetchNewReactions(j)};h.prototype.stop=function(){this.subscriptions.release()};var i=new (c('Map'))();f.exports={start:function j(k,l){i.set(k,new h(k,l))},stop:function j(k){var l=i.get(k);if(!l)return;l.stop();i['delete'](k)}}}),null);
__d('StreamingReactionsTray',['Arbiter','FeedbackAddStreamingReactionSubscription','FeedbackReactionType','HotLiveVideoPayloadManager','PublicLiveMapConstants','Run','StreamingReactionsTrayAnonymousAnimation','StreamingReactionsTrayConfig','StreamingReactionsTrayDiffuser','StreamingReactionsTrayEvents','StreamingReactionsTrayFriendAnimation','Style','SubscriptionsHandler','UFIUIEvents','VideoPlayerLoggerSource','Visibility','VODReactionStream'],(function a(b,c,d,e,f,g){function h(i,j,k,l,m,n,o,p,q){'use strict';this.$StreamingReactionsTray7=i;this.$StreamingReactionsTray4=k;this.$StreamingReactionsTray19=0;this.$StreamingReactionsTray17=p;this.$StreamingReactionsTray18=q;this.$StreamingReactionsTray20(k);var r=j?!!j.getOption('VideoWithLiveBroadcast','isLive'):true;this.$StreamingReactionsTray1=new (c('StreamingReactionsTrayDiffuser'))(new (c('StreamingReactionsTrayAnonymousAnimation'))(this.$StreamingReactionsTray7,this.$StreamingReactionsTray2),new (c('StreamingReactionsTrayFriendAnimation'))(this.$StreamingReactionsTray7,this.$StreamingReactionsTray2),r,this.$StreamingReactionsTray2);this.$StreamingReactionsTray16=new (c('SubscriptionsHandler'))();this.$StreamingReactionsTray10=j;this.$StreamingReactionsTray8=false;this.$StreamingReactionsTray9=false;this.$StreamingReactionsTray5=n;this.$StreamingReactionsTray6=o;this.$StreamingReactionsTray11=false;this.$StreamingReactionsTray12=l;this.$StreamingReactionsTray13=m;this.$StreamingReactionsTray21();c('Run').onLeave(this.$StreamingReactionsTray22.bind(this));var s=j?j.getOption('VideoWithVODBroadcast','isLiveVOD'):false;if(s&&j)c('VODReactionStream').start(j,this.$StreamingReactionsTray1);}h.prototype.$StreamingReactionsTray20=function(i){'use strict';var j=parseInt(c('Style').get(this.$StreamingReactionsTray7,'width'),10),k=parseInt(c('Style').get(this.$StreamingReactionsTray7,'height'),10);this.$StreamingReactionsTray3=i;if(this.$StreamingReactionsTray2){this.$StreamingReactionsTray2.updateSurface(j,k,this.$StreamingReactionsTray3)}else this.$StreamingReactionsTray2=new (c('StreamingReactionsTrayConfig'))(j,k,this.$StreamingReactionsTray3);};h.prototype.$StreamingReactionsTray23=function(){'use strict';if(this.$StreamingReactionsTray2){var i=parseInt(c('Style').get(this.$StreamingReactionsTray7,'width'),10),j=parseInt(c('Style').get(this.$StreamingReactionsTray7,'height'),10);this.$StreamingReactionsTray2.updateDimensions(i,j,this.$StreamingReactionsTray3)}};h.prototype.$StreamingReactionsTray24=function(i){'use strict';return [i.addListener('unmuteVideo',function(){if(this.$StreamingReactionsTray25())this.$StreamingReactionsTray26();}.bind(this)),i.addListener('muteVideo',function(){if(this.$StreamingReactionsTray27())this.$StreamingReactionsTray28();}.bind(this)),i.addListener('changeVolume',function(){if(this.$StreamingReactionsTray25())this.$StreamingReactionsTray26();}.bind(this)),i.addListener('pausePlayback',function(){this.$StreamingReactionsTray29()}.bind(this)),i.addListener('beginPlayback',function(){if(this.$StreamingReactionsTray25())this.$StreamingReactionsTray26();}.bind(this)),i.addListener('seek',function(){this.$StreamingReactionsTray30()}.bind(this)),i.addListener('VideoChannelController/enterChannel',function(){this.$StreamingReactionsTray20(c('VideoPlayerLoggerSource').CHANNEL);this.$StreamingReactionsTray28()}.bind(this)),i.addListener('VideoChannelController/exitChannel',function(){this.$StreamingReactionsTray20(this.$StreamingReactionsTray4);if(this.$StreamingReactionsTray25())this.$StreamingReactionsTray26();}.bind(this)),i.addListener('beginPlayback',function(){if(this.$StreamingReactionsTray25())setTimeout(function(){this.$StreamingReactionsTray20(this.$StreamingReactionsTray3);this.$StreamingReactionsTray26()}.bind(this),100);}.bind(this)),i.addListener('finishPlayback',function(){this.$StreamingReactionsTray28()}.bind(this))]};h.prototype.$StreamingReactionsTray31=function(){'use strict';window.addEventListener('resize',function(){return this.$StreamingReactionsTray23()}.bind(this))};h.prototype.$StreamingReactionsTray21=function(){var i;'use strict';var j=this.$StreamingReactionsTray10?this.$StreamingReactionsTray24(this.$StreamingReactionsTray10):[];if(!this.$StreamingReactionsTray10)this.$StreamingReactionsTray31();(i=this.$StreamingReactionsTray16).addSubscriptions.apply(i,j.concat([c('Arbiter').subscribe('VideoChannelView/opened',function(){this.$StreamingReactionsTray20(c('VideoPlayerLoggerSource').CHANNEL);this.$StreamingReactionsTray28()}.bind(this)),c('Arbiter').subscribe(c('StreamingReactionsTrayEvents').ResizeChannelViewWindow,function(){return this.$StreamingReactionsTray20(this.$StreamingReactionsTray3)}.bind(this)),c('Arbiter').subscribe('VideoChannelView/closed',function(){this.$StreamingReactionsTray20(this.$StreamingReactionsTray4);if(this.$StreamingReactionsTray25())this.$StreamingReactionsTray26();}.bind(this)),c('Arbiter').subscribe(c('StreamingReactionsTrayEvents').ShowChannelViewDetails,function(){if(this.$StreamingReactionsTray25())this.$StreamingReactionsTray26();}.bind(this)),c('Arbiter').subscribe(c('StreamingReactionsTrayEvents').HideChannelViewDetails,function(){this.$StreamingReactionsTray28()}.bind(this)),this.$StreamingReactionsTray2.addListener(c('StreamingReactionsTrayEvents').UpdateSurface,function(){return this.$StreamingReactionsTray1.clearCurrentReactions()}.bind(this)),c('Arbiter').subscribe(c('UFIUIEvents').ReactionButtonClicked,function(k,l){if(l.ft_id===this.$StreamingReactionsTray12)this.$StreamingReactionsTray32(l,true);}.bind(this)),c('Arbiter').subscribe(c('StreamingReactionsTrayEvents').AddReactionAnimate,function(k,l){this.$StreamingReactionsTray32(l,false)}.bind(this)),c('Arbiter').subscribe(c('StreamingReactionsTrayEvents').DisableReactions,function(){this.$StreamingReactionsTray11=true;this.$StreamingReactionsTray28()}.bind(this)),c('Arbiter').subscribe(c('StreamingReactionsTrayEvents').EnableReactions,function(){this.$StreamingReactionsTray11=false;if(this.$StreamingReactionsTray25())this.$StreamingReactionsTray26();}.bind(this)),c('Visibility').addListener(c('Visibility').HIDDEN,function(){this.$StreamingReactionsTray28()}.bind(this)),c('Arbiter').subscribe('ActorSelector/ActorSelected',function(k,l){if(this.$StreamingReactionsTray6[l.selectedActorID])this.$StreamingReactionsTray5=this.$StreamingReactionsTray6[l.selectedActorID];}.bind(this)),c('Visibility').addListener(c('Visibility').VISIBLE,function(){if(this.$StreamingReactionsTray25())this.$StreamingReactionsTray26();}.bind(this))]));if(this.$StreamingReactionsTray25())this.$StreamingReactionsTray26();};h.prototype.$StreamingReactionsTray22=function(){'use strict';this.$StreamingReactionsTray10&&c('VODReactionStream').stop(this.$StreamingReactionsTray10);this.$StreamingReactionsTray28();this.$StreamingReactionsTray16.release()};h.prototype.$StreamingReactionsTray33=function(){'use strict';this.$StreamingReactionsTray14=c('FeedbackAddStreamingReactionSubscription').subscribe(this.$StreamingReactionsTray12,this.$StreamingReactionsTray34.bind(this));this.$StreamingReactionsTray9=true};h.prototype.$StreamingReactionsTray35=function(){'use strict';this.$StreamingReactionsTray14&&this.$StreamingReactionsTray14.unsubscribe();this.$StreamingReactionsTray15&&c('HotLiveVideoPayloadManager').unsubscribe(this.$StreamingReactionsTray15);this.$StreamingReactionsTray9=false};h.prototype.$StreamingReactionsTray32=function(i,j){'use strict';var k=Date.now(),l=k-this.$StreamingReactionsTray19;if(l<this.$StreamingReactionsTray2.reactionSelfFireworkAnimationThreshold)return;this.$StreamingReactionsTray19=k;var m=void 0;switch(i.reaction_type){case c('FeedbackReactionType').NONE:return;case c('FeedbackReactionType').LIKE:m='LIKE';break;case c('FeedbackReactionType').LOVE:m='LOVE';break;case c('FeedbackReactionType').WOW:m='WOW';break;case c('FeedbackReactionType').HAHA:m='HAHA';break;case c('FeedbackReactionType').SORRY:m='SORRY';break;case c('FeedbackReactionType').ANGER:m='ANGER';break;case c('FeedbackReactionType').DOROTHY:m='DOROTHY';break;default:throw new Error('Not a valid reaction type: '+i.reaction_type);}this.$StreamingReactionsTray1.addOwnReaction(m,this.$StreamingReactionsTray5,j)};h.prototype.$StreamingReactionsTray34=function(i){'use strict';if(this.$StreamingReactionsTray8&&this.$StreamingReactionsTray17)this.$StreamingReactionsTray1.processPayload(i);};h.prototype.$StreamingReactionsTray28=function(){'use strict';this.$StreamingReactionsTray8=false;if(this.$StreamingReactionsTray9)this.$StreamingReactionsTray35();this.$StreamingReactionsTray1.stopAnimation()};h.prototype.$StreamingReactionsTray29=function(){'use strict';this.$StreamingReactionsTray8=false;if(this.$StreamingReactionsTray9)this.$StreamingReactionsTray35();this.$StreamingReactionsTray1.pauseAnimation()};h.prototype.$StreamingReactionsTray26=function(){'use strict';if(this.$StreamingReactionsTray8)return;this.$StreamingReactionsTray8=true;if(!this.$StreamingReactionsTray9)this.$StreamingReactionsTray33();if(this.$StreamingReactionsTray18)this.$StreamingReactionsTray1.startAnimation();};h.prototype.$StreamingReactionsTray30=function(){'use strict';this.$StreamingReactionsTray1.clearBuffer()};h.prototype.$StreamingReactionsTray36=function(){'use strict';return !(this.$StreamingReactionsTray3===c('VideoPlayerLoggerSource').CHANNEL||this.$StreamingReactionsTray3===c('VideoPlayerLoggerSource').SNOWLIFT||this.$StreamingReactionsTray3===c('VideoPlayerLoggerSource').PERMALINK||this.$StreamingReactionsTray3===c('VideoPlayerLoggerSource').LIVE_CONTROL_PANEL)};h.prototype.$StreamingReactionsTray25=function(){'use strict';return this.$StreamingReactionsTray36()?this.$StreamingReactionsTray37():this.$StreamingReactionsTray38()};h.prototype.$StreamingReactionsTray27=function(){'use strict';return this.$StreamingReactionsTray36()};h.prototype.$StreamingReactionsTray38=function(){'use strict';if(this.$StreamingReactionsTray11)return false;return this.$StreamingReactionsTray10?!this.$StreamingReactionsTray10.isState('finished'):true};h.prototype.$StreamingReactionsTray37=function(){'use strict';if(!this.$StreamingReactionsTray10)return true;var i=this.$StreamingReactionsTray10;return !i.isMuted()&&i.isState('playing')&&this.$StreamingReactionsTray3!==c('VideoPlayerLoggerSource').LIVE_MAP&&!c('PublicLiveMapConstants').isInlinePlayer(this.$StreamingReactionsTray3)};f.exports=h}),null);
__d('ShowmarkErrorDialog.react',['cx','ix','fbt','Image.react','Layout.react','React','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('Layout.react').Column,n=500;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(p){l.constructor.call(this,p);this.hide=function(){this.setState({shown:false})}.bind(this);this.state={shown:false}}o.prototype.$ShowmarkErrorDialog1=function(){if(this.props.validationFailure==='transparent_and_white')return j._("A showmark must be an all-white graphic on a transparent background.");return null};o.prototype.$ShowmarkErrorDialog2=function(){if(this.props.validationFailure==='transparent_and_white')return j._("Your showmark Can't be Added in This Format");return null};o.prototype.render=function(){return c('React').createElement(c('XUIDialog.react'),{shown:this.state.shown,hideOnEscape:false,layerHideOnBlur:false,width:n},c('React').createElement(c('XUIDialogTitle.react'),null,c('React').createElement(c('Layout.react'),null,c('React').createElement(m,null,c('React').createElement(c('Image.react'),{className:"_3-90",src:i("26339")})),c('React').createElement(m,null,this.$ShowmarkErrorDialog2()))),c('React').createElement(c('XUIDialogBody.react'),null,this.$ShowmarkErrorDialog1(),c('React').createElement('div',{display:'block',className:"_3-8x"},j._("Make sure your showmark meets these requirements and try again."))),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{label:j._("OK"),onClick:this.hide})))};o.prototype.show=function(){this.setState({shown:true})};f.exports=o}),null);
__d('ShowsCreationLoggerUtils',['ShowCreationFlowTypedLogger'],(function a(b,c,d,e,f,g){'use strict';var h={log:function i(j,k,l){var m=new (c('ShowCreationFlowTypedLogger'))().setStep(j).setPageID(k);if(l)m=m.updateExtraData(l);m.log()},logError:function i(j,k,l,m){var n=new (c('ShowCreationFlowTypedLogger'))().setStep(j).setPageID(k).setError(l);if(m)n=n.updateExtraData(m);n.log()}};f.exports=h}),null);
__d('VideoShowsLogoFileInput.react',['FileInput.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){return c('React').createElement(c('FileInput.react'),{accept:'image/png',multiple:false,onChange:this.props.onFileChange,containerClassName:this.props.className},this.props.children)};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("ShowCreationFlowStep",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({RENDER_LANDING_PAGE:"render_landing_page",NAME_CLICK:"name_click",NAME_INPUT:"name_input",DESCRIPTION_CLICK:"description_click",DESCRIPTION_INPUT:"description_input",SHOW_CREATE_CLICK:"show_create_click",SHOW_CREATE_SUCCESS:"show_create_success",SHOW_CREATE_ERROR:"show_create_error",PROFILE_PIC_ITEM_CLICK:"profile_pic_item_click",PROFILE_PIC_ITEM_FILE_SELECTED:"profile_pic_item_file_selected",SHOW_TRAILER_ITEM_CLICK:"show_trailer_item_click",SHOW_TRAILER_ITEM_FILE_SELECTED:"show_trailer_item_file_selected",SHOW_TRAILER_UPLOADED:"show_trailer_uploaded",SHOW_TRAILER_UPLOAD_CANCELLED:"show_trailer_upload_cancelled",SHOW_TRAILER_ENCODE_SUCCESS:"show_trailer_encode_success",SHOW_TRAILER_UPLOAD_NEW_CLICKED:"show_trailer_upload_new_clicked",SHOW_TRAILER_UPLOAD_NEW_FILE_SELECTED:"show_trailer_upload_new_file_selected",SHOWMARK_ITEM_CLICK:"showmark_item_click",SHOWMARK_FILE_SELECTED:"showmark_file_selected",SHOWMARK_FILE_CHANGED:"showmark_file_changed",SHOWMARK_DIALOG_CLOSED:"showmark_dialog_closed",SHOWMARK_UPLOAD_CLICKED:"showmark_upload_clicked",SHOWMARK_UPLOAD_CROPPED:"showmark_upload_cropped",SHOWMARK_UPLOAD_FAILED:"showmark_upload_failed",SHOWMARK_UPLOAD_SUCCESS:"showmark_upload_success",SHOWMARK_CHANGE_CLICK:"showmark_change_click",SHOWMARK_INVALID:"showmark_invalid",SHOWMARK_CREATION_TOGGLE:"showmark_creation_toggle",SHOWMARK_CREATION_TEMPLATE_SELECTED:"showmark_creation_template_selected",SHOWMARK_CREATION_UPLOAD:"showmark_creation_upload",CONVERSION_MENU_OPENED:"conversion_menu_opened",CONVERSION_MENU_CLOSED:"conversion_menu_closed",CONVERSION_APPLY_TEMPLATE_CLICKED:"conversion_apply_template_clicked",PUBLISH_BUTTON_CLICK:"publish_button_click",PUBLISH_CONFIRM_BUTTON_CLICK:"publish_confirm_button_click",PUBLISH_SUCCESS:"publish_success",UNPUBLISH_SUCCESS:"unpublish_success",PUBLISH_ERROR:"publish_error"})}),null);
__d("ShowmarkTemplate",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({RALEWAY:"RALEWAY",ASAPCONDENSED:"ASAPCONDENSED",MONTSERRAT:"MONTSERRAT",NOTOSERIF:"NOTOSERIF",ROBOTOSLAB:"ROBOTOSLAB",FREDOKAONE:"FREDOKAONE"})}),null);
__d('ShowmarkTemplateFontConfig',[],(function a(b,c,d,e,f,g){'use strict';var h={ASAPCONDENSED:'Asap Condensed Medium',FREDOKAONE:'Fredoka One Regular',MONTSERRAT:'Montserrat Regular',NOTOSERIF:'Noto Serif Bold',RALEWAY:'Raleway ExtraBold',ROBOTOSLAB:'Roboto Slab Bold'};f.exports=h}),null);
__d("XShowsLogoUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/showpages\/logo\/upload\/",{page_id:{type:"FBID"},crop_window:{type:"IntVector"}})}),null);
__d('VideoShowsLogoUploadDialog.react',['ix','cx','fbt','cssVar','ActorURI','AdsXUIProgressBar.react','DOM','FileInputUploader','Image.react','Layout.react','LeftRight.react','Map','React','ReactDOM','ShowCreationFlowStep','ShowCreationFlowTypedLogger','ShowsConfig','ShowmarkErrorDialog.react','Text','VideoShowsLogoFileInput.react','XShowsLogoUploadController','XUICard.react','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUIGrayText.react','XUIText.react','XUINotice.react','XUISpinner.react','PhotoZoomCropImagePreview.react','XUIButton.react','PhotoZoomCropDimensions','BasicVector','Link.react','ShowmarkTemplate','ShowmarkTemplateFontConfig','Grid.react','XUITextInput.react','canvasToBlob','SimpleNUXMessage','SimpleNUXMessageTypes','XUIAmbientNUX.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('Grid.react').GridItem,o=c('Layout.react').Column,p=c('Layout.react').FillColumn,q=900,r=270,s=84,t=144,u=45,v=24,w=3,x=720,y=225,z=215,aa=110;l=babelHelpers.inherits(ba,c('React').Component);m=l&&l.prototype;function ba(ca){m.constructor.call(this,ca);this.$VideoShowsLogoUploadDialog2=function(event){this.setState({uploadState:'loading'})}.bind(this);this.$VideoShowsLogoUploadDialog3=function(event){var da=event.target.result,ea=new Image();ea.src=da;ea.onload=function(){var fa=document.createElement('canvas');fa.width=ea.width;fa.height=ea.height;var ga=fa.getContext('2d');if(ga==undefined)return;ga.drawImage(ea,0,0);var ha=ga.getImageData(0,0,ea.width,ea.height),ia=ha.data,ja=0,ka=0,la=c('ShowsConfig').countThreshold,ma=ea.width,na=0,oa=ea.height,pa=0;for(var qa=0;qa<ea.height;qa++)for(var ra=0;ra<ea.width;ra++){var sa=ea.width*qa+ra,ta=4*sa;if(ia[ta+3]!=0){ja++;if(ra<ma)ma=ra;if(ra>na)na=ra;if(qa<oa)oa=qa;if(qa>pa)pa=qa;var ua=ia[ta],va=ia[ta+1],wa=ia[ta+2],xa=.2126*ua+.7152*va+.0722*wa;if(xa>=250)ka++;}}if(ja===ea.width*ea.height||ja*la>=ka*100){if(ja===ea.width*ea.height){this.$VideoShowsLogoUploadDialog4(c('ShowCreationFlowStep').SHOWMARK_INVALID,new (c('Map'))([['reason','Not transparent']]))}else this.$VideoShowsLogoUploadDialog4(c('ShowCreationFlowStep').SHOWMARK_INVALID,new (c('Map'))([['reason','Not white'],['non transparent pixels',ja],['whitePixels',ka]]));var ya=c('React').createElement(c('ShowmarkErrorDialog.react'),{validationFailure:'transparent_and_white'});ya=c('ReactDOM').render(ya,c('DOM').create('div'));ya.show();this.setState({uploadState:null,url:null});return}var za=null,ab=null;if(ma!==0||na!==ea.width-1||oa!==0||pa!==ea.height-1){ab=[ma,oa,na,pa];za=new (c('PhotoZoomCropDimensions'))(new (c('BasicVector'))(ea.width,ea.height));za.setCenter((ma+na)/ea.width/2,(oa+pa)/ea.height/2);za=this.$VideoShowsLogoUploadDialog5(za,ab,r,s);this.$VideoShowsLogoUploadDialog4(c('ShowCreationFlowStep').SHOWMARK_UPLOAD_CROPPED,{cropWindow:JSON.stringify(ab)})}this.setState({uploadState:'success',url:da,cropDims:za,cropWindow:ab})}.bind(this)}.bind(this);this.$VideoShowsLogoUploadDialog6=function(event){this.setState({uploadState:'failed'})}.bind(this);this.$VideoShowsLogoUploadDialog22=function(){this.$VideoShowsLogoUploadDialog4(c('ShowCreationFlowStep').SHOWMARK_CREATION_TOGGLE,new (c('Map'))([['is_creation',!this.state.useCreationTool]]));if(!this.state.useCreationTool)this.$VideoShowsLogoUploadDialog23();this.setState({useCreationTool:!this.state.useCreationTool,templateSelected:null})}.bind(this);this.$VideoShowsLogoUploadDialog27=function(event){var da=event.currentTarget.value;if(da.length<=v)this.setState({templateText:da},this.$VideoShowsLogoUploadDialog26);}.bind(this);this.$VideoShowsLogoUploadDialog26=function(){var da=this.state,ea=da.templateSelected,fa=da.templateText;if(!ea)return;var ga=c('DOM').create('canvas');ga.width=x;ga.height=y;var ha=ga.getContext('2d');ha.fillStyle="#ffffff";ha.textAlign='left';ha.textBaseline='bottom';var ia=z;ha=this.$VideoShowsLogoUploadDialog28(ha,ia,ea);while(ha.measureText(fa).width>x&&ia>aa){ia--;ha=this.$VideoShowsLogoUploadDialog28(ha,ia,ea)}if(ha.measureText(fa).width<=x){ha.fillText(fa,0,y)}else{var ja=fa.split(' '),ka='';for(var la=ja,ma=Array.isArray(la),na=0,la=ma?la:la[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var oa;if(ma){if(na>=la.length)break;oa=la[na++]}else{na=la.next();if(na.done)break;oa=na.value}var pa=oa;if(ha.measureText(ka+pa).width<=x){ka+=pa+' '}else break;}ka=ka.trim();var qa=fa.slice(ka.length).trim();if(ha.measureText(qa).width>x){while(ha.measureText(ka+fa[ka.length]).width<=x)ka+=fa[ka.length];qa=fa.slice(ka.length).trim();while(ha.measureText(qa).width>x)qa=qa.slice(0,-1);}ha.fillText(ka,0,y-ia);ha.fillText(qa,0,y)}c('canvasToBlob')(ga,'image/png').then(function(ra){var sa=new FileReader();sa.onload=function(ta){var ua=ta.currentTarget.result;this.setState({url:ua,file:new File([ra],'temp-showmark'),fileInput:c('ReactDOM').findDOMNode(this.refs.showmarkCreationFileInput),uploadState:'success',cropWindow:null,cropDims:null})}.bind(this);sa.onprogress=this.$VideoShowsLogoUploadDialog2;sa.onerror=this.$VideoShowsLogoUploadDialog6;sa.readAsDataURL(ra)}.bind(this)).done()}.bind(this);this.$VideoShowsLogoUploadDialog23=function(){c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').SHOWMARK_CREATION_TOOL_NUX);this.setState({creationToolNuxShown:false})}.bind(this);this.$VideoShowsLogoUploadDialog35=function(){this.$VideoShowsLogoUploadDialog4(c('ShowCreationFlowStep').SHOWMARK_UPLOAD_CLICKED);if(this.state.useCreationTool)this.$VideoShowsLogoUploadDialog4(c('ShowCreationFlowStep').SHOWMARK_CREATION_UPLOAD,new (c('Map'))([['template',this.state.templateSelected],['template_text',this.state.templateText]]));if(this.state.fileInput){this.setState({uploadToServerState:'loading'});var da=c('XShowsLogoUploadController').getURIBuilder().setFBID('page_id',this.props.pageID);if(this.state.cropWindow)da.setIntVector('crop_window',this.state.cropWindow);da=c('ActorURI').create(da.getURI(),this.props.pageID);var ea=new (c('FileInputUploader'))(this.state.fileInput).setURI(da).setFiles({file:this.state.file});ea.subscribe('success',function(fa,ga){this.$VideoShowsLogoUploadDialog4(c('ShowCreationFlowStep').SHOWMARK_UPLOAD_SUCCESS,new (c('Map'))([['photo_id',ga.photoID]]));this.setState({uploadToServerState:'success'});this.props.onSuccess()}.bind(this));ea.subscribe('failure',function(fa,ga){this.$VideoShowsLogoUploadDialog4(c('ShowCreationFlowStep').SHOWMARK_UPLOAD_FAILED);this.setState({uploadToServerState:'failed'})}.bind(this));ea.send()}}.bind(this);this.$VideoShowsLogoUploadDialog36=function(){this.$VideoShowsLogoUploadDialog4(c('ShowCreationFlowStep').SHOWMARK_DIALOG_CLOSED);this.props.hideDialog()}.bind(this);this.state={file:null,fileInput:null,uploadToServerState:null,uploadState:null,url:ca.existingLogoUrl,cropDims:null,cropWindow:null,useCreationTool:false,templateSelected:null,templateText:ca.pageName.substr(0,v),creationToolNuxShown:c('ShowsConfig').showsM2&&!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').SHOWMARK_CREATION_TOOL_NUX)}}ba.prototype.$VideoShowsLogoUploadDialog1=function(ca){var da=ca.files;if(!da||!da[0])return null;return da[0]};ba.prototype.$VideoShowsLogoUploadDialog7=function(event,ca){event.preventDefault();var da=event.target,ea=this.$VideoShowsLogoUploadDialog1(da);this.setState({fileInput:da,file:ea});if(!ea)return;var fa=new FileReader();fa.onload=this.$VideoShowsLogoUploadDialog3;fa.onprogress=this.$VideoShowsLogoUploadDialog2;fa.onerror=this.$VideoShowsLogoUploadDialog6;fa.readAsDataURL(ea);if(ca){this.$VideoShowsLogoUploadDialog4(c('ShowCreationFlowStep').SHOWMARK_FILE_SELECTED)}else this.$VideoShowsLogoUploadDialog4(c('ShowCreationFlowStep').SHOWMARK_FILE_CHANGED);};ba.prototype.$VideoShowsLogoUploadDialog8=function(){return j._("Add Your Showmark")};ba.prototype.$VideoShowsLogoUploadDialog9=function(){return j._("Showmarks highlight your show's brand. Your showmark appears as an overlay on top of your videos and thumbnails in the lower-left corner. Your showmark should be unique to your show.")};ba.prototype.$VideoShowsLogoUploadDialog4=function(ca,da){var ea=new (c('ShowCreationFlowTypedLogger'))().setStep(ca).setPageID(this.props.pageID);if(da)ea=ea.updateExtraData(da);ea.log()};ba.prototype.$VideoShowsLogoUploadDialog10=function(){return c('React').createElement('div',{className:"_45l_"},c('React').createElement(c('Layout.react'),null,c('React').createElement(o,null,c('React').createElement('div',{className:"_2gsu"},c('React').createElement(c('Image.react'),{className:"_45m2",src:h("134353")}))),c('React').createElement(p,null,c('React').createElement('div',{className:"_45m4"},this.$VideoShowsLogoUploadDialog9()))))};ba.prototype.$VideoShowsLogoUploadDialog11=function(){return c('React').createElement('div',{className:"_2gzs"},c('React').createElement(c('XUIText.react'),{display:'block',headingLevel:1,weight:'bold',className:"_2gzt"},this.$VideoShowsLogoUploadDialog8()),c('React').createElement(c('XUIText.react'),{display:'block',className:"_2gzu"},this.$VideoShowsLogoUploadDialog9()))};ba.prototype.$VideoShowsLogoUploadDialog5=function(ca,da,ea,fa){var ga=Math.min(Math.min(ea/(da[2]-da[0]+1),fa/(da[3]-da[1]+1)),1),ha=ca.clone();ha.setSize((da[2]-da[0]+1)*ga,(da[3]-da[1]+1)*ga);ha.setZoom(ga);return ha};ba.prototype.$VideoShowsLogoUploadDialog12=function(){var ca=this.state,da=ca.cropWindow,ea=ca.cropDims,fa=ca.url;if(ea&&da)ea=this.$VideoShowsLogoUploadDialog5(ea,da,t,u);var ga=c('React').createElement('div',{className:"_16wy"},ea?c('React').createElement(c('PhotoZoomCropImagePreview.react'),{dimensions:ea,size:ea.getSize(),src:String(fa),className:"_16wz"}):c('React').createElement(c('Image.react'),{src:fa,className:"_16wz"}));return c('React').createElement('div',{className:"_2gzw"},c('React').createElement(c('XUIText.react'),{display:'block',weight:'bold',className:"_2gzz"},j._("Preview of your showmark placement")),c('React').createElement(c('XUICard.react'),{background:'base-wash',className:"_2gz-"},c('React').createElement('div',{className:"_16w_"},c('React').createElement(c('Layout.react'),{className:"_16x1"},c('React').createElement(o,null,this.props.pageProfilePic?c('React').createElement(c('Image.react'),{src:this.props.pageProfilePic,className:"_4kh1"}):c('React').createElement('div',{className:"_4kh1"})),c('React').createElement(p,null,c('React').createElement(c('XUIText.react'),{weight:'bold'},this.props.pageName),c('React').createElement(c('Layout.react'),null,c('React').createElement(o,null,c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'small'},j._("2 hours ago"))),c('React').createElement(o,{className:"_3-8r"},c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'small'},'\u00B7')),c('React').createElement(o,null,c('React').createElement(c('Image.react'),{className:"_4kh3",src:h("124639")})))),c('React').createElement(o,null,c('React').createElement(c('Image.react'),{src:h("125398")}))),c('React').createElement('div',{className:"_16x2"},this.state.url?ga:c('React').createElement(c('XUIText.react'),{className:"_16wy"},j._("Showmark").toString())),c('React').createElement('div',{className:"_16x5"},c('React').createElement(c('Layout.react'),null,c('React').createElement(p,null,c('React').createElement(c('XUIGrayText.react'),{className:"_16x6",display:'block',shade:'light',size:'small'},j._("LATEST EPISODE")),c('React').createElement(c('XUIText.react'),{display:'block',weight:'bold',className:"_16x8"},j._("Episode title"))),c('React').createElement(o,null,c('React').createElement(c('XUIButton.react'),{className:"_16x9",image:c('React').createElement(c('Image.react'),{src:h("121816")}),label:j._("Watchlist"),use:'default',href:'#'})))))),c('React').createElement('div',{className:"_2gz_"},this.$VideoShowsLogoUploadDialog13()))};ba.prototype.$VideoShowsLogoUploadDialog14=function(){return c('React').createElement('div',{className:"_2g-0"},this.state.uploadToServerState==='loading'?c('React').createElement('div',{className:"_26of"},c('React').createElement(c('XUISpinner.react'),{className:"_26oj",background:'dark',size:'large'})):null,c('React').createElement(c('LeftRight.react'),null,this.$VideoShowsLogoUploadDialog15(),this.$VideoShowsLogoUploadDialog12()))};ba.prototype.$VideoShowsLogoUploadDialog16=function(){return c('React').createElement(c('VideoShowsLogoFileInput.react'),{onFileChange:function(event){return this.$VideoShowsLogoUploadDialog7(event,true)}.bind(this),ref:'blankLogofileInput'},c('React').createElement('a',{href:'#'},c('React').createElement('div',{className:"_45m5"},c('React').createElement(c('Image.react'),{className:"_3-94",src:h("124971")}),c('React').createElement(c('XUIGrayText.react'),{shade:'medium',size:'large',className:"_37a1"},j._("Click to upload or drag image")))))};ba.prototype.$VideoShowsLogoUploadDialog17=function(){return c('React').createElement('div',null,c('React').createElement('div',{className:"_45m6"},c('React').createElement(c('Image.react'),{className:"_45m9",src:this.state.url})),c('React').createElement(c('VideoShowsLogoFileInput.react'),{onFileChange:function(event){return this.$VideoShowsLogoUploadDialog7(event,false)}.bind(this),ref:'changeLogofileInput'},c('React').createElement('a',{href:'#'},c('React').createElement(c('Layout.react'),{style:{marginTop:'12px'}},c('React').createElement(o,null,c('React').createElement(c('Image.react'),{src:h("126555")})),c('React').createElement(o,null,c('React').createElement(c('XUIGrayText.react'),{style:{paddingLeft:'4px'},shade:'light'},j._("Change Image")))))))};ba.prototype.$VideoShowsLogoUploadDialog18=function(){var ca=c('React').createElement(c('VideoShowsLogoFileInput.react'),{onFileChange:function(event){return this.$VideoShowsLogoUploadDialog7(event,false)}.bind(this),ref:'changeLogofileInput'},c('React').createElement(c('XUIButton.react'),{className:"_3-8y",image:c('React').createElement(c('Image.react'),{src:h("121748")}),label:j._("Change Showmark"),use:'default',href:'#'}));if(this.state.cropDims)ca=c('React').createElement(c('Layout.react'),{className:"_3-8o"},c('React').createElement(o,null,c('React').createElement(c('Image.react'),{src:h("116731")})),c('React').createElement(p,{className:"_18p2"},c('React').createElement(c('XUIText.react'),{weight:'bold',display:'block'},j._("Showmark Cropped")),c('React').createElement(c('XUIText.react'),{display:'block'},j._("To make sure your showmark displays properly, your graphic was automatically cropped to remove any extra padding around the sides.")),c('React').createElement('div',null,c('React').createElement(c('XUIButton.react'),{className:"_3-8y _3-90",image:c('React').createElement(c('Image.react'),{src:h("120765")}),label:j._("Revert"),use:'default',href:'#',onClick:function(){return this.setState({cropDims:null,cropWindow:null})}.bind(this)}),ca)));var da=this.state,ea=da.cropDims,fa=da.url;return c('React').createElement('div',null,c('React').createElement('div',{className:"_45m6"},ea?c('React').createElement(c('PhotoZoomCropImagePreview.react'),{className:"_18p3",dimensions:ea,size:ea.getSize(),src:String(fa)}):c('React').createElement(c('Image.react'),{className:"_45m9",src:fa})),ca)};ba.prototype.$VideoShowsLogoUploadDialog19=function(){return c('React').createElement(c('AdsXUIProgressBar.react'),{className:"_45mb",striped:true,value:100})};ba.prototype.$VideoShowsLogoUploadDialog20=function(){return c('React').createElement(c('XUINotice.react'),{style:{marginTop:'12px',marginRight:'12px'},use:'warn'},j._("There was an error adding your showmark. Please try again."))};ba.prototype.$VideoShowsLogoUploadDialog21=function(){return c('React').createElement('ul',{className:"_2g-3"},c('React').createElement('li',{className:"_2g-4"},j._("At least 300 pixels high (recommended size: 900 X 300 pixels).")),c('React').createElement('li',{className:"_2g-4"},j._("An all-white graphic on a transparent background.")),c('React').createElement('li',{className:"_2g-4"},j._("PNG files only.")),c('React').createElement('li',{className:"_2g-4"},j._("Tightly cropped around the edges of your graphic so there's no extra padding on any side (see the white lines around the showmark below)."),c('React').createElement('div',{className:"_2g-5"},c('React').createElement('div',{className:"_2g-6"},j._("Showmark").toString()))))};ba.prototype.$VideoShowsLogoUploadDialog24=function(){return c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:"_2g-8"},j._("ADD A SHOWMARK")),this.state.url?this.$VideoShowsLogoUploadDialog18():this.$VideoShowsLogoUploadDialog16(),this.state.uploadState==='loading'?this.$VideoShowsLogoUploadDialog19():null)};ba.prototype.$VideoShowsLogoUploadDialog25=function(ca){this.$VideoShowsLogoUploadDialog4(c('ShowCreationFlowStep').SHOWMARK_CREATION_TEMPLATE_SELECTED,new (c('Map'))([['template',ca]]));this.setState({templateSelected:ca},this.$VideoShowsLogoUploadDialog26)};ba.prototype.$VideoShowsLogoUploadDialog28=function(ca,da,ea){ca.font=da+'px '+c('ShowmarkTemplateFontConfig')[ea];return ca};ba.prototype.$VideoShowsLogoUploadDialog29=function(ca){return c('React').createElement('div',{className:"_3h-p"+(ca===this.state.templateSelected?' '+"_3h-q":''),onClick:function(){return this.$VideoShowsLogoUploadDialog25(ca)}.bind(this),role:'radio','aria-checked':ca===this.state.templateSelected,tabIndex:Object.values(c('ShowmarkTemplate')).indexOf(ca)},c('React').createElement('span',{style:{fontFamily:c('ShowmarkTemplateFontConfig')[ca]},className:"_3h-r"},'Abc'))};ba.prototype.$VideoShowsLogoUploadDialog30=function(){var ca=v-this.state.templateText.length;return c('React').createElement('div',{className:"_2put"},c('React').createElement(c('XUIText.react'),{className:"_2g-8"},j._("SELECT A SHOWMARK TEMPLATE")),c('React').createElement(c('Grid.react'),{cols:3,spacing:'pas',className:"_3-8o"},Object.keys(c('ShowmarkTemplate')).map(function(da){return c('React').createElement(n,{key:da},this.$VideoShowsLogoUploadDialog29(da))}.bind(this))),c('React').createElement(c('XUITextInput.react'),{className:"_2puu",value:this.state.templateText,onChange:this.$VideoShowsLogoUploadDialog27}),c('React').createElement(c('XUIText.react'),{size:'small',display:'block',className:"_3-8x"+(ca<=0||this.state.templateText.length<w?' '+"_2puw":'')},this.state.templateText.length>=w?j._({"*":"({number} characters remaining)","_1":"(1 character remaining)"},[j.plural(ca,'number')]):j._("Showmark must be more than 3 characters")),c('React').createElement(c('VideoShowsLogoFileInput.react'),{ref:'showmarkCreationFileInput',onFileChange:function da(){},className:"hidden_elem"},c('React').createElement('a',{href:'#'})))};ba.prototype.$VideoShowsLogoUploadDialog15=function(){var ca=c('React').createElement(c('Link.react'),{href:'#',onClick:this.$VideoShowsLogoUploadDialog22,className:"_33xa",ref:'creationToolToggleLink'},this.state.useCreationTool?j._("Do you want to add your own showmark?"):j._("Don't have a showmark? Add a default showmark.")),da=c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.creationToolToggleLink}.bind(this),position:'below',shown:this.state.creationToolNuxShown,onCloseButtonClick:this.$VideoShowsLogoUploadDialog23},j._("New! If you don't have a showmark, Facebook can make one for you to get started."));return c('React').createElement('div',{className:"_2g-7"},c('React').createElement(c('XUIText.react'),{className:"_2g-8"},j._("SHOWMARK REQUIREMENTS")),this.$VideoShowsLogoUploadDialog21(),this.state.useCreationTool?this.$VideoShowsLogoUploadDialog30():this.$VideoShowsLogoUploadDialog24(),c('ShowsConfig').showsM2?ca:null,this.state.creationToolNuxShown?da:null)};ba.prototype.$VideoShowsLogoUploadDialog31=function(){return c('React').createElement('div',{className:"_ixe"},c('React').createElement(c('Text'),{style:{fontWeight:'bold',marginBottom:'12px'}},j._("Your showmark should be:")),c('React').createElement('ul',{className:"_2hz8"},c('React').createElement('li',{className:"_2hza"},j._("At least 300 pixels high (recommended size: 900 X 300 pixels).")),c('React').createElement('li',{className:"_2hza"},j._("An all-white graphic on a transparent background.")),c('React').createElement('li',{className:"_2hza"},j._("PNG files only")),c('React').createElement('li',{className:"_2hza"},j._("Tightly cropped around the edges of your graphic so there's no extra padding or pixels on the side."))),this.state.url?this.$VideoShowsLogoUploadDialog17():this.$VideoShowsLogoUploadDialog16(),this.state.uploadState=='loading'?this.$VideoShowsLogoUploadDialog19():null)};ba.prototype.$VideoShowsLogoUploadDialog32=function(){return c('React').createElement('div',{className:"_1qx9"},c('React').createElement(c('Layout.react'),null,c('React').createElement(o,null,c('React').createElement('div',{className:"_4kh1"})),c('React').createElement(p,null,c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'medium'},j._("Show name added a new episode")),c('React').createElement(c('Layout.react'),null,c('React').createElement(o,null,c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'small',className:"_3-90"},j._("2 hours ago"))),c('React').createElement(o,null,c('React').createElement(c('Image.react'),{className:"_4kh3",src:h("126241")})))),c('React').createElement(o,null,c('React').createElement(c('Image.react'),{src:h("125398")}))),c('React').createElement('div',{className:(this.state.url!=null?"_1qxa":'')+(this.state.url==null?' '+"_1qxo":'')+(' '+"_1qxp")},this.state.url?c('React').createElement(c('Image.react'),{className:"_1qxq",src:this.state.url}):c('React').createElement('div',{className:"_4kh6"})))};ba.prototype.$VideoShowsLogoUploadDialog33=function(){return c('React').createElement('div',{className:"_1qx7"},c('React').createElement(c('Text'),{className:"_3-94",style:{fontWeight:'bold'}},j._("Example of showmark placement")),c('React').createElement(c('Text'),{style:{display:'block'}},j._("This is how your showmark will appear on your videos in News Feed.")),c('React').createElement('div',{className:"_1qx8"},this.$VideoShowsLogoUploadDialog32(),this.$VideoShowsLogoUploadDialog32()))};ba.prototype.$VideoShowsLogoUploadDialog34=function(){return c('React').createElement('div',{style:{padding:'18px'}},this.state.uploadToServerState==='loading'?c('React').createElement('div',{className:"_26of"},c('React').createElement(c('XUISpinner.react'),{className:"_26oj",background:'dark',size:'large'})):null,c('React').createElement(c('LeftRight.react'),null,this.$VideoShowsLogoUploadDialog31(),this.$VideoShowsLogoUploadDialog33()),this.state.uploadState==='failed'||this.state.uploadToServerState==='failed'?this.$VideoShowsLogoUploadDialog20():null)};ba.prototype.$VideoShowsLogoUploadDialog13=function(){var ca=this.state.uploadToServerState==='loading',da=this.state.useCreationTool&&(!this.state.templateSelected||this.state.templateText.length<w);return c('React').createElement(c('LeftRight.react'),null,c('React').createElement('span',null),c('React').createElement('span',null,c('React').createElement(c('XUIDialogButton.react'),{label:j._("Cancel"),action:'cancel',size:'large',use:'default',onClick:this.$VideoShowsLogoUploadDialog36,disabled:ca}),c('React').createElement(c('XUIDialogButton.react'),{label:j._("Add Showmark"),action:'confirm',size:'large',use:'confirm',disabled:this.state.uploadState!=='success'||ca||da,onClick:this.$VideoShowsLogoUploadDialog35})))};ba.prototype.render=function(){if(c('ShowsConfig').showsM1)return c('React').createElement('div',null,c('React').createElement(c('XUIDialog.react'),{width:q,shown:true,hideOnEscape:false,label:this.$VideoShowsLogoUploadDialog8(),layerHideOnBlur:false},c('React').createElement(c('XUIDialogBody.react'),{className:"_45me"},this.$VideoShowsLogoUploadDialog11(),this.$VideoShowsLogoUploadDialog14())));return c('React').createElement('div',null,c('React').createElement(c('XUIDialog.react'),{width:q,shown:true,hideOnEscape:false,layerHideOnBlur:false},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},this.$VideoShowsLogoUploadDialog8()),c('React').createElement(c('XUIDialogBody.react'),{className:"_45me"},this.$VideoShowsLogoUploadDialog10(),this.$VideoShowsLogoUploadDialog34()),c('React').createElement(c('XUIDialogFooter.react'),null,this.$VideoShowsLogoUploadDialog13())))};f.exports=ba}),null);