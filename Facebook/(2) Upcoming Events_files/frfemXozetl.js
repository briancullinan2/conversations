if (self.CavalryLogger) { CavalryLogger.start_js(["CXqjJ"]); }

__d("XTimelinePYMKLoadMoreController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/timeline\/pymk\/load\/",{loading_id:{type:"String",required:true},ids:{type:"IntVector",required:true},is_chain_unit:{type:"Bool",defaultValue:false}})}),null);
__d('FbTimelinePymkHScroll',['csx','cx','AsyncRequest','CSS','DOM','Event','debounce','EgoUnitCarousel','XTimelinePYMKLoadMoreController'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('EgoUnitCarousel'));k=j&&j.prototype;function l(m){'use strict';k.constructor.call(this,m);this.chain_unit=m.chain_unit}l.prototype.updateAutoSlideListener=function(){'use strict';this.$FbTimelinePymkHScroll5();if(this.canSlideLeft())this.$FbTimelinePymkHScroll6('left',this.visibleIndex+this.visibleCount);if(this.canSlideRight())this.$FbTimelinePymkHScroll6('right',this.visibleIndex-1);};l.prototype.updateLargePager=function(){'use strict';c('CSS').removeClass(this.carousel,"_2_3c");this.$FbTimelinePymkHScroll7(true);this.$FbTimelinePymkHScroll7(false);c('CSS').conditionClass(this.carousel,"_2_3d",this.canSlideLeft()&&this.canSlideRight());c('CSS').conditionClass(this.carousel,"_2_3e",this.canSlideRight())};l.prototype.hidePagerButton=function(){'use strict';c('CSS').addClass(this.carousel,"_2_3c")};l.prototype.$FbTimelinePymkHScroll7=function(m){'use strict';var n=m?"_2_3f":"_2_3l",o=m?"_2_3m":"_2_3n";if(m?this.canSlideRight():this.canSlideLeft()){c('CSS').removeClass(this.carousel,o);c('CSS').removeClass(this.carousel,n)}else{c('CSS').addClass(this.carousel,o);setTimeout(function(){c('CSS').addClass(this.carousel,n)}.bind(this),500)}};l.prototype.$FbTimelinePymkHScroll5=function(){'use strict';if(this.$FbTimelinePymkHScroll1)this.$FbTimelinePymkHScroll1.remove();this.$FbTimelinePymkHScroll1=null;if(this.$FbTimelinePymkHScroll2)this.$FbTimelinePymkHScroll2.remove();this.$FbTimelinePymkHScroll2=null;if(this.$FbTimelinePymkHScroll3)this.$FbTimelinePymkHScroll3.remove();this.$FbTimelinePymkHScroll3=null;if(this.$FbTimelinePymkHScroll4)this.$FbTimelinePymkHScroll4.remove();this.$FbTimelinePymkHScroll4=null};l.prototype.$FbTimelinePymkHScroll6=function(m,n){'use strict';if(isNaN(n)||m!=='left'&&m!=='right')return;if(m==='left'){var o=c('debounce')(this.slideLeft.bind(this),1000,this);this.$FbTimelinePymkHScroll1=c('Event').listen(this.grid.children[n],'mouseover',o);this.$FbTimelinePymkHScroll3=c('Event').listen(this.grid.children[n],'mouseout',function(){o.reset()})}else{var p=c('debounce')(this.slideRight.bind(this),1000,this);this.$FbTimelinePymkHScroll2=c('Event').listen(this.grid.children[n],'mouseover',p);this.$FbTimelinePymkHScroll4=c('Event').listen(this.grid.children[n],'mouseout',function(){p.reset()})}};l.prototype.toggleXouts=function(m,n,o){'use strict';var p=Math.min(m,n),q=Math.max(m,n),r=this.grid.children;p=Math.max(p,0);q=Math.min(q,r.length-1);var s;for(var t=p;t<=q;++t){s=r[t];var u=c('DOM').scry(s,"._2_3o")[0];if(u)if(o){c('CSS').hide(u)}else c('CSS').show(u);}};l.prototype.tryLoadMore=function(){'use strict';if(this.hasReq)return;var m=this.grid.childElementCount-this.visibleIndex-this.visibleCount-1;if(m>this.visibleCount*2)return;var n=c('DOM').scry(this.grid,"._34bp")[0];if(!n)return;var o=n.id,p=[],q=this.grid.childNodes,r=q.length-1;for(var s=0;s<r;++s){var t=q[s].getAttribute('data-ego-id');if(t)p.push(t);}var u=c('XTimelinePYMKLoadMoreController').getURIBuilder().setString('loading_id',o).setIntVector('ids',p).setBool('is_chain_unit',this.chain_unit).getURI();new (c('AsyncRequest'))().setURI(u).setHandler(this.$FbTimelinePymkHScroll8.bind(this)).setErrorHandler(this.onError.bind(this)).send();this.hasReq=true};l.prototype.logImpressions=function(){'use strict'};l.prototype.$FbTimelinePymkHScroll8=function(m){'use strict';this.hasReq=false;this.onItemsAdded()};f.exports=l}),null);