if (self.CavalryLogger) { CavalryLogger.start_js(["93afF"]); }

__d('ConversationNubUFICentralUpdateManager',['Bootloader','SubscriptionsHandler','UFICentralUpdates'],(function a(b,c,d,e,f,g){'use strict';function h(i){this.$ConversationNubUFICentralUpdateManager2=i;this.$ConversationNubUFICentralUpdateManager1=new (c('SubscriptionsHandler'))();this.$ConversationNubUFICentralUpdateManager3()}h.prototype.$ConversationNubUFICentralUpdateManager3=function(){this.$ConversationNubUFICentralUpdateManager1.addSubscriptions(c('UFICentralUpdates').subscribe('comments-updated',function(i,j){this.$ConversationNubUFICentralUpdateManager4(j)}.bind(this)))};h.prototype.$ConversationNubUFICentralUpdateManager4=function(i){c('Bootloader').loadModules(["UFIComments","UFILocallyComposedCommentStore"],function(j,k){var l=i.updates||{},m={},n={};for(var o in l){var p=j.getComment(o);if(!p)continue;var q=p.fbid,r=p.ftentidentifier,s=p.id,t=p.__typename,u=p.isunseen,v=p.ufiinstanceid;if(t==='local'||!u)continue;var w=q?q+'':null,x=r?r+'':null;if(!w||!x||m[w])continue;if(k.getStateForInstance(v)[s])continue;m[w]=true;var y=n[x]||{};y[w]=true;n[x]=y}this.$ConversationNubUFICentralUpdateManager2(n)}.bind(this),'ConversationNubUFICentralUpdateManager')};h.prototype.destroy=function(){this.$ConversationNubUFICentralUpdateManager1.release()};f.exports=h}),null);