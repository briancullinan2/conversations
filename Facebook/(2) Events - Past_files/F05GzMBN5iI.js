if (self.CavalryLogger) { CavalryLogger.start_js(["FXvTH"]); }

__d("XConversationNubHeaderUnpinDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/conversation\/nub_story\/header_unpin_dialog\/",{__asyncDialog:{type:"Int"}})}),null);
__d('ConversationNubHeaderMenuUnpinDialog',['AsyncDialog','AsyncRequest','ConversationNubUtils','DOM','SubscriptionsHandler','XConversationNubHeaderUnpinDialogController'],(function a(b,c,d,e,f,g){'use strict';function h(j,k,l){c('ConversationNubUtils').sendUnpinRequestAcrossTransitions(j,{notif_setting:l});c('ConversationNubUtils').informShouldCloseTab(k,j,c('ConversationNubUtils').CLOSE_REASON_UNPIN);c('ConversationNubUtils').informDidUnpinFromHeaderMenu(k)}function i(j,k){var l=c('XConversationNubHeaderUnpinDialogController').getURIBuilder().getURI();c('AsyncDialog').send(new (c('AsyncRequest'))(l),function(m){var n=new (c('SubscriptionsHandler'))();n.addSubscriptions(m.subscribe('confirm',function(){m.hide();var o=null;c('DOM').scry(m.getRoot(),'input[type="radio"][name="notif_setting"]').forEach(function(p){if(p.checked)o=c('ConversationNubUtils').coerceToPinRequestNotifSetting(p.value);});h(j,k,o)}),m.subscribe('cancel',function(){m.hide()}),m.subscribe('destroy',function(){n.release()}))})}f.exports={initDialog:i}}),null);
__d('ConversationNubHeaderMenu.react',['cx','fbt','AsyncFeature','ContextualLayerDynamicOffsetX','ConversationNubHeaderMenuUnpinDialog','ConversationNubUtils','MenuSeparator.react','PopoverMenu.react','React','ReactMenu','goURI'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('ReactMenu').Item;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n)}m.prototype.componentDidMount=function(){if(this.props.showOnMount)this.show();};m.prototype.show=function(){this.refs.menu&&this.refs.menu.showPopover()};m.prototype.hide=function(){this.refs.menu&&this.refs.menu.hidePopover()};m.prototype.toggle=function(){var n=this.refs.menu;if(!n)return;if(n.isShown()){this.hide()}else this.show();};m.prototype.$ConversationNubHeaderMenu1=function(){var n=this.props,o=n.permalinkURI,p=n.onPermalinkClick;if(!o)return null;return c('React').createElement(l,{onclick:function(){c('ConversationNubUtils').informOpenPermalinkFromHeader(this.props.tabID);c('goURI')(o);p&&p()}.bind(this)},i._("See full post"))};m.prototype.$ConversationNubHeaderMenu2=function(){var n=this.props,o=n.ftID,p=n.tabID;if(!o||!p)return;if(c('AsyncFeature').__serverHasFeatureImpl(3)){c('ConversationNubHeaderMenuUnpinDialog').initDialog(o,p)}else{c('ConversationNubUtils').sendUnpinRequestAcrossTransitions(o);c('ConversationNubUtils').informShouldCloseTab(p,o,c('ConversationNubUtils').CLOSE_REASON_UNPIN);c('ConversationNubUtils').informDidUnpinFromHeaderMenu(p)}};m.prototype.$ConversationNubHeaderMenu3=function(){if(!this.props.ftID)return null;return c('React').createElement(l,{onclick:this.$ConversationNubHeaderMenu2.bind(this)},c('React').createElement('div',null,i._("Hide this tab")))};m.prototype.$ConversationNubHeaderMenu4=function(){var n=this.$ConversationNubHeaderMenu1();return c('React').createElement(c('ReactMenu'),null,n,n?c('React').createElement(c('MenuSeparator.react'),null):null,this.$ConversationNubHeaderMenu3())};m.prototype.render=function(){var n=this.$ConversationNubHeaderMenu4();return c('React').createElement(c('PopoverMenu.react'),{menu:n,ref:'menu',layerBehaviors:[c('ContextualLayerDynamicOffsetX')],onShow:function(){this.props.onMenuShow&&this.props.onMenuShow()}.bind(this),onHide:function(){this.props.onMenuHide&&this.props.onMenuHide()}.bind(this)},c('React').createElement('div',{className:"_5k19"},c('React').createElement('i',{className:"_1h85"})))};f.exports=m}),null);