if (self.CavalryLogger) { CavalryLogger.start_js(["VChCh"]); }

__d('MusicConstants',['URI'],(function a(b,c,d,e,f,g){var h={DEBUG:false,CONFIG:{PARTNER_TIMEOUT:8000},LIVE_LISTEN_MIN_SPOTIFY_VERSION:'spotify-0.6.6.0.g5a9eaca5',enableDebug:function i(){this.DEBUG=true},sameURLs:function i(j,k){var l=/\/$/;if(j&&k){j=new (c('URI'))(j);k=new (c('URI'))(k);return j.getDomain()==k.getDomain()&&j.getPath()==k.getPath()}return false},greaterOrEqualToMinimumVersion:function i(j,k){var l=/(?:\d+\.)+/,m=j.match(l)[0].split('.').slice(0,-1),n=k.match(l)[0].split('.').slice(0,-1);if(m.length!==n.length)return false;for(var o=0;o<n.length;o++)if(+m[o]<+n[o]){return false}else if(+m[o]>+n[o])return true;return true},sanitizeForProviders:function i(j){var k={};for(var l in j)if(this.ALLOWED_EXTERNAL_CONTEXT_PARAMS[l])k[l]=j[l];return k},OP:{RESUME:'RESUME',PAUSE:'PAUSE',PLAY:'PLAY',VERSION:'VERSION'},STATUS_CHANGE_OP:{STATUS:'STATUS',LOGIN:'LOGIN',REINFORM:'REINFORM'},STATUS_CHANGE_EVENT:{playing:'PLAY_STATE_CHANGED',track:'TRACK_CHANGED'},DIAGNOSTIC_EVENT:{ALL_PAUSED:'ALL_PAUSED',ALL_OFFLINE:'ALL_OFFLINE',OFFLINE:'OFFLINE',ONLINE:'ONLINE',SEARCHING:'SEARCHING',HIT:'HIT',MISS:'MISS',RESIGN:'RESIGN',IFRAME_POLLING:'IFRAME_POLLING',RELAUNCH:'RELAUNCH',STATE_CHANGE:'STATE_CHANGE',WRONG_VERSION:'WRONG_VERSION',SERVICE_ERROR:'SERVICE_ERROR',INCORRECT_ONLINE_STATE:'INCORRECT_ONLINE_STATE',LOG_SEND_OP:'LOG_SEND_OP',REQUEUE_OP:'REQUEUE_OP'},ALLOWED_STATUS_PARAMS:{playing:'playing',track:'track',context:'context',client_version:'client_version',start_time:'start_time',expires_in:'expires_in',open_graph_state:'open_graph_state'},ALLOWED_EXTERNAL_CONTEXT_PARAMS:{uri:true,song:true,radio_station:true,album:true,playlist:true,musician:true,song_list:true,offset:true,title:true,request_id:true,listen_with_friends:true,needs_tos:true},LIVE_LISTEN_OP:{NOW_LEADING:'NOW_LEADING',NOW_LISTENING:'NOW_LISTENING',END_SESSION:'END_SESSION',SONG_PLAYING:'SONG_PLAYING',LISTENER_UPDATE:'LISTENER_UPDATE',QUEUE_SESSION:'QUEUE_SESSION',PLAY_ERROR:'PLAY_ERROR',SESSION_UPDATED:'SESSION_UPDATED',QUEUING_SESSION:'QUEUING_SESSION'},MUSIC_BUTTON:{ACTIVATE:'ACTIVATE'},ERROR:{1:'SERVICE_UNAVAILABLE_WITHOUT_PREMIUM',2:'SERVICE_UNAVAILABLE_WITHOUT_PREMIUM_OR_WAIT',3:'SERVICE_UNAVAILABLE_BILLING_ISSUE',4:'SERVICE_UNAVAILABLE_TECHNICAL_ISSUE',5:'AUDIO_AD_PLAYING',99:'SERVICE_TEMPORARILY_UNAVAILABLE',101:'SONG_UNAVAILABLE_WITHOUT_PURCHASE',102:'SONG_UNAVAILABLE_WITHOUT_PREMIUM',103:'SONG_UNAVAILABLE_INDEFINITELY'}};f.exports=b.MusicConstants||h}),null);
__d('MusicLogger',['AsyncRequest','JSLogger','MusicConstants','Run','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){var h=5000,i=c('JSLogger').create('music_logger'),j=null,k={};function l(){j=null}function m(){if(!j){i.debug('queue_dispatch',h);j=c('setTimeoutAcrossTransitions')(n,h)}}function n(p){i.debug('dispatch',{onUnload:p,messages:k});l();if(Object.keys(k).length>0){var q=JSON.stringify(k);k={};var r=new (c('AsyncRequest'))().setURI('/ajax/music/log.php').setData({types:q});if(p)r.setOption('asynchronous_DEPRECATED',false);r.send()}}c('Run').onUnload(n.bind(null,true));var o={PLATFORM:'platform',STATUS_EVENT_VIA:'status_event',BUMP_KEY:'bump_key',log:function p(q,r){if(q===o.STATUS_EVENT_VIA)if(r.op!==c('MusicConstants').OP.PLAY&&r.op!==c('MusicConstants').STATUS_CHANGE_EVENT.playing&&r.op!==c('MusicConstants').STATUS_CHANGE_EVENT.track)return;k[q]=k[q]||[];k[q].push(r);m()},dispatchNow:n};f.exports=b.MusicLogger||o}),null);